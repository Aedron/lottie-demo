# Lottie 动画手把手入门教学
因为我一直比较关注 Web 领域的设计趋势, 很早之前就听很说了 Lottie 这个项目, 但是一直没时间和机会去尝试, 最近终于有时间机会于是尝试了一把。

## 一. Intro to Lottie
Lottie 是 Airbnb 开源的一个支持 Web、Android、iOS 以及 ReactNative等平台的动画库，它可以结合 AE 和 Bodymovin 来快速实现**复杂动画**。

其实对于普通的动效和简单动画, 使用原生代码实现已经足够, Lottie 是为了复杂动画而生的, 下面来看几个 Lottie 实现的几个动画例子:

这种复杂的动画, 如果需要手写代码来实现, 将会很繁琐且效率低下, 这正是 Lottie 大展身手的地方。

![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/v2-0e4e99fb36b64d2241966fa96deadb51_r.jpg)

要使用 Lottie, 需要在借助 Bodymovin 插件将动画工程文件从 AE 中导出成 JSON。Lottie 分别为每个平台实现了一套 Player, 只需载入JSON动画文件就可播放。

值得一提的是, Lottie 在 Web 上是借助 Canvas 或者 SVG 来渲染动画的,  动画的关键帧在导出时已经被计算好了, 除了解析JSON之外基本没有性能损耗, 因此效率非常高!

## 二. 绘制动画
先 Show 一下完成的效果, 这个动画只需要5分钟便可绘制完成 !

首先, 打开 AE, 新建合成, 参数如下:
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/DDAF8800-9F4B-4F03-963B-B8619E53A967.png)
然后进入AE, 默认会看到这个界面:
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/B1FBA8BC-41CE-4A61-A20C-5BD60BDEFFD0.png)

每个区域的作用分别是:
* 项目: 管理当前项目以及一些项目参数的预览
* 资源: 导入到 AE 中的所有外部资源如图像等在这里进行统一管理
* 图层: 在这里为每一个图层添加/编辑关键帧和属性
* 时间轴: 在这里可以编辑动画的关键帧和曲线
* 预览: 动画和编辑实时预览/编辑窗口
* 工具: 各种工具的集合, 如文字工具、图形工具等
* 属性: 在这里编辑元素的属性

首先, 选择我们新建的合成, 点击工具栏的圆角矩形按钮, 同时按住shift, 在预览区域绘制一个矩形。 
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/F69D1C99-584D-480E-A702-1C8EE1AE9583.png)
然后在图层窗口中选择绘制的图层, 点击图层左侧三角, 依次展开: 内容、矩形、形状路径, 然后将圆度设置为0。

OK, 这里我们的基础图形已经绘制完毕了, 是不是 So easy? 

现在我们需要给其添加关键帧让其动起来。 AE 里的关键帧跟 CSS 里的 keyframe 属性没有什么区别, 我们只需要对其运动过程中的某一些节点添加关键属性, 这个元素将会在相邻两个关键帧之间进行关键属性的平滑变换。

在我们开始之前, 先分析一下动画效果, 可以分成三部分: 
* 位移动画: Y 轴方向的往复运动
* 形状动画: 矩形和圆形之间的往复变换
* 颜色动画: 蓝色和品红色的突变

OK, 让我们先来完成位移动画:
首先, 选中我们的图层, 点击图层左侧三角, 展开变换选项, 选中位置属性, 同时把时间轴移动到0:
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/7C5F4BA7-3C06-4AAC-98C3-A85C0BFB9A73.png)

这时进行最重要的一步, **添加关键帧**:
首先, 点击图层区域中位置属性左侧的小时钟图标, 开始记录关键帧, 如图:
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/296B290D-68E3-419D-AF06-76DAEFA08457.png)
然后, 将时间轴移到20帧的位置,  点击左侧的菱形激活当前位置的关键帧属性记录, 同时更改位置属性中的Y坐标, 如图:
![](Lottie%20%E5%8A%A8%E7%94%BB%E6%89%8B%E6%8A%8A%E6%89%8B%E5%85%A5%E9%97%A8%E6%95%99%E5%AD%A6/04ACA68C-00A8-4C2D-A100-591AB5321249.png)
这么做的意思是: 让图层的Y轴坐标属性, 在0帧到20帧的过程中, 从150动画到380, 是不是很容易理解?
现在按下空格键, 预览效果! BIngo, 你会发现, 矩形动了起来, 虽然只是动了20帧, 但这是我们完成的第一个关键帧动画! 鼓励一下自己~
然后如法炮制, 完成余下的几个关键帧的记录, 如图:

