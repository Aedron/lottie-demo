{"version":3,"sources":["lottie-demo/lottie.js"],"names":["root","factory","define","amd","module","exports","lottie","bodymovin","window","svgNS","locationHref","initialDefaultFrame","subframeEnabled","expressionsPlugin","isSafari","test","navigator","userAgent","cachedColors","bm_rounder","Math","round","bm_rnd","bm_pow","pow","bm_sqrt","sqrt","bm_abs","abs","bm_floor","floor","bm_max","max","bm_min","min","blitter","BMMath","propertyNames","Object","getOwnPropertyNames","i","len","length","ProjectInterface","random","val","tOfVal","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","n","c","t","d","type","currentTime","totalTime","direction","BMCompleteEvent","BMCompleteLoopEvent","currentLoop","totalLoops","BMSegmentStartEvent","f","firstFrame","totalFrames","BMDestroyEvent","target","randomString","chars","undefined","result","HSVtoRGB","h","s","v","r","g","b","p","q","RGBtoHSV","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","colorMap","hex","toString","BaseEvent","prototype","triggerEvent","eventName","args","_cbs","addEventListener","callback","push","removeEventListener","bind","splice","createTypedArray","createRegularArray","arr","value","Float32Array","Int16Array","Uint8ClampedArray","Array","apply","createNS","document","createElementNS","createTag","createElement","addDynamicProperty","prop","dynamicProperties","indexOf","container","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","props","rotate","angle","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","skewFromAxis","scale","sz","isNaN","setTransform","a","e","j","k","l","m","o","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","_identityCalculated","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","inversePoint","pt","determinant","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointArray","applyToPointStringified","toCSS","cssValue","to2dCSS","pool","math","global","width","chunks","digits","rngname","startdenom","significance","overflow","mask","nodecrypto","seedrandom","seed","options","key","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","double","S","pass","is_math_call","state","copy","keylen","me","count","slice","obj","depth","typ","stringseed","smear","charCodeAt","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","Date","screen","String","fromCharCode","BezierFactory","ob","getBezierEasing","beziers","nm","str","replace","bezEasing","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","points","_mSampleValues","_precomputed","get","mY1","mY2","_precompute","_getTForX","_calcSampleValues","mSampleValues","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","getTime","timeToCall","id","setTimeout","clearTimeout","extendPrototype","sources","destination","sourcePrototype","attr","hasOwnProperty","getDescriptor","object","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","easingFunctions","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","pointOnLine3D","z1","z2","z3","dist1","dist2","dist3","diffDist","getBezierLength","pt4","curveSegments","ptCoord","perc","addedLength","ptDistance","point","lastPoint","lengthData","bezier_length_pool","newElement","percents","lengths","getSegmentsLength","shapeData","segmentsLength","segments_length_pool","closed","pathV","pathO","pathI","_length","totalLength","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","keyData","to","ti","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","getPointInSegment","percent","t1","u0","u1","ptX","ptY","getSegmentArray","bezier_segment_points","getNewSegment","startPerc","endPerc","t0","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","bez","dataFunctionManager","completeLayers","layers","comps","fontManager","layerData","animArray","lastFrame","jLen","kLen","completed","tt","td","hasMask","maskProps","masksProperties","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","shapes","completeText","__used","JSON","parse","stringify","hasPaths","ks","it","path","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","animationData","assets","checkChars","pathData","paths","data","__converted","checkColors","iterateShapes","checkShapes","cl","completeData","__complete","singleShape","moduleOb","dataManager","FontManager","maxWaitingTime","emptyChar","w","size","combinedCharacters","concat","setUpNode","font","family","parentNode","fontFamily","node","innerHTML","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","appendChild","body","offsetWidth","parent","checkLoadedFonts","fonts","loadedCount","loaded","fOrigin","origin","Typekit","load","typekitLoaded","async","active","monoCase","sansCase","removeChild","now","initTime","createHelper","def","fontData","tHelper","setAttribute","fFamily","fStyle","fWeight","textContent","fClass","className","tCanvasHelper","getContext","addFonts","defs","list","fontArr","fPath","rel","href","sc","helper","cache","addChars","found","ch","getCharData","char","console","warn","measureText","fontName","getFontByName","index","getComputedTextLength","name","fName","getCombinedCharacterCodes","Font","PropertyFactory","initFrame","interpolateValue","frameNum","caching","offsetTime","newValue","propType","pv","iterationIndex","lastIndex","keyframes","nextKeyData","fnc","ind","_lastBezierData","__fnct","distanceInLine","segmentPerc","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","time","quaternionToEuler","slerp","constructor","az","aw","bx","by","bz","bw","omega","cosom","sinom","scale0","scale1","acos","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","getNoValue","_mdf","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","searchDynamicProperties","applyToMatrix","mat","sk","sa","rz","ry","rx","or","px","py","pz","processKeys","forceRender","autoOriented","getValueAtTime","v1","v2","frameRate","setInverted","inverted","iv","autoOrient","TransformProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","point_pool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","getShapeValue","resetShape","localShapeCollection","shapesEqual","shape1","shape2","shape_pool","releaseShapes","addShape","ShapeProperty","shapeCollection_pool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","cPoint","convertEllToPath","s0","_cw","_v","StarShapeProperty","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","rad","roundness","perimSegment","currentAng","ox","oy","RectShapeProperty","convertRectToPath","v0","getShapeProp","dataProp","keys","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","initModifierProperties","addShapeToModifier","shape","TrimModifier","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","shapeSegments","segmentOb","shapeS","shapeE","releasePathsData","release","processShapes","_s","shapePaths","totalShapeLength","edges","newShapesData","addShapes","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","segment","RoundCornersModifier","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","newV","newO","newI","distance","newPosPerc","RepeaterModifier","tr","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","cont","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","copies","ceil","group","reloadShapes","offsetModulo","roundOffset","tMat","pProps","rProps","sProps","iteration","mProps","op","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","comparePoints","diff","ImagePreloader","imageLoaded","loadedAssets","totalImages","imagesLoadedCb","getAssetsPath","assetData","assetsPath","imagePath","u","loadImage","img","src","loadAssets","cb","totalAssets","setPath","setAssetsPath","destroy","featureSupport","maskType","filtersFactory","createFilter","createAlphaToLuminanceFilter","filId","fil","feColorMatrix","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","searchProperties","animatorProps","TextAnimatorDataProperty","maskManager","getMaskProperty","getMeasures","animators","matrixHelper","mHelper","renderedLettersCount","xPos","yPos","letters","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","tLength","pi","yOff","finalSize","firstLine","animatorSelector","letterValue","lastLetter","offf","xPathPos","yPathPos","initPathPos","initSegmentInd","initPointInd","currentLine","elemOpacity","sw","fc","lineLength","letterSw","letterSc","letterFc","letterM","letterP","defaultPropsArray","letterO","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","yOffset","line","lineWidths","extra","an","animatorOffset","add","strokeWidthAnim","strokeColorAnim","fillColorAnim","fh","fs","fb","ls","rot","atan","ps","ascent","justifyOffset","boxWidth","LetterProps","update","defaultData","textAnimator_animatables","TextSelectorProp","getTextSelectorProp","updated","TextProperty","keysIndex","canResize","minimumFontSize","currentData","defaultBoxWidth","lh","of","finalText","finalLineHeight","__test","copyFromDocumentData","searchProperty","completeTextData","setCurrentData","currentTextValue","searchKeyframes","getKeyframeValue","_finalValue","currentValue","textKeys","textDocumentData","buildFinalText","text","charactersArray","charAt","newLineFlag","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","charData","styles","styleName","toLowerCase","trackingOffset","boxHeight","currentHeight","lastSpaceIndex","uncollapsedSpaces","currentChar","animatorData","letterData","based","indexes","rn","currentInd","newInd","updateDocumentData","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","pool_factory","initialLength","_create","_release","_clone","pooling","clonedElement","create","cloned","shapeCollection","BaseRenderer","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","Error","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","progressiveLoad","buildElementParenting","parentName","hierarchy","addPendingElement","setAsParent","setHierarchy","pendingElements","searchExtraCompositions","xt","initExpressions","registerComposition","SVGRenderer","animationItem","config","svgElement","maskElement","layerElement","renderConfig","preserveAspectRatio","hideOnTransparent","viewBoxOnly","viewBoxSize","compSize","destroyed","NullElement","SVGShapeElement","SVGTextElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","animData","height","wrapper","getAssetData","fr","rect","maskId","updateContainerSize","appendElementInPos","setMatte","layerId","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","MaskElement","viewData","solidPath","properties","currentMasks","expansor","feMorph","maskRef","mode","filterID","expan","lastPath","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","finalMat","finalTransform","mProp","getMaskelement","pathNodes","pathString","pathShapeValue","HierarchyElement","initHierarchy","_isParent","FrameElement","prepareProperties","isVisible","TransformElement","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","RenderableElement","initRenderable","isInRange","hidden","isTransparent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","renderableEffectsManager","sourceRectAtTime","getLayerSize","RenderableDOMElement","_prototype","initElement","initBaseData","initRendererElement","createContainerElements","addMasks","createContent","baseElement","hd","renderElement","renderInnerContent","innerElem","destroyBaseElement","ProcessedElement","SVGStyleData","level","lvl","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","stop","gf","cst","opacityId","opFill","ms","ost","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","BaseElement","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","shapesData","itemsData","content","textInterface","TextExpressionInterface","blendModeEnums","getBlendMode","bm","setBlendMode","blendModeValue","sr","effectsManager","EffectsManager","getType","SVGBaseElement","matteElement","transformedElement","_sizeChanged","layerElementParent","gg","masker","maskGroup","maskGrouper","alphaRect","ln","cp","clipId","cpGroup","SVGEffects","IShapeElement","addShapeToModifiers","shapeModifiers","renderModifiers","lcEnum","ljEnum","searchProcessedElement","processedElements","addProcessedElement","buildShapeString","shapeString","ITextElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","ICompElement","tm","_placeholder","timeRemapped","setElements","elems","getElements","destroyElements","assetPath","setAttributeNS","supports3d","textSpans","textContainer","buildTextContents","textArray","textContents","currentTextContent","usesGlyphs","tSpan","tElement","justify","cachedSpansLength","textBox","getBBox","bbox","renderedLetter","textSpan","stylesList","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","createStyleElement","elementData","gradientConstructor","lc","lj","ml","createGroupElement","createTransformElement","createShapeElement","ownTransformers","shapeProperty","setElementStyles","render","ownStyles","ownModifiers","currentTransform","modifier","processedPos","renderShape","renderPath","renderFill","renderGradient","renderStroke","itemData","pathStringTransformed","redraw","lLen","iterations","styleData","styleElem","hasOpacity","attr1","attr2","cValues","oValues","ang","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMerge","feMergeNode","colorBlack","colorWhite","opacity","SVGFillFilter","SVGStrokeEffect","initialized","initialize","elemChildren","children","childNodes","groupPath","removeAttribute","pathMasker","dasharrayValue","getTotalLength","units","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","color1","color2","color3","tableR","tableG","tableB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","feFunc","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","table","call","colorValue","outputDelta","inputDelta","join","bezier","SVGDropShadowEffect","feGaussianBlur","feOffset","feFlood","feComposite","originalNodeAdded","col","_svgMatteSymbols","_svgMatteMaskCounter","SVGMatte3Effect","filterElem","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","ef","filters","animationManager","registeredAnimations","idled","playingAnimationsNum","_stopped","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","addPlayingCount","activate","loadAnimation","params","setParams","setSpeed","setDirection","play","resume","nowTime","elapsedTime","advanceTime","first","pause","goToAndStop","isFrame","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","isLoaded","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","loop","animationID","timeCompleted","segmentPos","_idle","self","context","animType","CanvasRenderer","rendererSettings","HybridRenderer","parseInt","autoloadSegments","substr","xhr","XMLHttpRequest","lastIndexOf","fileName","open","send","onreadystatechange","readyState","status","responseText","response","err","wrapperAttributes","attributes","getNamedItem","prerender","tf","loadNextSegment","trigger","shift","segmentPath","loadSegments","_this","imagePreloader","updaFrameModifier","waitForFontsLoaded","checkLoaded","checkFontsLoaded","elementLoaded","gotoFrame","setSubframe","setCurrentRawFrameValue","frameModifier","goToAndPlay","nextValue","_isComplete","checkSegments","adjustSegment","setSegment","end","pendingFrame","playSegments","forceFlag","resetSegments","remove","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getAssets","getDuration","clearCanvas","dpr","devicePixelRatio","contextData","CVContextData","transformMat","CVShapeElement","CVTextElement","CVImageElement","CVCompElement","CVSolidElement","ctxTransform","canvasContext","cProps","cTr","trProps","ctxOpacity","globalAlpha","cO","restore","save","actionFlag","cArrPos","duplicate","saved","savedOp","blendMode","popped","mozTransformOrigin","isDashed","compWidth","compHeight","transformCanvas","elementWidth","elementHeight","offsetHeight","canvas","elementRel","animationRel","par","fillType","beginPath","closePath","clip","clearRect","threeDElements","camera","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","tmpDOMElement","getThreeDContainerByPos","HShapeElement","HTextElement","HCameraElement","HImageElement","HCompElement","HSolidElement","startPos","endPos","perspectiveElem","createThreeDContainer","webkitTransform","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","svg","setup","cWidth","cHeight","perspective","webkitPerspective","floatingContainer","newLength","currentSavedOp","set","CVBaseElement","createElements","CVEffects","globalCompositeOperation","CVMaskElement","hideElement","showElement","hasMasks","failed","Image","ctx","imgW","imgH","imgRel","canvasRel","widthCrop","heightCrop","drawImage","imageFailed","parentMatrix","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","co","wi","da","do","nodes","trNodes","hasStrokes","hasFills","fl","ownArrays","renderShapeTransform","parentTransform","groupTransform","groupMatrix","drawLayer","currentStyle","coOp","strokeStyle","lineCap","lineJoin","miterLimit","fillStyle","setLineDash","lineDashOffset","stroke","fill","isMain","groupTransformMat","fillRect","currentRender","sWidth","fValue","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","HBaseElement","checkBlendMode","tg","backgroundColor","_createBaseContainerElements","shapesContainer","currentBBox","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","bounds","checkBounds","getBoundsOfCurve","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","changed","textPaths","isMasked","compW","compH","innerElemStyle","strokeWidth","lineHeight","tParent","tCont","textPath","margin","imageElem","pe","_prevMat","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","m_rotationX","m_rotationY","HEffects","Expressions","ExpressionManager","duplicatePropertyValue","Number","isTypeOfArray","$bm_neg","tOfA","lenA","retArr","sum","tOfB","lenB","sub","mul","mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","rnd","rndm","createPath","inTangents","outTangents","arrPlaceholder","inVertexPoint","outVertexPoint","initiateExpression","property","needsVelocity","_needsRandom","elemType","effect","thisProperty","frameDuration","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","toWorld","fromWorld","fromComp","fromCompToSurface","anchorPoint","thisLayer","thisComp","valueAtTime","velocityAtTime","scoped_bm_rt","expression_function","eval","numKeys","wiggle","freq","amp","addedAmps","periods","loopInDuration","duration","loopOutDuration","getVelocityAtTime","lookAt","elem1","elem2","fVec","pitch","yaw","easeOut","val1","val2","easeIn","nearestKey","keyTime","framesToTime","frames","fps","timeToFrames","seedRandom","randSeed","velocity","textIndex","textTotal","selectorValue","hasParent","executeExpression","_value","frameExpressionId","addPropertyDecorator","getStaticValueAtTime","durationFlag","lastKeyFrame","cycleDuration","firstKeyFrame","ret","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","_cachingAtTime","delta","setGroupProperty","propertyGroup","searchExpressions","getTransformValueAtTime","getTransformStaticValueAtTime","TextExpressionSelectorProp","getValueProxy","total","propertyGetProp","propertyIndex","ix","getShapeValueAtTime","shapeValue","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","propertyGetTextProp","addDecorator","calculateExpression","getExpressionValue","isKeyframed","hasExpressions","iterateElements","view","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","pathInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","contentsInterfaceFactory","interfaces","interfaceFunction","_interfaceFunction","_name","mn","numProperties","cix","transformInterface","transformInterfaceFactory","defineProperty","np","defineProperties","ExpressionValue","_propertyGroup","_dashPropertyGroup","dashOb","addPropertyToDashOb","start","rotation","skewAxis","outerRadius","outerRoundness","innerRadius","innerRoundness","radius","_prevValue","_sourceText","_thisLayerFunction","stringValue","toWorldMat","_registerMaskInterface","MaskManagerInterface","_registerEffectsInterface","effects","toComp","TransformExpressionInterface","anchorPointDescriptor","anchor_point","startTime","source","pixelAspect","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","compositions","_thisProjectFunction","effectsData","createGroupInterface","createValueInterface","groupInterface","en","MaskInterface","_mask","_data","MaskManager","_maskManager","_masksInterfaces","maskFunction","elementProp","expressionValue","arrayValue","arrValue","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","eff","lottiejs","setLocationHref","setSubframeRendering","setQuality","inBrowser","installPlugin","plugin","getFactory","__getFactory","version","checkReady","clearInterval","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","scripts","myScript","setInterval"],"mappings":"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","file":"f2469f58999962c8ceb0c41024c01aad.map","sourcesContent":["(function(root, factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(function() {\r\n            return factory(root);\r\n        });\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.lottie = factory(root);\r\n        root.bodymovin = root.lottie;\r\n    }\r\n}((window || {}), function(window) {\r\n    \"use strict\";\r\n    var svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bm_rounder = Math.round;\r\nvar bm_rnd;\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_abs = Math.abs;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\nvar blitter = 10;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = Object.getOwnPropertyNames(Math);\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {};}\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = createSizedArray(val.length);\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag){\r\n    if(flag){\r\n        bm_rnd = Math.round;\r\n    }else{\r\n        bm_rnd = function(val){\r\n            return val;\r\n        };\r\n    }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction BMEnterFrameEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentTime = c;\r\n    this.totalTime = t;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteEvent(n,d){\r\n    this.type = n;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentLoop = t;\r\n    this.totalLoops = c;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(n,f,t){\r\n    this.type = n;\r\n    this.firstFrame = f;\r\n    this.totalFrames = t;\r\n}\r\n\r\nfunction BMDestroyEvent(n,t){\r\n    this.type = n;\r\n    this.target = t;\r\n}\r\n\r\nfunction randomString(length, chars){\r\n    if(chars === undefined){\r\n        chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';\r\n    }\r\n    var i;\r\n    var result = '';\r\n    for (i = length; i > 0; --i) result += chars[Math.round(Math.random() * (chars.length - 1))];\r\n    return result;\r\n}\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v; g = t; b = p; break;\r\n        case 1: r = q; g = v; b = p; break;\r\n        case 2: r = p; g = v; b = t; break;\r\n        case 3: r = p; g = q; b = v; break;\r\n        case 4: r = t; g = p; b = v; break;\r\n        case 5: r = v; g = p; b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\nfunction BaseEvent(){}\r\nBaseEvent.prototype = {\r\n\ttriggerEvent: function (eventName, args) {\r\n\t    if (this._cbs[eventName]) {\r\n\t        var len = this._cbs[eventName].length;\r\n\t        for (var i = 0; i < len; i++){\r\n\t            this._cbs[eventName][i](args);\r\n\t        }\r\n\t    }\r\n\t},\r\n\taddEventListener: function (eventName, callback) {\r\n\t    if (!this._cbs[eventName]){\r\n\t        this._cbs[eventName] = [];\r\n\t    }\r\n\t    this._cbs[eventName].push(callback);\r\n\r\n\t\treturn function() {\r\n\t\t\tthis.removeEventListener(eventName, callback);\r\n\t\t}.bind(this);\r\n\t},\r\n\tremoveEventListener: function (eventName,callback){\r\n\t    if (!callback){\r\n\t        this._cbs[eventName] = null;\r\n\t    }else if(this._cbs[eventName]){\r\n\t        var i = 0, len = this._cbs[eventName].length;\r\n\t        while(i<len){\r\n\t            if(this._cbs[eventName][i] === callback){\r\n\t                this._cbs[eventName].splice(i,1);\r\n\t                i -=1;\r\n\t                len -= 1;\r\n\t            }\r\n\t            i += 1;\r\n\t        }\r\n\t        if(!this._cbs[eventName].length){\r\n\t            this._cbs[eventName] = null;\r\n\t        }\r\n\t    }\r\n\t}\r\n};\nvar createTypedArray = (function(){\r\n\tfunction createRegularArray(type, len){\r\n\t\tvar i = 0, arr = [], value;\r\n\t\tswitch(type) {\r\n\t\t\tcase 'int16':\r\n\t\t\tcase 'uint8c':\r\n\t\t\t\tvalue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvalue = 1.1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction createTypedArray(type, len){\r\n\t\tif(type === 'float32') {\r\n\t\t\treturn new Float32Array(len);\r\n\t\t} else if(type === 'int16') {\r\n\t\t\treturn new Int16Array(len);\r\n\t\t} else if(type === 'uint8c') {\r\n\t\t\treturn new Uint8ClampedArray(len);\r\n\t\t}\r\n\t}\r\n\tif(typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n\t\treturn createTypedArray;\r\n\t} else {\r\n\t\treturn createRegularArray;\r\n\t}\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n\treturn Array.apply(null,{length:len});\r\n}\nfunction createNS(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElementNS(svgNS, type);\r\n}\nfunction createTag(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElement(type);\r\n}\nfunction addDynamicProperty(prop) {\r\n\tif(this.dynamicProperties.indexOf(prop) === -1) {\r\n        this.dynamicProperties.push(prop);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n}\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0, 0, 1, 0, 0, -mSin,  0,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, mSin,  0, 0, -mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0, _tan(ax),  1, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        sz = isNaN(sz) ? 1 : sz;\r\n        if(sx == 1 && sy == 1 && sz == 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        var _p = this.props;\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            //NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n            //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n                _p[12] = _p[12] * a2 + _p[15] * m2;\r\n                _p[13] = _p[13] * f2 + _p[15] * n2;\r\n                _p[14] = _p[14] * k2 + _p[15] * o2;\r\n                _p[15] = _p[15] * p2;\r\n            //}\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = _p[0];\r\n        var b1 = _p[1];\r\n        var c1 = _p[2];\r\n        var d1 = _p[3];\r\n        var e1 = _p[4];\r\n        var f1 = _p[5];\r\n        var g1 = _p[6];\r\n        var h1 = _p[7];\r\n        var i1 = _p[8];\r\n        var j1 = _p[9];\r\n        var k1 = _p[10];\r\n        var l1 = _p[11];\r\n        var m1 = _p[12];\r\n        var n1 = _p[13];\r\n        var o1 = _p[14];\r\n        var p1 = _p[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function equals(matr){\r\n        var i = 0;\r\n        while (i < 16) {\r\n            if(matr.props[i] !== this.props[i]) {\r\n                return false;\r\n            }\r\n            i+=1;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n        var arr = createTypedArray('float32', 6);\r\n        if(this.isIdentity()) {\r\n            arr[0] = pt1[0];\r\n            arr[1] = pt1[1];\r\n            arr[2] = pt2[0];\r\n            arr[3] = pt2[1];\r\n            arr[4] = pt3[0];\r\n            arr[5] = pt3[1];\r\n        } else {\r\n            var p0 = this.props[0], p1 = this.props[1], p4 = this.props[4], p5 = this.props[5], p12 = this.props[12], p13 = this.props[13];\r\n            arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n            arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n            arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n            arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n            arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n            arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z){\r\n        var arr;\r\n        if(this.isIdentity()) {\r\n            arr = [x,y,z];\r\n        } else {\r\n            arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        return (x * this.props[0] + y * this.props[4] + this.props[12])+','+(x * this.props[1] + y * this.props[5] + this.props[13]);\r\n    }\r\n\r\n    function toCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var i = 0;\r\n        var props = this.props;\r\n        var cssValue = 'matrix3d(';\r\n        var v = 10000;\r\n        while(i<16){\r\n            cssValue += _rnd(props[i]*v)/v;\r\n            cssValue += i === 15 ? ')':',';\r\n            i += 1;\r\n        }\r\n        return cssValue;\r\n    }\r\n\r\n    function to2dCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var v = 10000;\r\n        var props = this.props;\r\n        return \"matrix(\" + _rnd(props[0]*v)/v + ',' + _rnd(props[1]*v)/v + ',' + _rnd(props[4]*v)/v + ',' + _rnd(props[5]*v)/v + ',' + _rnd(props[12]*v)/v + ',' + _rnd(props[13]*v)/v + \")\";\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToTriplePoints = applyToTriplePoints;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.equals = equals;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = createTypedArray('float32', 16);\r\n        this.reset();\r\n    };\r\n}());\r\n\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\nfunction extendPrototype(sources,destination){\r\n    var i, len = sources.length, sourcePrototype;\r\n    for (i = 0;i < len;i += 1) {\r\n        sourcePrototype = sources[i].prototype;\r\n        for (var attr in sourcePrototype) {\r\n            if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n\tfunction ProxyFunction(){}\r\n\tProxyFunction.prototype = prototype;\r\n\treturn ProxyFunction;\r\n}\nfunction bezFunction(){\r\n\r\n    var easingFunctions = [];\r\n    var math = Math;\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = (function(){\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = bezier_length_pool.newElement();\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.percents[k] = perc;\r\n                lengthData.lengths[k] = addedLength;\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var segmentsLength = segments_length_pool.newElement();\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = segmentsLength.lengths;\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        segmentsLength.totalLength = totalLength;\r\n        return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (keyData){\r\n            var pt1 = keyData.s;\r\n            var pt2 = keyData.e;\r\n            var pt3 = keyData.to;\r\n            var pt4 = keyData.ti;\r\n            var bezierName = (pt1[0]+'_'+pt1[1]+'_'+pt2[0]+'_'+pt2[1]+'_'+pt3[0]+'_'+pt3[1]+'_'+pt4[0]+'_'+pt4[1]).replace(/\\./g, 'p');\r\n            if(storedData[bezierName]){\r\n                keyData.bezierData = storedData[bezierName];\r\n                return;\r\n            }\r\n            var curveSegments = defaultCurveSegments;\r\n            var k, i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point,lastPoint = null;\r\n            if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                curveSegments = 2;\r\n            }\r\n            var bezierData = new BezierData(curveSegments);\r\n            len = pt3.length;\r\n            for (k = 0; k < curveSegments; k += 1) {\r\n                point = createSizedArray(len);\r\n                perc = k / (curveSegments - 1);\r\n                ptDistance = 0;\r\n                for (i = 0; i < len; i += 1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                }\r\n                ptDistance = bm_sqrt(ptDistance);\r\n                addedLength += ptDistance;\r\n                bezierData.points[k] = new PointData(ptDistance, point);\r\n                lastPoint = point;\r\n            }\r\n            bezierData.segmentLength = addedLength;\r\n            keyData.bezierData = bezierData;\r\n            storedData[bezierName] = bezierData;\r\n        };\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var percents = bezierData.percents;\r\n        var lengths = bezierData.lengths;\r\n        var len = percents.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]){\r\n            return percents[initPos];\r\n        }else{\r\n            var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(lengths[initPos] <= lengthPos && lengths[initPos+1] > lengthPos){\r\n                    lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos+1] - lengths[initPos]);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    //FIX for TypedArrays that don't store floating point values with enough accuracy\r\n                    if(initPos === len - 1) {\r\n                        return percents[initPos];\r\n                    }\r\n                    flag = false;\r\n                }\r\n            }\r\n            return percents[initPos] + (percents[initPos+1] - percents[initPos])*lPerc;\r\n        }\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u0 = 1;\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    function getSegmentArray() {\r\n\r\n    }\r\n\r\n    var bezier_segment_points = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        var u0u0u0 = u0*u0*u0;\r\n        var t0u0u0_3 = t0*u0*u0*3; // t0*u0*u0 + u0*t0*u0 + u0*u0*t0\r\n        var t0t0u0_3 = t0*t0*u0*3; // t0*t0*u0 + u0*t0*t0 + t0*u0*t0\r\n        var t0t0t0 = t0*t0*t0;\r\n        //\r\n        var u0u0u1 = u0*u0*u1;\r\n        var t0u0u1_3 = t0*u0*u1 + u0*t0*u1 + u0*u0*t1;\r\n        var t0t0u1_3 = t0*t0*u1 + u0*t0*t1 + t0*u0*t1;\r\n        var t0t0t1 = t0*t0*t1;\r\n        //\r\n        var u0u1u1 = u0*u1*u1;\r\n        var t0u1u1_3 = t0*u1*u1 + u0*t1*u1 + u0*u1*t1;\r\n        var t0t1u1_3 = t0*t1*u1 + u0*t1*t1 + t0*u1*t1;\r\n        var t0t1t1 = t0*t1*t1;\r\n        //\r\n        var u1u1u1 = u1*u1*u1;\r\n        var t1u1u1_3 = t1*u1*u1 + u1*t1*u1 + u1*u1*t1;\r\n        var t1t1u1_3 = t1*t1*u1 + u1*t1*t1 + t1*u1*t1;\r\n        var t1t1t1 = t1*t1*t1;\r\n        //Math.round(num * 100) / 100\r\n        for(i=0;i<len;i+=1){\r\n            bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n            // pts.pt1[i] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            // pts.pt3[i] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            // pts.pt4[i] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            // pts.pt2[i] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n            // pts.pt1[i] =  Math.round((u0*u0*u0* pt1[i] + (t0*u0*u0 + u0*t0*u0 + u0*u0*t0) * pt3[i] + (t0*t0*u0 + u0*t0*t0 + t0*u0*t0)* pt4[i] + t0*t0*t0* pt2[i])* 1000) / 1000;\r\n            // pts.pt3[i] = Math.round((u0*u0*u1*pt1[i] + (t0*u0*u1 + u0*t0*u1 + u0*u0*t1)* pt3[i] + (t0*t0*u1 + u0*t0*t1 + t0*u0*t1)* pt4[i] + t0*t0*t1* pt2[i])* 1000) / 1000;\r\n            // pts.pt4[i] = Math.round((u0*u1*u1* pt1[i] + (t0*u1*u1 + u0*t1*u1 + u0*u1*t1)* pt3[i] + (t0*t1*u1 + u0*t1*t1 + t0*u1*t1)* pt4[i] + t0*t1*t1* pt2[i])* 1000) / 1000;\r\n            // pts.pt2[i] = Math.round((u1*u1*u1* pt1[i] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[i] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[i] + t1*t1*t1* pt2[i])* 1000) / 1000;\r\n        }\r\n\r\n        return bezier_segment_points;\r\n    }\r\n\r\n    return {\r\n        //getEasingCurve : getEasingCurve,\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen, k, kLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            var hasPaths = false;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                    hasPaths = true;\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    /*function blitPaths(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] /= blitter;\r\n            path.i[i][1] /= blitter;\r\n            path.o[i][0] /= blitter;\r\n            path.o[i][1] /= blitter;\r\n            path.v[i][0] /= blitter;\r\n            path.v[i][1] /= blitter;\r\n        }\r\n    }\r\n\r\n    function blitShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        var hasPaths = false;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    blitPaths(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            blitPaths(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            blitPaths(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n                hasPaths = true;\r\n            }else if(arr[i].ty == 'gr'){\r\n                blitShapes(arr[i].it);\r\n            }else if(arr[i].ty == 'rc'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].s);\r\n            }else if(arr[i].ty == 'st'){\r\n                blitProperty(arr[i].w);\r\n            }else if(arr[i].ty == 'tr'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].sk);\r\n                blitProperty(arr[i].a);\r\n            }else if(arr[i].ty == 'el'){\r\n                blitProperty(arr[i].p);\r\n                blitProperty(arr[i].s);\r\n            }else if(arr[i].ty == 'rd'){\r\n                blitProperty(arr[i].r);\r\n            }else{\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitText(data, fontManager){\r\n\r\n    }\r\n\r\n    function blitValue(val){\r\n        if(typeof(val) === 'number'){\r\n            val /= blitter;\r\n        } else {\r\n            var i = val.length-1;\r\n            while(i>=0){\r\n                val[i] /= blitter;\r\n                i-=1;\r\n            }\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function blitProperty(data){\r\n        if(!data.k.length){\r\n            data.k = blitValue(data.k);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            data.k = blitValue(data.k);\r\n        } else {\r\n            var i, len = data.k.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(data.k[i].s){\r\n                    data.k[i].s = blitValue(data.k[i].s);\r\n                }\r\n                if(data.k[i].e){\r\n                    data.k[i].e = blitValue(data.k[i].e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitLayers(layers,comps, fontManager){\r\n        var layerData;\r\n        var animArray, lastFrame;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData)){\r\n                continue;\r\n            }\r\n            blitProperty(layerData.ks.a);\r\n            blitProperty(layerData.ks.p);\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            animArray = [];\r\n            lastFrame = -1;\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        blitPaths(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                blitPaths(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                blitPaths(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.w = Math.round(layerData.w/blitter);\r\n                layerData.h = Math.round(layerData.h/blitter);\r\n                blitLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                blitShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                blitText(layerData, fontManager);\r\n            }else if(layerData.ty == 1){\r\n                layerData.sh /= blitter;\r\n                layerData.sw /= blitter;\r\n            } else {\r\n            }\r\n        }\r\n    }\r\n\r\n    function blitAnimation(animationData,comps, fontManager){\r\n        blitLayers(animationData.layers,comps, fontManager);\r\n    }*/\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n        w: 0,\r\n        size:0,\r\n        shapes:[]\r\n    };\r\n    var combinedCharacters = [];\r\n    //Hindi characters\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366\r\n    , 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379\r\n    , 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = createTag('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = createTag('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 't' || this.fonts[i].origin === 2){\r\n                if(window.Typekit && window.Typekit.load && this.typekitLoaded === 0){\r\n                    this.typekitLoaded = 1;\r\n                    try{window.Typekit.load({\r\n                        async: true,\r\n                        active: function() {\r\n                            this.typekitLoaded = 2;\r\n                        }.bind(this)\r\n                    });}catch(e){}\r\n                }\r\n                if(this.typekitLoaded === 2) {\r\n                    this.fonts[i].loaded = true;\r\n                }\r\n            } else if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.loaded = true;}.bind(this),0);\r\n\r\n        }\r\n    }\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px';\r\n        //tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontData.fStyle);\r\n        tHelper.setAttribute('font-weight', fontData.fWeight);\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.className = fontData.fClass;\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = createTag('canvas').getContext('2d');\r\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px '+ fontData.fFamily;\r\n        //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n        return tHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.loaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.loaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        for(i=0; i<len; i+= 1){\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                var s = createTag('style');\r\n                s.type = \"text/css\";\r\n                s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                defs.appendChild(s);\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                //<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>\r\n                var l = createTag('link');\r\n                l.type = \"text/css\";\r\n                l.rel = \"stylesheet\";\r\n                l.href = fontArr[i].fPath;\r\n                //defs.appendChild(l);\r\n                document.body.appendChild(l);\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                //<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>\r\n                var sc = createTag('script');\r\n                sc.setAttribute('src',fontArr[i].fPath);\r\n                defs.appendChild(sc);\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            fontArr[i].cache = {};\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        //On some cases the font even if it is loaded, it won't load correctly when measuring text on canvas.\r\n        //Adding this timeout seems to fix it\r\n       setTimeout(function() {\r\n            checkLoadedFonts.bind(this)();\r\n        }.bind(this), 100);\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n        if(console && console.warn) {\r\n            console.warn('Missing character from exported characters list: ', char, style, font);\r\n        }\r\n        return emptyChar;\r\n    }\r\n\r\n    function measureText(char, fontName, size) {\r\n        var fontData = this.getFontByName(fontName);\r\n        var index = char.charCodeAt(0);\r\n        if(!fontData.cache[index + 1]) {\r\n            var tHelper = fontData.helper;\r\n            //Canvas version\r\n            //fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n            //SVG version\r\n            //console.log(tHelper.getBBox().width)\r\n            /*tHelper.textContent = '|' + char + '|';\r\n            var doubleSize = tHelper.getComputedTextLength();\r\n            tHelper.textContent = '||';\r\n            var singleSize = tHelper.getComputedTextLength();\r\n            fontData.cache[index + 1] = (doubleSize - singleSize)/100;*/\r\n           \r\n            tHelper.textContent = char;\r\n            fontData.cache[index + 1] = (tHelper.getComputedTextLength())/100;\r\n        }\r\n        return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return this.fonts[0];\r\n    }\r\n\r\n    function getCombinedCharacterCodes() {\r\n        return combinedCharacters;\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.loaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \r\n    Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n\r\n    return Font;\r\n\r\n}());\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = initialDefaultFrame;\r\n\r\n    function interpolateValue(frameNum, caching){\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if(this.propType === 'multidimensional') {\r\n            newValue = createTypedArray('float32', this.pv.length);\r\n        }\r\n        var iterationIndex = caching.lastIndex;\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length- 1,flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while(flag){\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i+1];\r\n            if(i == len-1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if(i < len - 1){\r\n                i += 1;\r\n            }else{\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen,perc,jLen, j, fnc;\r\n        if(keyData.to){\r\n\r\n            if(!keyData.bezierData){\r\n                bez.buildBezierData(keyData);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if(frameNum >= nextKeyData.t-offsetTime || frameNum < keyData.t-offsetTime){\r\n                var ind = frameNum >= nextKeyData.t-offsetTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for(k = 0; k < kLen; k += 1){\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                caching._lastBezierData = null;\r\n            }else{\r\n                if(keyData.__fnct){\r\n                    fnc = keyData.__fnct;\r\n                }else{\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y,keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastBezierData === bezierData) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while(flag){\r\n                    addedLength +=bezierData.points[j].partialLength;\r\n                    if(distanceInLine === 0 || perc === 0 || j == bezierData.points.length - 1){\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    }else if(distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j+1].partialLength){\r\n                        segmentPerc = (distanceInLine-addedLength)/(bezierData.points[j+1].partialLength);\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j+1].point[k] - bezierData.points[j].point[k])*segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if(j < jLen - 1){\r\n                        j += 1;\r\n                    }else{\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastBezierData = bezierData;\r\n            }\r\n        }else{\r\n            var outX,outY,inX,inY, keyValue;\r\n            len = keyData.s.length;\r\n            if(this.sh && keyData.h !== 1) {\r\n                if(frameNum >= nextKeyData.t-offsetTime){\r\n                    newValue[0] = keyData.e[0];\r\n                    newValue[1] = keyData.e[1];\r\n                    newValue[2] = keyData.e[2];\r\n                }else if(frameNum <= keyData.t-offsetTime){\r\n                    newValue[0] = keyData.s[0];\r\n                    newValue[1] = keyData.s[1];\r\n                    newValue[2] = keyData.s[2];\r\n                }else{\r\n                    var quatStart = createQuaternion(keyData.s);\r\n                    var quatEnd = createQuaternion(keyData.e);\r\n                    var time = (frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime));\r\n                    quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n                }\r\n                \r\n            } else {\r\n                for(i=0;i<len;i+=1){\r\n                    if(keyData.h !== 1){\r\n                        if(frameNum >= nextKeyData.t-offsetTime){\r\n                            perc = 1;\r\n                        }else if(frameNum < keyData.t-offsetTime){\r\n                            perc = 0;\r\n                        }else{\r\n                            if(keyData.o.x.constructor === Array){\r\n                                if(!keyData.__fnct){\r\n                                    keyData.__fnct = [];\r\n                                }\r\n                                if (!keyData.__fnct[i]) {\r\n                                    outX = keyData.o.x[i] || keyData.o.x[0];\r\n                                    outY = keyData.o.y[i] || keyData.o.y[0];\r\n                                    inX = keyData.i.x[i] || keyData.i.x[0];\r\n                                    inY = keyData.i.y[i] || keyData.i.y[0];\r\n                                    fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                    keyData.__fnct[i] = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct[i];\r\n                                }\r\n                            } else {\r\n                                if (!keyData.__fnct) {\r\n                                    outX = keyData.o.x;\r\n                                    outY = keyData.o.y;\r\n                                    inX = keyData.i.x;\r\n                                    inY = keyData.i.y;\r\n                                    fnc = BezierFactory.getBezierEasing(outX,outY,inX,inY).get;\r\n                                    keyData.__fnct = fnc;\r\n                                } else{\r\n                                    fnc = keyData.__fnct;\r\n                                }\r\n                            }\r\n                            perc = fnc((frameNum-(keyData.t-offsetTime))/((nextKeyData.t-offsetTime)-(keyData.t-offsetTime)));\r\n                        }\r\n                    }\r\n\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i]+(keyData.e[i]-keyData.s[i])*perc;\r\n\r\n                    if(len === 1){\r\n                        newValue = keyValue;\r\n                    }else{\r\n                        newValue[i] = keyValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        caching.lastIndex = iterationIndex;\r\n        return newValue;\r\n    }\r\n\r\n    //based on @Toji's https://github.com/toji/gl-matrix/\r\n    function slerp(a, b, t) {\r\n        var out = [];\r\n        var ax = a[0], ay = a[1], az = a[2], aw = a[3],\r\n        bx = b[0], by = b[1], bz = b[2], bw = b[3]\r\n\r\n        var omega, cosom, sinom, scale0, scale1;\r\n\r\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n        if (cosom < 0.0) {\r\n            cosom = -cosom;\r\n            bx = -bx;\r\n            by = -by;\r\n            bz = -bz;\r\n            bw = -bw;\r\n        }\r\n        if ((1.0 - cosom) > 0.000001) {\r\n            omega = Math.acos(cosom);\r\n            sinom = Math.sin(omega);\r\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n            scale1 = Math.sin(t * omega) / sinom;\r\n        } else {\r\n            scale0 = 1.0 - t;\r\n            scale1 = t;\r\n        }\r\n        out[0] = scale0 * ax + scale1 * bx;\r\n        out[1] = scale0 * ay + scale1 * by;\r\n        out[2] = scale0 * az + scale1 * bz;\r\n        out[3] = scale0 * aw + scale1 * bw;\r\n\r\n        return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n        var qx = quat[0];\r\n        var qy = quat[1];\r\n        var qz = quat[2];\r\n        var qw = quat[3];\r\n        var heading = Math.atan2(2*qy*qw-2*qx*qz , 1 - 2*qy*qy - 2*qz*qz)\r\n        var attitude = Math.asin(2*qx*qy + 2*qz*qw) \r\n        var bank = Math.atan2(2*qx*qw-2*qy*qz , 1 - 2*qx*qx - 2*qz*qz);\r\n        out[0] = heading/degToRads;\r\n        out[1] = attitude/degToRads;\r\n        out[2] = bank/degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n        var heading = values[0] * degToRads;\r\n        var attitude = values[1] * degToRads;\r\n        var bank = values[2] * degToRads;\r\n        var c1 = Math.cos(heading / 2);\r\n        var c2 = Math.cos(attitude / 2);\r\n        var c3 = Math.cos(bank / 2);\r\n        var s1 = Math.sin(heading / 2);\r\n        var s2 = Math.sin(attitude / 2);\r\n        var s3 = Math.sin(bank / 2);\r\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n        return [x,y,z,w];\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            this._caching.lastIndex = this._caching.lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            var renderResult = this.interpolateValue(frameNum, this._caching);\r\n            this.pv = renderResult;\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function getNoValue(){\r\n        this._mdf = false;\r\n    }\r\n\r\n    function setVValue(val) {\r\n        var multipliedValue;\r\n        if(this.propType === 'unidimensional') {\r\n            multipliedValue = val * this.mult;\r\n            if(Math.abs(this.v - multipliedValue) > 0.00001) {\r\n                this.v = multipliedValue;\r\n                this._mdf = true;\r\n            }\r\n        } else {\r\n            var i = 0, len = this.v.length;\r\n            while (i < len) {\r\n                multipliedValue = val[i] * this.mult;\r\n                if (Math.abs(this.v[i] - multipliedValue) > 0.00001) {\r\n                    this.v[i] = multipliedValue;\r\n                    this._mdf = true;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if(this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n            return;\r\n        }        \r\n        if(this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = this._isFirstFrame;\r\n        var multipliedValue;\r\n        var i, len = this.effectsSequence.length;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this._isFirstFrame = false;\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container){\r\n        this.propType = 'unidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.effectsSequence = [];\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n        this.propType = 'multidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        var i, len = data.k.length;\r\n        this.v = createTypedArray('float32', len);\r\n        this.pv = createTypedArray('float32', len);\r\n        var arr = createTypedArray('float32', len);\r\n        this.vel = createTypedArray('float32', len);\r\n        for (i = 0; i < len; i += 1) {\r\n            this.v[i] = data.k[i] * this.mult;\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this._isFirstFrame = true;\r\n        this.effectsSequence = [];\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n        this.propType = 'unidimensional';\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.frameId = -1;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0, value: 0};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.v = initFrame;\r\n        this.pv = initFrame;\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container){\r\n        this.propType = 'multidimensional';\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for (i = 0; i < len - 1; i += 1) {\r\n            if (data.k[i].to && data.k[i].s && data.k[i].e) {\r\n                s = data.k[i].s;\r\n                e = data.k[i].e;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n                if(s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n                    if(s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n                        data.k[i].to = null;\r\n                        data.k[i].ti = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this._isFirstFrame = true;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        var arrLen = data.k[0].s.length;\r\n        this.v = createTypedArray('float32', arrLen);\r\n        this.pv = createTypedArray('float32', arrLen);\r\n        for (i = 0; i < arrLen; i += 1) {\r\n            this.v[i] = initFrame;\r\n            this.pv[i] = initFrame;\r\n        }\r\n        this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray('float32', arrLen)};\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem,data,type, mult, container) {\r\n        var p;\r\n        if(data.a === 0){\r\n            if(type === 0) {\r\n                p = new ValueProperty(elem,data,mult, container);\r\n            } else {\r\n                p = new MultiDimensionalProperty(elem,data, mult, container);\r\n            }\r\n        } else if(data.a === 1){\r\n            if(type === 0) {\r\n                p = new KeyframedValueProperty(elem,data,mult, container);\r\n            } else {\r\n                p = new KeyframedMultidimensionalProperty(elem,data, mult, container);\r\n            }\r\n        } else if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult, container);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult, container);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult, container);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult, container);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.effectsSequence.length){\r\n            container.addDynamicProperty(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var ob = {\r\n        getProp: getProp\r\n    };\r\n    return ob;\r\n}());\nvar TransformPropertyFactory = (function() {\r\n\r\n    function searchDynamicProperties() {\r\n        var i, len = this.dynamicProperties.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            this.dynamicProperties[i].getValue();\r\n            if (this.dynamicProperties[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    function applyToMatrix(mat) {\r\n        this.searchDynamicProperties();\r\n        if (this.a) {\r\n            mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n        if (this.s) {\r\n            mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n        if (this.sk) {\r\n            mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n        if (this.r) {\r\n            mat.rotate(-this.r.v);\r\n        } else {\r\n            mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n        if (this.data.p.s) {\r\n            if (this.data.p.z) {\r\n                mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n            } else {\r\n                mat.translate(this.px.v, this.py.v, 0);\r\n            }\r\n        } else {\r\n            mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n    }\r\n    function processKeys(forceRender){\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n\r\n        this._mdf = false;\r\n        this.searchDynamicProperties();\r\n\r\n        if (this._mdf || forceRender) {\r\n            this.v.reset();\r\n            if (this.a) {\r\n                this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if(this.s) {\r\n                this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.sk) {\r\n                this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n            }\r\n            if (this.r) {\r\n                this.v.rotate(-this.r.v);\r\n            } else {\r\n                this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.autoOriented && this.p.keyframes && this.p.getValueAtTime) {\r\n                var v1,v2;\r\n                if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                    v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / this.elem.globalData.frameRate,0);\r\n                    v2 = this.p.getValueAtTime(this.p.keyframes[0].t / this.elem.globalData.frameRate, 0);\r\n                } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                    v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / this.elem.globalData.frameRate), 0);\r\n                    v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.01) / this.elem.globalData.frameRate, 0);\r\n                } else {\r\n                    v1 = this.p.pv;\r\n                    v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / this.elem.globalData.frameRate, this.p.offsetTime);\r\n                }\r\n                this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n            }\r\n            if(this.data.p.s){\r\n                if(this.data.p.z) {\r\n                    this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    this.v.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            }else{\r\n                this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function setInverted(){\r\n        this.inverted = true;\r\n        this.iv = new Matrix();\r\n        if(!this.k){\r\n            if(this.data.p.s){\r\n                this.iv.translate(this.px.v,this.py.v,-this.pz.v);\r\n            }else{\r\n                this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n            if(this.r){\r\n                this.iv.rotate(-this.r.v);\r\n            }else{\r\n                this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n            }\r\n            if(this.s){\r\n                this.iv.scale(this.s.v[0],this.s.v[1],1);\r\n            }\r\n            if(this.a){\r\n                this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);\r\n            }\r\n        }\r\n    }\r\n\r\n    function autoOrient(){\r\n        //\r\n        //var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function TransformProperty(elem,data,container){\r\n        this.elem = elem;\r\n        this.frameId = -1;\r\n        this.propType = 'transform';\r\n        this.container = container || elem;\r\n        this.dynamicProperties = [];\r\n        this._mdf = false;\r\n        this.data = data;\r\n        this.v = new Matrix();\r\n        if(data.p.s){\r\n            this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this);\r\n            this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this);\r\n            if(data.p.z){\r\n                this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this);\r\n            }\r\n        }else{\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n        }\r\n        if(data.r) {\r\n            this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n        } else if(data.rx) {\r\n            this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n            this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n            this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n            if(data.or.k[0].ti) {\r\n                var i, len = data.or.k.length;\r\n                for(i=0;i<len;i+=1) {\r\n                    data.or.k[i].to = data.or.k[i].ti = null;\r\n                }\r\n            }\r\n            this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n            //sh Indicates it needs to be capped between -180 and 180\r\n            this.or.sh = true;\r\n        }\r\n        if(data.sk){\r\n            this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n            this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n        }\r\n        if(data.a) {\r\n            this.a = PropertyFactory.getProp(elem,data.a,1,0,this);\r\n        }\r\n        if(data.s) {\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0.01,this);\r\n        }\r\n        // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n        if(data.o){\r\n            this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n        } else {\r\n            this.o = {_mdf:false,v:1};\r\n        }\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue(true);\r\n        }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n        applyToMatrix: applyToMatrix,\r\n        searchDynamicProperties: searchDynamicProperties,\r\n        getValue: processKeys,\r\n        setInverted: setInverted,\r\n        autoOrient: autoOrient,\r\n        addDynamicProperty: addDynamicProperty\r\n    }\r\n\r\n    function getTransformProperty(elem,data,container){\r\n        return new TransformProperty(elem,data,container);\r\n    }\r\n\r\n    return {\r\n        getTransformProperty: getTransformProperty\r\n    };\r\n\r\n}());\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = createSizedArray(this._maxLength);\r\n\tthis.o = createSizedArray(this._maxLength);\r\n\tthis.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newElement();\r\n\t\tthis.o[i] = point_pool.newElement();\r\n\t\tthis.i[i] = point_pool.newElement();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(createSizedArray(this._maxLength));\r\n\tthis.i = this.i.concat(createSizedArray(this._maxLength));\r\n\tthis.o = this.o.concat(createSizedArray(this._maxLength));\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newElement();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function() {\r\n\tvar newPath = new ShapePath();\r\n\tnewPath.setPathData(this.c, this._length);\r\n\tvar vertices = this.v, outPoints = this.o, inPoints = this.i;\r\n\tvar init = 0;\r\n\tif (this.c) {\r\n\t\tnewPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n        init = 1;\r\n    }\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n\r\n    var i;\r\n    for (i = init; i < len; i += 1) {\r\n    \tnewPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n        cnt -= 1;\r\n    }\r\n    return newPath;\r\n};\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n        var iterationIndex = caching.lastIndex;\r\n        var keyPropS,keyPropE,isHold, j, k, jLen, kLen, perc, vertexValue;\r\n        if(frameNum < this.keyframes[0].t-this.offsetTime){\r\n            keyPropS = this.keyframes[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= this.keyframes[this.keyframes.length - 1].t-this.offsetTime){\r\n            if(this.keyframes[this.keyframes.length - 2].h === 1){\r\n                keyPropS = this.keyframes[this.keyframes.length - 1].s[0];\r\n            }else{\r\n                keyPropS = this.keyframes[this.keyframes.length - 2].e[0];\r\n            }\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = this.keyframes.length- 1,flag = true,keyData,nextKeyData;\r\n            while(flag){\r\n                keyData = this.keyframes[i];\r\n                nextKeyData = this.keyframes[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        caching.lastIndex = iterationIndex;\r\n\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                vertexValue = isHold ? keyPropS.i[j][k] :  keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                previousValue.i[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.o[j][k] :  keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                previousValue.o[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.v[j][k] :  keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                previousValue.v[j][k] = vertexValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        var lastFrame = this._caching.lastFrame;\r\n        if(!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            this.interpolateShape(frameNum, this.pv, this._caching);\r\n            ////\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function getShapeValue(){\r\n        return this.v;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if(this.lock || this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this._mdf = false;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        var i, len = this.effectsSequence.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        if(!shapesEqual(this.v, finalValue)) {\r\n            this.v = shape_pool.clone(finalValue);\r\n            this.localShapeCollection.releaseShapes();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this._mdf = true;\r\n            this.paths = this.localShapeCollection;\r\n        }\r\n        this.lock = false;\r\n    };\r\n\r\n    function ShapeProperty(elem, data, type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.container = elem;\r\n        this.elem = elem;\r\n        this.data = data;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this._mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n        this.effectsSequence = [getShapeValue.bind(this)];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var i, len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newElement();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0};\r\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this.elem = elem;\r\n            this.container = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this._mdf = false;\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertEllToPath();\r\n            }\r\n        };\r\n\r\n        EllShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function (frameNum){\r\n                var i, len = this.dynamicProperties.length;\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this._mdf = false;\r\n                this.frameId = this.elem.globalData.frameId;\r\n\r\n                for(i=0;i<len;i+=1){\r\n                    this.dynamicProperties[i].getValue(frameNum);\r\n                    if(this.dynamicProperties[i]._mdf){\r\n                        this._mdf = true;\r\n                    }\r\n                }\r\n                if(this._mdf){\r\n                    this.convertEllToPath();\r\n                }\r\n            },\r\n            addDynamicProperty: addDynamicProperty,\r\n            convertEllToPath: function() {\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n                var _cw = this.d !== 3;\r\n                var _v = this.v;\r\n                _v.v[0][0] = p0;\r\n                _v.v[0][1] = p1 - s1;\r\n                _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.v[1][1] = p1;\r\n                _v.v[2][0] = p0;\r\n                _v.v[2][1] = p1 + s1;\r\n                _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.v[3][1] = p1;\r\n                _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.i[0][1] = p1 - s1;\r\n                _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.i[1][1] = p1 - s1 * cPoint;\r\n                _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.i[2][1] = p1 + s1;\r\n                _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.i[3][1] = p1 + s1 * cPoint;\r\n                _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.o[0][1] = p1 - s1;\r\n                _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.o[1][1] = p1 + s1 * cPoint;\r\n                _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.o[2][1] = p1 + s1;\r\n                _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.o[3][1] = p1 - s1 * cPoint;\r\n            }\r\n        }\r\n\r\n        return EllShapeProperty;\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function StarShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: [],\r\n                i: [],\r\n                o: [],\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.container = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this._mdf = false;\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this);\r\n                this.convertToPath = this.convertStarToPath;\r\n            } else {\r\n                this.convertToPath = this.convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertToPath();\r\n            }\r\n        };\r\n\r\n        StarShapeProperty.prototype = {\r\n            addDynamicProperty: addDynamicProperty,\r\n            reset: resetShape,\r\n            getValue: function() {\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this._mdf = false;\r\n                this.frameId = this.elem.globalData.frameId;\r\n                var i, len = this.dynamicProperties.length;\r\n\r\n                for(i=0;i<len;i+=1){\r\n                    this.dynamicProperties[i].getValue();\r\n                    if(this.dynamicProperties[i]._mdf){\r\n                        this._mdf = true;\r\n                    }\r\n                }\r\n                if(this._mdf){\r\n                    this.convertToPath();\r\n                }\r\n            },\r\n            convertStarToPath: function() {\r\n                var numPts = Math.floor(this.pt.v)*2;\r\n                var angle = Math.PI*2/numPts;\r\n                /*this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts;*/\r\n                var longFlag = true;\r\n                var longRad = this.or.v;\r\n                var shortRad = this.ir.v;\r\n                var longRound = this.os.v;\r\n                var shortRound = this.is.v;\r\n                var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n                var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n                var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n                currentAng += this.r.v;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    rad = longFlag ? longRad : shortRad;\r\n                    roundness = longFlag ? longRound : shortRound;\r\n                    perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                    /*this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts;*/\r\n                    longFlag = !longFlag;\r\n                    currentAng += angle*dir;\r\n                }\r\n            },\r\n            convertPolygonToPath: function() {\r\n                var numPts = Math.floor(this.pt.v);\r\n                var angle = Math.PI*2/numPts;\r\n                var rad = this.or.v;\r\n                var roundness = this.os.v;\r\n                var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n                var i, currentAng = -Math.PI/ 2;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                currentAng += this.r.v;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                    currentAng += angle*dir;\r\n                }\r\n                this.paths.length = 0;\r\n                this.paths[0] = this.v;\r\n            }\r\n\r\n        }\r\n\r\n        return StarShapeProperty;\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n\r\n         function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.container = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.dynamicProperties = [];\r\n            this._mdf = false;\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.convertRectToPath();\r\n            }\r\n        };\r\n\r\n        RectShapeProperty.prototype = {\r\n            convertRectToPath: function (){\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n                var round = bm_min(v0,v1,this.r.v);\r\n                var cPoint = round*(1-roundCorner);\r\n                this.v._length = 0;\r\n\r\n                if(this.d === 2 || this.d === 1) {\r\n                    this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                    this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                    }\r\n                }else{\r\n                    this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                    }\r\n                }\r\n            },\r\n            getValue: function(frameNum){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this._mdf = false;\r\n                this.frameId = this.elem.globalData.frameId;\r\n                var i, len = this.dynamicProperties.length;\r\n\r\n                for(i=0;i<len;i+=1){\r\n                    this.dynamicProperties[i].getValue(frameNum);\r\n                    if(this.dynamicProperties[i]._mdf){\r\n                        this._mdf = true;\r\n                    }\r\n                }\r\n                if(this._mdf){\r\n                    this.convertRectToPath();\r\n                }\r\n\r\n            },\r\n            addDynamicProperty: addDynamicProperty,\r\n            reset: resetShape\r\n        }\r\n\r\n        return RectShapeProperty;\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(dataProp.a === 1 || keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data){\r\n        return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if(!this.closed){\r\n        var shapeData = {shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()};\r\n        this.shapes.push(shapeData);\r\n        this.addShapeToModifier(shapeData);\r\n    }\r\n};\r\nShapeModifier.prototype.init = function(elem,data){\r\n    this.dynamicProperties = [];\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.initModifierProperties(elem,data);\r\n    this.frameId = initialDefaultFrame;\r\n    this._mdf = false;\r\n    this.closed = false;\r\n    this.k = false;\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\nShapeModifier.prototype.processKeys = function(){\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this._mdf = false;\r\n    var i, len = this.dynamicProperties.length;\r\n\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        if(this.dynamicProperties[i]._mdf){\r\n            this._mdf = true;\r\n        }\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n};\r\n\r\nShapeModifier.prototype.addDynamicProperty = addDynamicProperty;\nfunction TrimModifier(){\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function(elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function(shapeData){\r\n    shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n    if (e <= 1) {\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        });\r\n    } else if (s >= 1) {\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        });\r\n    } else {\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        });\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        });\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for (i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) {\r\n            \r\n        } else {\r\n            var shapeS, shapeE;\r\n            if (segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if (!shapeSegments.length) {\r\n        shapeSegments.push([0, 0]);\r\n    }\r\n    return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function(pathsData) {\r\n    var i, len = pathsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        segments_length_pool.release(pathsData[i]);\r\n    }\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var s, e;\r\n    if (this._mdf || _isFirstFrame) {\r\n        var o = (this.o.v % 360) / 360;\r\n        if (o < 0) {\r\n            o += 1;\r\n        }\r\n        s = this.s.v + o;\r\n        e = this.e.v + o;\r\n        if (s === e) {\r\n\r\n        }\r\n        if (s > e) {\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n    } else {\r\n        s = this.sValue;\r\n        e = this.eValue;\r\n    }\r\n    var shapePaths;\r\n    var i, len = this.shapes.length, j, jLen;\r\n    var pathsData, pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape._mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if (!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for (i = 0; i < len; i += 1) {\r\n            shapeData = this.shapes[i];\r\n            // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n            if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = this.releasePathsData(shapeData.pathsData);\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape._mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0, edges;\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape._mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n                if (this.m === 2 && len > 1) {\r\n                    edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]];\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if (shapeE <= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        });\r\n                    } else if (shapeS >= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    } else {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        });\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        if (segments.length > 1) {\r\n                            if (shapeData.shape.v.c) {\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if (this._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].shape._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function(pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function(points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if (!shapePath) {\r\n        shapePath = shape_pool.newElement();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for (i = 0; i < len; i += 1) {\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for (j = 1; j < jLen; j +=1) {\r\n            currentLengthData = lengths[j-1];\r\n            if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e) {\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if (shapePaths[i].c) {\r\n            currentLengthData = lengths[j - 1];\r\n            if (addedLength <= shapeSegment.e) {\r\n                var segmentLength = lengths[j - 1].addedLength;\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if (shapePath._length) {\r\n            shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1],'o', shapePath._length - 1);\r\n        }\r\n        if (addedLength > shapeSegment.e) {\r\n            break;\r\n        }\r\n        if (i < len - 1) {\r\n            shapePath = shape_pool.newElement();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n};\r\n\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\nfunction RoundCornersModifier(){}\r\nextendPrototype([ShapeModifier],RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this);\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newElement();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, newV,newO,newI,distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function(_isFirstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape._mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this._mdf = false;\r\n    }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\nfunction RepeaterModifier(){}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem,data.tr,this);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.dynamicProperties = [];\r\n    this.frameId = -1;\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    var cont = 0;\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n        cont += 1;\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var i, len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len ; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var items, itemsTransform, i, dir, cont;\r\n    if(this._mdf || _isFirstFrame){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                };\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":0,\"ix\":6,\"k\":0},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        cont = 0;\r\n        var renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var k;\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        var j, jLen;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            jLen = itemsTransform.length;\r\n            items[items.length - 1].transform.mProps._mdf = true;\r\n            items[items.length - 1].transform.op._mdf = true;\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                \r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    } else {\r\n        cont = this._currentCopies;\r\n        i = 0;\r\n        dir = 1;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            items[items.length - 1].transform.mProps._mdf = false;\r\n            items[items.length - 1].transform.op._mdf = false;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function(){};\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\nfunction DashProperty(elem, data, renderer) {\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this._mdf = false;\r\n    this.k = false;\r\n    this.dynamicProperties = [];\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32',  data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32',  1);\r\n    var i, len = data.length || 0, prop;\r\n    for(i = 0; i < len; i += 1) {\r\n        prop = PropertyFactory.getProp(elem,data[i].v,0, 0, this);\r\n        this.k = prop.k ? true : this.k;\r\n        this.dataProps[i] = {n:data[i].n,p:prop};\r\n    }\r\n    if(!this.k){\r\n        this.getValue(true);\r\n    }\r\n}\r\n\r\nDashProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n\r\nDashProperty.prototype.getValue = function(forceRender) {\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    var i = 0, len = this.dataProps.length;\r\n    this._mdf = forceRender;\r\n    this.frameId = this.elem.globalData.frameId;\r\n    while(i<len){\r\n        this.dataProps[i].p.getValue();\r\n        if(this.dataProps[i].p._mdf){\r\n            this._mdf = true;\r\n        }\r\n        i+=1;\r\n    }\r\n    if (this._mdf) {\r\n        if(this.renderer === 'svg') {\r\n            this.dashStr = '';\r\n        }\r\n        for(i=0;i<len;i+=1){\r\n            if(this.dataProps[i].n != 'o'){\r\n                if(this.renderer === 'svg') {\r\n                    this.dashStr += ' ' + this.dataProps[i].p.v;\r\n                }else{\r\n                    this.dashArray[i] = this.dataProps[i].p.v;\r\n                }\r\n            }else{\r\n                this.dashoffset[0] = this.dataProps[i].p.v;\r\n            }\r\n        }\r\n    }\r\n};\nfunction GradientProperty(elem,data){\r\n    this.container = elem;\r\n    this.prop = PropertyFactory.getProp(elem,data.k,1,null,this);\r\n    this.data = data;\r\n    this.k = this.prop.k;\r\n    this.c = createTypedArray('uint8c', data.p*4);\r\n    var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this._mdf = false;\r\n    this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.addDynamicProperty = function(prop) {\r\n    this.container.addDynamicProperty(this);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function(values, points) {\r\n    var i = 0, len = this.o.length/2, diff;\r\n    while(i < len) {\r\n        diff = Math.abs(values[i*4] - values[points*4 + i*2]);\r\n        if(diff > 0.01){\r\n            return false;\r\n        }\r\n        i += 1;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function() {\r\n    if (this.o.length/2 !== this.c.length/4) {\r\n        return false;\r\n    }\r\n    if (this.data.k.k[0].s) {\r\n        var i = 0, len = this.data.k.k.length;\r\n        while (i < len) {\r\n            if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n                return false;\r\n            }\r\n            i += 1;\r\n        }\r\n    } else if(!this.comparePoints(this.data.k.k, this.data.p)) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function(forceRender){\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    if(this.prop._mdf || forceRender){\r\n        var i, len = this.data.p*4;\r\n        var mult, val;\r\n        for(i=0;i<len;i+=1){\r\n            mult = i%4 === 0 ? 100 : 255;\r\n            val = Math.round(this.prop.v[i]*mult);\r\n            if(this.c[i] !== val){\r\n                this.c[i] = val;\r\n                this._cmdf = !forceRender;\r\n            }\r\n        }\r\n        if(this.o.length){\r\n            len = this.prop.v.length;\r\n            for(i=this.data.p*4;i<len;i+=1){\r\n                mult = i%2 === 0 ? 100 : 1;\r\n                val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                if(this.o[i-this.data.p*4] !== val){\r\n                    this.o[i-this.data.p*4] = val;\r\n                    this._omdf = !forceRender;\r\n                }\r\n            }\r\n        }\r\n        this._mdf = !forceRender;\r\n    }\r\n};\nvar ImagePreloader = (function(){\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(this.imagesLoadedCb) {\r\n                this.imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData){\r\n        var path = '';\r\n        if(this.assetsPath){\r\n            var imagePath = assetData.p;\r\n            if(imagePath.indexOf('images/') !== -1){\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = this.assetsPath + imagePath;\r\n        } else {\r\n            path = this.path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function loadImage(path){\r\n        var img = createTag('img');\r\n        img.addEventListener('load', imageLoaded.bind(this), false);\r\n        img.addEventListener('error', imageLoaded.bind(this), false);\r\n        img.src = path;\r\n    }\r\n    function loadAssets(assets, cb){\r\n        this.imagesLoadedCb = cb;\r\n        this.totalAssets = assets.length;\r\n        var i;\r\n        for(i=0;i<this.totalAssets;i+=1){\r\n            if(!assets[i].layers){\r\n                loadImage.bind(this)(getAssetsPath.bind(this)(assets[i]));\r\n                this.totalImages += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    function destroy() {\r\n        this.imagesLoadedCb = null;\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.destroy = destroy;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalAssets = 0;\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n        this.imagesLoadedCb = null;\r\n    };\r\n}());\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t};\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = createNS('filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this._mdf = false;\r\n    this._isFirstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis.dynamicProperties = [];\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n    this._elem = elem;\r\n\tthis.container = elem;\r\n\tthis._animatorsData = createSizedArray(this._textData.a.length);\r\n\tthis._pathData = {};\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(){\r\n    var i, len = this._textData.a.length, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n        return;\r\n    }\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l, pathInfo, currentLength, currentPoint, segmentLength, flag, pointInd, segmentInd, prevPoint, points, segments, partialLength, totalLength, perc, tanAngle, mask;\r\n    if(this._hasMaskedPath) {\r\n        mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData._mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = paths.reverse();\r\n            }\r\n            // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n            pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var pathData;\r\n            totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[i + 1],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                pathData = {\r\n                    s: paths.v[i],\r\n                    e: paths.v[0],\r\n                    to: [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n                    ti: [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]\r\n                };\r\n                bez.buildBezierData(pathData);\r\n                pathInfo.tLength += pathData.bezierData.segmentLength;\r\n                pathInfo.segments.push(pathData);\r\n                totalLength += pathData.bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        pathInfo = this._pathData.pi;\r\n\r\n        currentLength = this._pathData.f.v;\r\n        segmentInd = 0;\r\n        pointInd = 1;\r\n        segmentLength = 0;\r\n        flag = true;\r\n        segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].bezierData.points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].bezierData.points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].bezierData.points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n    var lastLetter;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw, letterSc, letterFc, letterM = '', letterP = this.defaultPropsArray, letterO;\r\n\r\n    //\r\n    if(documentData.j === 2 || documentData.j === 1) {\r\n        var animatorJustifyOffset = 0;\r\n        var animatorFirstCharOffset = 0;\r\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n        var lastIndex = 0;\r\n        var isNewLine = true;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            if (letters[i].n) {\r\n                if(animatorJustifyOffset) {\r\n                    animatorJustifyOffset += animatorFirstCharOffset;\r\n                }\r\n                while (lastIndex < i) {\r\n                    letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n                    lastIndex += 1;\r\n                }\r\n                animatorJustifyOffset = 0;\r\n                isNewLine = true;\r\n            } else {\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.t.propType) {\r\n                        if (isNewLine && documentData.j === 2) {\r\n                            animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n                        }\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n                        if (mult.length) {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult[0] * justifyOffsetMult;\r\n                        } else {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult * justifyOffsetMult;\r\n                        }\r\n                    }\r\n                }\r\n                isNewLine = false;\r\n            }\r\n        }\r\n        if(animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while(lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n        }\r\n    }\r\n    //\r\n\r\n    for( i = 0; i < len; i += 1) {\r\n\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].bezierData.points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.p.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if (animatorProps.a.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].bezierData.points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].bezierData.points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.t.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n                    if(xPos !== 0 || documentData.j !== 0) {\r\n                        if(this._hasMaskedPath) {\r\n                            if(mult.length) {\r\n                                currentLength += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                currentLength += animatorProps.t.v*mult;\r\n                            }\r\n                        }else{\r\n                            if(mult.length) {\r\n                                xPos += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                xPos += animatorProps.t.v*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.a.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.s.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if (animatorProps.sk.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.r.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.ry.propType) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.rx.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.o.propType) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0];\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if(animatorProps.fc.propType){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(animatorProps.fh.propType){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fs.propType){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fb.propType){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if (animatorProps.p.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.finalSize;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.finalSize;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n\tvar i, len = this.dynamicProperties.length;\r\n    this._mdf = false;\r\n\tfor(i = 0; i < len; i += 1) {\r\n\t\tthis.dynamicProperties[i].getValue();\r\n        this._mdf = this.dynamicProperties[i]._mdf || this._mdf;\r\n\t}\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n\tvar defaultData = {propType:false};\r\n\tvar getProp = PropertyFactory.getProp;\r\n\tvar textAnimator_animatables = animatorProps.a;\r\n\tthis.a = {\r\n\t\tr: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\r\n\t\trx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\r\n\t\try: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\r\n\t\tsk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\r\n\t\tsa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\r\n\t\ts: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\r\n\t\ta: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\r\n\t\to: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\r\n\t\tp: textAnimator_animatables.p ? getProp(elem,textAnimator_animatables.p, 1, 0, container) : defaultData,\r\n\t\tsw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\r\n\t\tsc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\r\n\t\tfc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\r\n\t\tfh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\r\n\t\tfs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\r\n\t\tfb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\r\n\t\tt: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\r\n\t};\r\n\r\n\tthis.s = TextSelectorProp.getTextSelectorProp(elem,animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n}\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis._mdf.o = false;\r\n\tthis._mdf.sw = false;\r\n\tthis._mdf.sc = false;\r\n\tthis._mdf.fc = false;\r\n\tthis._mdf.m = false;\r\n\tthis._mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis._mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis._mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis._mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis._mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis._mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis._mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n};\nfunction TextProperty(elem, data){\r\n\tthis._frameId = initialDefaultFrame;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis._isFirstFrame = true;\r\n\tthis._mdf = false;\r\n\tthis.data = data;\r\n\tthis.elem = elem;\r\n    this.comp = this.elem.comp;\r\n\tthis.keysIndex = -1;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: this.defaultBoxWidth,\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        sz:0,\r\n        ps:null,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        finalSize:0,\r\n        finalText:[],\r\n        finalLineHeight: 0,\r\n        __test: true\r\n\r\n\t};\r\n    this.copyFromDocumentData(this.data.d.k[0].s);\r\n    \r\n    if(!this.searchProperty()) {\r\n        this.completeTextData(this.currentData);\r\n        this.keysIndex = 0;\r\n    }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0,0];\r\n\r\nTextProperty.prototype.copyFromDocumentData = function(data) {\r\n    for(var s in data) {\r\n        this.currentData[s] = data[s];\r\n    }\r\n}\r\n\r\nTextProperty.prototype.setCurrentData = function(data, currentTextValue){\r\n        if(this.currentData !== data) {\r\n            if(!data.__complete) {\r\n                this.completeTextData(data);\r\n            }\r\n            this.copyFromDocumentData(data);\r\n            this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n            this.currentData.fillColorAnim = data.fillColorAnim || this.currentData.fillColorAnim;\r\n            this.currentData.strokeColorAnim = data.strokeColorAnim || this.currentData.strokeColorAnim;\r\n            this.currentData.strokeWidthAnim = data.strokeWidthAnim || this.currentData.strokeWidthAnim;\r\n            this._mdf = true;\r\n        } else if(currentTextValue !== this.currentData.t) {\r\n            this._mdf = true;\r\n            this.completeTextData(data);\r\n        }\r\n\t\t/*var currentData = this.currentData;\r\n        currentData.ascent = data.ascent;\r\n        currentData.boxWidth = data.boxWidth ? data.boxWidth : currentData.boxWidth;\r\n        currentData.f = data.f;\r\n        currentData.fStyle = data.fStyle;\r\n        currentData.fWeight = data.fWeight;\r\n        currentData.fc = data.fc;\r\n        currentData.j = data.j;\r\n        currentData.justifyOffset = data.justifyOffset;\r\n        currentData.l = data.l;\r\n        currentData.lh = data.lh;\r\n        currentData.lineWidths = data.lineWidths;\r\n        currentData.ls = data.ls;\r\n        currentData.of = data.of;\r\n        currentData.s = data.s;\r\n        currentData.sc = data.sc;\r\n        currentData.sw = data.sw;\r\n        currentData.sz = data.sz;\r\n        currentData.ps = data.ps;\r\n        currentData.t = data.t;\r\n        currentData.tr = data.tr;\r\n        currentData.fillColorAnim = data.fillColorAnim || currentData.fillColorAnim;\r\n        currentData.strokeColorAnim = data.strokeColorAnim || currentData.strokeColorAnim;\r\n        currentData.strokeWidthAnim = data.strokeWidthAnim || currentData.strokeWidthAnim;\r\n        currentData.yOffset = data.yOffset;\r\n        currentData.finalSize = data.finalSize;\r\n        currentData.finalLineHeight = data.finalLineHeight;\r\n        currentData.finalText = data.finalText;*/\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n    return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function() {\r\n    this.kf = this.data.d.k.length > 1;\r\n    if(this.kf) {\r\n        this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n    return this.kf;\r\n}\r\n\r\nTextProperty.prototype.addEffect = function(effectFunction) {\r\n\tthis.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function(_finalValue) {\r\n    if((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n        return;\r\n    }\r\n    var currentTextValue = this.currentData.t;        \r\n    if(this.lock) {\r\n        this.setCurrentData(this.currentData, currentTextValue);\r\n        return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var multipliedValue;\r\n    var i, len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.currentData;\r\n    for(i = 0; i < len; i += 1) {\r\n        finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setCurrentData(finalValue, currentTextValue);\r\n    this.pv = this.v = this.currentData;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n}\r\n\r\nTextProperty.prototype.getKeyframeValue = function(currentValue) {\r\n    var textKeys = this.data.d.k, textDocumentData;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameNum){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n        currentValue = textDocumentData;\r\n        this.keysIndex = i;\r\n    }\r\n    return currentValue;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function(text) {\r\n    var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n    var charactersArray = [];\r\n    var i = 0, len = text.length;\r\n    while (i < len) {\r\n        if (combinedCharacters.indexOf(text.charCodeAt(i)) !== -1) {\r\n            charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        } else {\r\n            charactersArray.push(text.charAt(i));\r\n        }\r\n        i += 1;\r\n    }\r\n    return charactersArray;\r\n}\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            break;\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fontData.fWeight || fWeight;\r\n    documentData.fStyle = fStyle;\r\n    len = documentData.t.length;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(documentData.sz){\r\n        var flag = true;\r\n        var boxWidth = documentData.sz[0];\r\n        var boxHeight = documentData.sz[1];\r\n        var currentHeight, finalText;\r\n        while(flag) {\r\n            finalText = this.buildFinalText(documentData.t);\r\n            currentHeight = 0;\r\n            lineWidth = 0;\r\n            len = finalText.length;\r\n            trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n            var lastSpaceIndex = -1;\r\n            for(i=0;i<len;i+=1){\r\n                newLineFlag = false;\r\n                if(finalText[i] === ' '){\r\n                    lastSpaceIndex = i;\r\n                }else if(finalText[i].charCodeAt(0) === 13){\r\n                    lineWidth = 0;\r\n                    newLineFlag = true;\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                }\r\n                if(fontManager.chars){\r\n                    charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n                    cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n                }else{\r\n                    //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                    cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n                }\r\n                if(lineWidth + cLength > boxWidth && finalText[i] !== ' '){\r\n                    if(lastSpaceIndex === -1){\r\n                        len += 1;\r\n                    } else {\r\n                        i = lastSpaceIndex;\r\n                    }\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                    finalText.splice(i, lastSpaceIndex === i ? 1 : 0,\"\\r\");\r\n                    //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                    lastSpaceIndex = -1;\r\n                    lineWidth = 0;\r\n                }else {\r\n                    lineWidth += cLength;\r\n                    lineWidth += trackingOffset;\r\n                }\r\n            }\r\n            currentHeight += fontData.ascent*documentData.finalSize/100;\r\n            if(this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n                documentData.finalSize -= 1;\r\n                documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n            } else {\r\n                documentData.finalText = finalText;\r\n                len = documentData.finalText.length;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.finalText[i];\r\n        if(currentChar === ' '){\r\n            val = '\\u00A0';\r\n        }else if(currentChar.charCodeAt(0) === 13){\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.finalText[i];\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n            //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine, animatorJustifyOffset: 0});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val === '' || val === '\\u00A0' || i === len - 1){\r\n                if(val === '' || val === '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val === '' || i === len - 1){\r\n                if(val === ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.finalSize/100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined \r\n    ? this.keysIndex === -1 \r\n        ? 0 \r\n        : this.keysIndex \r\n    : index;\r\n    var dData = this.data.d.k[index].s;\r\n    for(var s in newData) {\r\n        dData[s] = newData[s];\r\n    }\r\n    this.recalculate(index);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function(index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = this.kf ? -1 : 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n}\r\n\r\nTextProperty.prototype.canResizeFont = function(_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function(_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n};\r\n\nvar TextSelectorProp = (function(){\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorProp(elem,data){\r\n        this._mdf = false;\r\n        this._currentTextLength = -1;\r\n        this.k = false;\r\n        this.data = data;\r\n        this.dynamicProperties = [];\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.comp = elem.comp;\r\n        this.finalS = 0;\r\n        this.finalE = 0;\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this);\r\n        if('e' in data){\r\n            this.e = PropertyFactory.getProp(elem,data.e,0,0,this);\r\n        }else{\r\n            this.e = {v:100};\r\n        }\r\n        this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this);\r\n        this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this);\r\n        this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this);\r\n        this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this);\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue();\r\n        }\r\n    }\r\n\r\n    TextSelectorProp.prototype = {\r\n        addDynamicProperty: addDynamicProperty,\r\n        getMult: function(ind) {\r\n            if(this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n                this.getValue();\r\n            }\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var easer = BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if(type == 2){\r\n                if(e === s){\r\n                    mult = ind >= e ? 1 : 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 3){\r\n                if(e === s){\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            }else if(type == 4){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                    if(mult<0.5){\r\n                        mult *= 2;\r\n                    }else{\r\n                        mult = 1 - 2*(mult-0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 5){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x*x)/(a*a));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 6){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind)/(e-s)))))/2;\r\n                    /*\r\n                     ind = Math.min(Math.max(s,ind),e-1);\r\n                     mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n                     mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\r\n                }\r\n                mult = easer(mult);\r\n            }else {\r\n                if(ind >= floor(s)){\r\n                    if(ind-s < 0){\r\n                        mult = 1 - (s - ind);\r\n                    }else{\r\n                        mult = max(0,min(e-ind,1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        },\r\n        getValue: function(newCharsFlag) {\r\n            this._mdf = newCharsFlag || false;\r\n            if(this.dynamicProperties.length){\r\n                var i, len = this.dynamicProperties.length;\r\n                for(i=0;i<len;i+=1){\r\n                    this.dynamicProperties[i].getValue();\r\n                    if(this.dynamicProperties[i]._mdf){\r\n                        this._mdf = true;\r\n                    }\r\n                }\r\n            }\r\n            this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = this._currentTextLength;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / this._currentTextLength;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n    }\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n        getTextSelectorProp: getTextSelectorProp\r\n    };\r\n}());\r\n\r\n    \nvar pool_factory = (function() {\r\n\treturn function(initialLength, _create, _release, _clone) {\r\n\r\n\t\tvar _length = 0;\r\n\t\tvar _maxLength = initialLength;\r\n\t\tvar pool = createSizedArray(_maxLength);\r\n\r\n\t\tvar ob = {\r\n\t\t\tnewElement: newElement,\r\n\t\t\trelease: release\r\n\t\t};\r\n\r\n\t\tfunction newElement(){\r\n\t\t\tvar element;\r\n\t\t\tif(_length){\r\n\t\t\t\t_length -= 1;\r\n\t\t\t\telement = pool[_length];\r\n\t\t\t} else {\r\n\t\t\t\telement = _create();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\tfunction release(element) {\r\n\t\t\tif(_length === _maxLength) {\r\n\t\t\t\tpool = pooling.double(pool);\r\n\t\t\t\t_maxLength = _maxLength*2;\r\n\t\t\t}\r\n\t\t\tif (_release) {\r\n\t\t\t\t_release(element);\r\n\t\t\t}\r\n\t\t\tpool[_length] = element;\r\n\t\t\t_length += 1;\r\n\t\t}\r\n\r\n\t\tfunction clone() {\r\n\t\t\tvar clonedElement = newElement();\r\n\t\t\treturn _clone(clonedElement);\r\n\t\t}\r\n\r\n\t\treturn ob;\r\n\t};\r\n}());\r\n\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(createSizedArray(arr.length));\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t};\r\n}());\nvar point_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn createTypedArray('float32', 2);\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\nvar shape_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn new ShapePath();\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t}\r\n\r\n\tfunction clone(shape) {\r\n\t\tvar cloned = factory.newElement();\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\t\tvar pt;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t}\r\n\t\treturn cloned;\r\n\t}\r\n\r\n\tvar factory = pool_factory(4, create, release);\r\n\tfactory.clone = clone;\r\n\r\n\treturn factory;\r\n}());\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release\r\n\t};\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = createSizedArray(_maxLength);\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\nvar segments_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n\t\t\tlengths: [],\r\n\t\t\ttotalLength: 0\r\n\t\t};\r\n\t}\r\n\r\n\tfunction release(element) {\r\n\t\tvar i, len = element.lengths.length;\r\n\t\tfor(i=0;i<len;i+=1) {\r\n\t\t\tbezier_length_pool.release(element.lengths[i]);\r\n\t\t}\r\n\t\telement.lengths.length = 0;\r\n\t}\r\n\r\n\treturn pool_factory(8, create, release);\r\n}());\nvar bezier_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n            addedLength: 0,\r\n            percents: createTypedArray('float32', defaultCurveSegments),\r\n            lengths: createTypedArray('float32', defaultCurveSegments),\r\n        };\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 3:\r\n            return this.createNull(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n    }\r\n    return this.createNull(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while (i < len) {\r\n        if (layers[i].ind == parentName) {\r\n            if (!elements[i] || elements[i] === true) {\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i].setAsParent();\r\n                if(layers[i].parent !== undefined) {\r\n                    this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n                } else {\r\n                    element.setHierarchy(hierarchy);\r\n                }\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i]);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    var defs = createNS( 'defs');\r\n    this.svgElement.appendChild(defs);\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        viewBoxSize: (config && config.viewBoxSize) || false,\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        defs: defs,\r\n        frameId: 0,\r\n        compSize: {w:0,h:0},\r\n        renderConfig: this.renderConfig,\r\n        fontManager: new FontManager()\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n    return new NullElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.svgElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    if(this.renderConfig.viewBoxSize) {\r\n        this.svgElement.setAttribute('viewBox',this.renderConfig.viewBoxSize);\r\n    } else {\r\n        this.svgElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    }\r\n\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.svgElement.setAttribute('width',animData.w);\r\n        this.svgElement.setAttribute('height',animData.h);\r\n        this.svgElement.style.width = '100%';\r\n        this.svgElement.style.height = '100%';\r\n    }\r\n    if(this.renderConfig.className) {\r\n        this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    this.svgElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.svgElement);\r\n    //Mask animation\r\n    var defs = this.globalData.defs;\r\n\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize.w = animData.w;\r\n    this.globalData.compSize.h = animData.h;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.data = animData;\r\n\r\n    var maskElement = createNS( 'clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = 'animationMask_'+randomString(10);\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,defs);\r\n    this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame === num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\nfunction MaskElement(data,element,globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    this._isFirstFrame = true;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = randomString(10);\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0){\r\n            rect = createNS( 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w);\r\n            rect.setAttribute('height', this.element.comp.data.h);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = createNS( 'path');\r\n        if(properties[i].mode == 'n') {\r\n            // TODO move this to a factory or to a constructor\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n                elem: path\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        path.setAttribute('clip-rule','nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);\r\n            filterID = 'fi_'+randomString(10);\r\n            expansor = createNS('filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = createNS('feMorphology');\r\n            feMorph.setAttribute('operator','dilate');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            path.setAttribute('stroke', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        } else {\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n        // TODO move this to a factory or to a constructor\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = createNS('g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = createNS('mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n            invRect: rect\r\n        };\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = createNS( maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if(count > 0){\r\n        this.maskElement.setAttribute('id', layerId);\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n        defs.appendChild(this.maskElement);\r\n    }\r\n\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (finalMat) {\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop._mdf || this._isFirstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op._mdf || this._isFirstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || this._isFirstFrame)){\r\n                this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\r\n                this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x._mdf || this._isFirstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n    this._isFirstFrame = false;\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        var pathShapeValue = '';\r\n        if(viewData.elem){\r\n            if(pathNodes.c){\r\n                pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n            }\r\n            viewData.elem.setAttribute('d',pathShapeValue);\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\n/**\r\n * @file \r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement(){}\r\n\r\nHierarchyElement.prototype = {\r\n\t/**\r\n     * @function \r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n\tinitHierarchy: function() {\r\n\t\t//element's parent list\r\n\t    this.hierarchy = [];\r\n\t    //if element is parent of another layer _isParent will be true\r\n\t    this._isParent = false;\r\n\t    this.checkParenting();\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */ \r\n\tsetHierarchy: function(hierarchy){\r\n\t    this.hierarchy = hierarchy;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer as parent.\r\n     *\r\n     */ \r\n\tsetAsParent: function() {\r\n\t    this._isParent = true;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Searches layer's parenting chain\r\n     *\r\n     */ \r\n\tcheckParenting: function(){\r\n\t    if (this.data.parent !== undefined){\r\n\t        this.comp.buildElementParenting(this, this.data.parent, []);\r\n\t    }\r\n\t}\r\n};\n/**\r\n * @file \r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement(){}\r\n\r\nFrameElement.prototype = {\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n    initFrame: function(){\r\n        //set to true when inpoint is rendered\r\n        this._isFirstFrame = false;\r\n        //list of animated properties\r\n        this.dynamicProperties = [];\r\n        // If layer has been modified in current tick this will be true\r\n        this._mdf = false;\r\n    },\r\n    /**\r\n     * @function \r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     * \r\n     */\r\n    prepareProperties: function(num, isVisible) {\r\n        var i, len = this.dynamicProperties.length;\r\n        for (i = 0;i < len; i += 1) {\r\n            if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i]._mdf) {\r\n                    this.globalData._mdf = true;\r\n                    this._mdf = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    addDynamicProperty: function(prop) {\r\n        if(this.dynamicProperties.indexOf(prop) === -1) {\r\n            this.dynamicProperties.push(prop);\r\n        }\r\n    }\r\n};\nfunction TransformElement(){}\r\n\r\nTransformElement.prototype = {\r\n    initTransform: function() {\r\n        this.finalTransform = {\r\n            mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {o:0},\r\n            _matMdf: false,\r\n            _opMdf: false,\r\n            mat: new Matrix()\r\n        };\r\n        if (this.data.ao) {\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n\r\n        //TODO: check TYPE 11: Guided elements\r\n        if (this.data.ty !== 11) {\r\n            //this.createElements();\r\n        }\r\n    },\r\n    renderTransform: function() {\r\n\r\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n        if (this.hierarchy) {\r\n            var mat;\r\n            var finalMat = this.finalTransform.mat;\r\n            var i = 0, len = this.hierarchy.length;\r\n            //Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n            if (!this.finalTransform._matMdf) {\r\n                while (i < len) {\r\n                    if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n                        this.finalTransform._matMdf = true;\r\n                        break;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            if (this.finalTransform._matMdf) {\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n                for (i = 0; i < len; i += 1) {\r\n                    mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                    finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    globalToLocal: function(pt) {\r\n        var transforms = [];\r\n        transforms.push(this.finalTransform);\r\n        var flag = true;\r\n        var comp = this.comp;\r\n        while (flag) {\r\n            if (comp.finalTransform) {\r\n                if (comp.data.hasMask) {\r\n                    transforms.splice(0, 0, comp.finalTransform);\r\n                }\r\n                comp = comp.comp;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        var i, len = transforms.length,ptNew;\r\n        for (i = 0; i < len; i += 1) {\r\n            ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n            //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n            pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n        }\r\n        return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n};\nfunction RenderableElement(){\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n    initRenderable: function() {\r\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n        this.isInRange = false;\r\n        //layer's display state\r\n        this.hidden = false;\r\n        // If layer's transparency equals 0, it can be hidden\r\n        this.isTransparent = false;\r\n    },\r\n    prepareRenderableFrame: function(num) {\r\n        this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function(){\r\n        if(this.finalTransform.mProp.o.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.isTransparent) {\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n    },\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * \r\n     */\r\n    checkLayerLimits: function(num) {\r\n        if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n        {\r\n            if(this.isInRange !== true){\r\n                this.globalData._mdf = true;\r\n                this._mdf = true;\r\n                this.isInRange = true;\r\n                this.show();\r\n            }\r\n        } else {\r\n            if(this.isInRange !== false){\r\n                this.globalData._mdf = true;\r\n                this.isInRange = false;\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n    renderRenderable: function() {\r\n        this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);\r\n    },\r\n    sourceRectAtTime: function(){\r\n        return {\r\n            top:0,\r\n            left:0,\r\n            width:100,\r\n            height:100\r\n        };\r\n    },\r\n    getLayerSize: function(){\r\n        if(this.data.ty === 5){\r\n            return {w:this.data.textData.width,h:this.data.textData.height};\r\n        }else{\r\n            return {w:this.data.width,h:this.data.height};\r\n        }\r\n    }\r\n};\nfunction RenderableDOMElement() {}\r\n\r\n(function(){\r\n    var _prototype = {\r\n        initElement: function(data,globalData,comp) {\r\n            this.initFrame();\r\n            this.initBaseData(data, globalData, comp);\r\n            this.initTransform(data, globalData, comp);\r\n            this.initHierarchy();\r\n            this.initRenderable();\r\n            this.initRendererElement();\r\n            this.createContainerElements();\r\n            this.addMasks();\r\n            this.createContent();\r\n            this.hide();\r\n        },\r\n        hide: function(){\r\n            if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n                var elem = this.baseElement || this.layerElement;\r\n                elem.style.display = 'none';\r\n                this.hidden = true;\r\n            }\r\n        },\r\n        show: function(){\r\n            if (this.isInRange && !this.isTransparent){\r\n                if (!this.data.hd) {\r\n                    var elem = this.baseElement || this.layerElement;\r\n                    elem.style.display = 'block';\r\n                }\r\n                this.hidden = false;\r\n                this._isFirstFrame = true;\r\n                this.maskManager._isFirstFrame = true;\r\n            }\r\n        },\r\n        renderFrame: function() {\r\n            //If it is exported as hidden (data.hd === true) no need to render\r\n            //If it is not visible no need to render\r\n            if (this.data.hd || this.hidden) {\r\n                return;\r\n            }\r\n            this.renderTransform();\r\n            this.renderRenderable();\r\n            this.renderElement();\r\n            this.renderInnerContent();\r\n            if (this._isFirstFrame) {\r\n                this._isFirstFrame = false;\r\n            }\r\n        },\r\n        renderInnerContent: function() {},\r\n        prepareFrame: function(num) {\r\n            this._mdf = false;\r\n            this.prepareRenderableFrame(num);\r\n            this.prepareProperties(num, this.isInRange);\r\n            this.checkTransparency();\r\n        },\r\n        destroy: function(){\r\n            this.innerElem =  null;\r\n            this.destroyBaseElement();\r\n        }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\nfunction ProcessedElement(element, position) {\r\n\tthis.elem = element;\r\n\tthis.pos = position;\r\n}\nfunction SVGStyleData(data, level) {\r\n\tthis.data = data;\r\n\tthis.type = data.ty;\r\n\tthis.d = '';\r\n\tthis.lvl = level;\r\n\tthis._mdf = false;\r\n\tthis.closed = false;\r\n\tthis.pElem = createNS('path');\r\n\tthis.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function() {\r\n\tthis.d = '';\r\n\tthis._mdf = false;\r\n};\nfunction SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level;\r\n}\nfunction SVGTransformData(mProps, op) {\r\n\tthis.transform = {\r\n\t\tmProps: mProps,\r\n\t\top: op\r\n\t};\r\n\tthis.elements = [];\r\n}\nfunction SVGStrokeStyleData(elem, data, styleOb){\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,elem);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',elem);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,elem);\r\n\tthis.style = styleOb;\r\n}\nfunction SVGFillStyleData(elem, data, styleOb){\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,elem);\r\n\tthis.style = styleOb;\r\n}\nfunction SVGGradientFillStyleData(elem, data, styleOb){\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function(elem, data, styleOb){\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n    this.s = PropertyFactory.getProp(elem,data.s,1,null,elem);\r\n    this.e = PropertyFactory.getProp(elem,data.e,1,null,elem);\r\n    this.h = PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,elem);\r\n    this.a = PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,elem);\r\n    this.g = new GradientProperty(elem,data.g,elem);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function(pathElement,data){\r\n\r\n    var gradientId = 'gr_'+randomString(10);\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = data.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = createNS('stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(#'+gradientId+')');\r\n    \r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function(data, styleOb){\r\n    if(this.g._hasOpacity && !this.g._collapsable){\r\n        var stop, j, jLen;\r\n        var mask = createNS(\"mask\");\r\n        var maskElement = createNS( 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = 'op_'+randomString(10);\r\n        var maskId = 'mk_'+randomString(10);\r\n        mask.setAttribute('id',maskId);\r\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n        var stops = this.stops;\r\n        for(j=data.g.p*4;j<jLen;j+=2){\r\n            stop = createNS('stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(#'+opacityId+')');\r\n        this.of = opFill;\r\n        this.ms = mask;\r\n        this.ost = stops;\r\n        this.maskId = maskId;\r\n        styleOb.msElem = maskElement;\r\n    }\r\n};\nfunction SVGGradientStrokeStyleData(elem, data, styleOb){\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,elem);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',elem);\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientStrokeStyleData.prototype.initGradientData = SVGGradientFillStyleData.prototype.initGradientData;\r\nSVGGradientStrokeStyleData.prototype.setGradientData = SVGGradientFillStyleData.prototype.setGradientData;\r\nSVGGradientStrokeStyleData.prototype.setGradientOpacity = SVGGradientFillStyleData.prototype.setGradientOpacity;\nfunction ShapeGroupData() {\r\n\tthis.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n}\nfunction BaseElement(){\r\n}\r\nBaseElement.prototype.checkMasks = function(){\r\n    if(!this.data.hasMask){\r\n        return false;\r\n    }\r\n    var i = 0, len = this.data.masksProperties.length;\r\n    while(i<len) {\r\n        if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n            return true;\r\n        }\r\n        i += 1;\r\n    }\r\n    return false;\r\n};\r\n\r\nBaseElement.prototype.initExpressions = function(){\r\n    this.layerInterface = LayerExpressionInterface(this);\r\n    if(this.data.hasMask && this.maskManager) {\r\n        this.layerInterface.registerMaskInterface(this.maskManager);\r\n    }\r\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n    this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n    if(this.data.ty === 0 || this.data.xt){\r\n        this.compInterface = CompExpressionInterface(this);\r\n    } else if(this.data.ty === 4){\r\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n        this.layerInterface.content = this.layerInterface.shapeInterface;\r\n    } else if(this.data.ty === 5){\r\n        this.layerInterface.textInterface = TextExpressionInterface(this);\r\n        this.layerInterface.text = this.layerInterface.textInterface;\r\n    }\r\n};\r\n\r\nBaseElement.prototype.blendModeEnums = {\r\n    1:'multiply',\r\n    2:'screen',\r\n    3:'overlay',\r\n    4:'darken',\r\n    5:'lighten',\r\n    6:'color-dodge',\r\n    7:'color-burn',\r\n    8:'hard-light',\r\n    9:'soft-light',\r\n    10:'difference',\r\n    11:'exclusion',\r\n    12:'hue',\r\n    13:'saturation',\r\n    14:'color',\r\n    15:'luminosity'\r\n};\r\n\r\nBaseElement.prototype.getBlendMode = function(){\r\n    return this.blendModeEnums[this.data.bm] || '';\r\n};\r\n\r\nBaseElement.prototype.setBlendMode = function(){\r\n    var blendModeValue = this.getBlendMode();\r\n    var elem = this.baseElement || this.layerElement;\r\n\r\n    elem.style['mix-blend-mode'] = blendModeValue;\r\n};\r\n\r\nBaseElement.prototype.initBaseData = function(data, globalData, comp){\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.layerId = 'ly_'+randomString(10);\r\n    \r\n    //Stretch factor for old animations missing this property.\r\n    if(!this.data.sr){\r\n        this.data.sr = 1;\r\n    }\r\n    // effects manager\r\n    this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties);\r\n    \r\n};\r\n\r\nBaseElement.prototype.getType = function(){\r\n    return this.type;\r\n};\r\n\nfunction NullElement(data,globalData,comp){\r\n    this.initFrame();\r\n\tthis.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function() {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function() {\r\n\treturn null;\r\n};\r\n\r\nNullElement.prototype.destroy = function() {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function() {\r\n};\r\n\r\nNullElement.prototype.hide = function() {\r\n};\r\n\r\nextendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement], NullElement);\r\n\nfunction SVGBaseElement(){\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n    initRendererElement: function() {\r\n        this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function(){\r\n        this.matteElement = createNS('g');\r\n        this.transformedElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n        this._sizeChanged = false;\r\n        var layerElementParent = null;\r\n        //If this layer acts as a mask for the following layer\r\n        var filId, fil, gg;\r\n        if (this.data.td) {\r\n            if (this.data.td == 3 || this.data.td == 1) {\r\n                var masker = createNS('mask');\r\n                masker.setAttribute('id', this.layerId);\r\n                masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\r\n                masker.appendChild(this.layerElement);\r\n                layerElementParent = masker;\r\n                this.globalData.defs.appendChild(masker);\r\n                // This is only for IE and Edge when mask if of type alpha\r\n                if (!featureSupport.maskType && this.data.td == 1) {\r\n                    masker.setAttribute('mask-type', 'luminance');\r\n                    filId = randomString(10);\r\n                    fil = filtersFactory.createFilter(filId);\r\n                    this.globalData.defs.appendChild(fil);\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    masker.appendChild(gg);\r\n                    gg.setAttribute('filter','url(' + locationHref + '#' + filId + ')');\r\n                }\r\n            } else if(this.data.td == 2) {\r\n                var maskGroup = createNS('mask');\r\n                maskGroup.setAttribute('id', this.layerId);\r\n                maskGroup.setAttribute('mask-type','alpha');\r\n                var maskGrouper = createNS('g');\r\n                maskGroup.appendChild(maskGrouper);\r\n                filId = randomString(10);\r\n                fil = filtersFactory.createFilter(filId);\r\n                ////\r\n\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix);\r\n\r\n                ////\r\n                /*var feCTr = createNS('feComponentTransfer');\r\n                feCTr.setAttribute('in','SourceGraphic');\r\n                fil.appendChild(feCTr);\r\n                var feFunc = createNS('feFuncA');\r\n                feFunc.setAttribute('type','table');\r\n                feFunc.setAttribute('tableValues','1.0 0.0');\r\n                feCTr.appendChild(feFunc);*/\r\n                this.globalData.defs.appendChild(fil);\r\n                var alphaRect = createNS('rect');\r\n                alphaRect.setAttribute('width',  this.comp.data.w);\r\n                alphaRect.setAttribute('height', this.comp.data.h);\r\n                alphaRect.setAttribute('x','0');\r\n                alphaRect.setAttribute('y','0');\r\n                alphaRect.setAttribute('fill','#ffffff');\r\n                alphaRect.setAttribute('opacity','0');\r\n                maskGrouper.setAttribute('filter', 'url(' + locationHref + '#'+filId+')');\r\n                maskGrouper.appendChild(alphaRect);\r\n                maskGrouper.appendChild(this.layerElement);\r\n                layerElementParent = maskGrouper;\r\n                if (!featureSupport.maskType) {\r\n                    maskGroup.setAttribute('mask-type', 'luminance');\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    maskGrouper.appendChild(alphaRect);\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    maskGrouper.appendChild(gg);\r\n                }\r\n                this.globalData.defs.appendChild(maskGroup);\r\n            }\r\n        } else if (this.data.tt) {\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        } else {\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id', this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n        if (this.data.ty === 0 && !this.data.hd) {\r\n            var cp = createNS( 'clipPath');\r\n            var pt = createNS('path');\r\n            pt.setAttribute('d','M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n            var clipId = 'cp_'+randomString(8);\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n\r\n            if (this.checkMasks()) {\r\n                var cpGroup = createNS('g');\r\n                cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId + ')');\r\n                cpGroup.appendChild(this.layerElement);\r\n                this.transformedElement = cpGroup;\r\n                if (layerElementParent) {\r\n                    layerElementParent.appendChild(this.transformedElement);\r\n                } else {\r\n                    this.baseElement = this.transformedElement;\r\n                }\r\n            } else {\r\n                this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            }\r\n            \r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n        this.renderableEffectsManager = new SVGEffects(this);\r\n\r\n    },\r\n    renderElement: function() {\r\n        if (this.finalTransform._matMdf) {\r\n            this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n        }\r\n        if (this.finalTransform._opMdf) {\r\n            this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n        }\r\n    },\r\n    destroyBaseElement: function() {\r\n        this.layerElement = null;\r\n        this.matteElement = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function() {\r\n        if (this.data.hd) {\r\n            return null;\r\n        }\r\n        return this.baseElement;\r\n    },\r\n    addMasks: function() {\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    setMatte: function(id) {\r\n        if (!this.matteElement) {\r\n            return;\r\n        }\r\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n    }\r\n};\nfunction IShapeElement(){\r\n}\r\n\r\nIShapeElement.prototype = {\r\n    addShapeToModifiers: function(data) {\r\n        var i, len = this.shapeModifiers.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapeModifiers[i].addShape(data);\r\n        }\r\n    },\r\n    renderModifiers: function() {\r\n        if(!this.shapeModifiers.length){\r\n            return;\r\n        }\r\n        var i, len = this.shapes.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].reset();\r\n        }\r\n\r\n        len = this.shapeModifiers.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n        }\r\n    },\r\n    lcEnum: {\r\n        '1': 'butt',\r\n        '2': 'round',\r\n        '3': 'square'\r\n    },\r\n    ljEnum: {\r\n        '1': 'miter',\r\n        '2': 'round',\r\n        '3': 'butt'\r\n    },\r\n    searchProcessedElement: function(elem){\r\n        var i = 0, len = this.processedElements.length;\r\n        while(i < len){\r\n            if(this.processedElements[i].elem === elem){\r\n                return this.processedElements[i].pos;\r\n            }\r\n            i += 1;\r\n        }\r\n        return 0;\r\n    },\r\n    addProcessedElement: function(elem, pos){\r\n        var i = this.processedElements.length, found = false;\r\n        while(i){\r\n            i -= 1;\r\n            if(this.processedElements[i].elem === elem){\r\n                this.processedElements[i].pos = pos;\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if(!found){\r\n            this.processedElements.push(new ProcessedElement(elem, pos));\r\n        }\r\n    },\r\n    prepareFrame: function(num) {\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n    },\r\n    buildShapeString: function(pathNodes, length, closed, mat) {\r\n        var i, shapeString = '';\r\n        for(i = 1; i < length; i += 1) {\r\n            if (i === 1) {\r\n                shapeString += \" M\" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n            }\r\n            shapeString += \" C\" + mat.applyToPointStringified(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1]) + \" \" + mat.applyToPointStringified(pathNodes.i[i][0], pathNodes.i[i][1]) + \" \" + mat.applyToPointStringified(pathNodes.v[i][0], pathNodes.v[i][1]);\r\n        }\r\n        if (length === 1) {\r\n            shapeString += \" M\" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n        }\r\n        if (closed && length) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(pathNodes.o[i - 1][0], pathNodes.o[i - 1][1]) + \" \" + mat.applyToPointStringified(pathNodes.i[0][0], pathNodes.i[0][1]) + \" \" + mat.applyToPointStringified(pathNodes.v[0][0], pathNodes.v[0][1]);\r\n            shapeString += 'z';\r\n        }\r\n        return shapeString;\r\n    }\r\n};\nfunction ITextElement(){\r\n}\r\n\r\nITextElement.prototype.initElement = function(data,globalData,comp){\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.addMasks();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty._isFirstFrame = false;\r\n        this.textProperty._mdf = false;\r\n    }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var k, kLen, pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += this.buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function(_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function(_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n};\r\n\r\nITextElement.prototype.buildShapeString = IShapeElement.prototype.buildShapeString;\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    \r\n};\nfunction ICompElement(){}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function(data,globalData,comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.addMasks();\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n    this.hide();\r\n};\r\n\r\n/*ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};*/\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(!this.isInRange && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n            if(this.elements[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i += 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n};\r\n\nfunction IImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio','xMidYMid slice');\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    \r\n    this.layerElement.appendChild(this.innerElem);\r\n};\r\n\nfunction ISolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function(){\r\n\r\n    var rect = createNS('rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n};\nfunction SVGCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    //this.layerElement = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\nfunction SVGTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], SVGTextElement);\r\n\r\nSVGTextElement.prototype.createContent = function(){\r\n\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = createNS('text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildTextContents = function(textArray) {\r\n    var i = 0, len = textArray.length;\r\n    var textContents = [], currentTextContent = '';\r\n    while (i < len) {\r\n        if(textArray[i] === String.fromCharCode(13)) {\r\n            textContents.push(currentTextContent);\r\n            currentTextContent = '';\r\n        } else {\r\n            currentTextContent += textArray[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n}\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n    if(!len){\r\n        return;\r\n    }\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(singleShape && !usesGlyphs && !documentData.sz) {\r\n        var tElement = this.textContainer;\r\n        var justify = 'start';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = this.buildTextContents(documentData.finalText);\r\n        len = textContent.length;\r\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || createNS('tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.finalLineHeight;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n            if (singleShape) {\r\n                if(letters[i].n) {\r\n                    xPos = -trackingOffset;\r\n                    yPos += documentData.yOffset;\r\n                    yPos += firstLine ? 1 : 0;\r\n                    firstLine = false;\r\n                }\r\n                this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                xPos += letters[i].l || 0;\r\n                //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                xPos += trackingOffset;\r\n            }\r\n            if(usesGlyphs) {\r\n                charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                if(singleShape) {\r\n                    tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\r\n                }\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n};\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        };\r\n    }\r\n    return this.bbox;\r\n};\r\n\r\nSVGTextElement.prototype.renderInnerContent = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter._mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter._mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter._mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter._mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter._mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\nfunction SVGShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function() {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nSVGShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n};\r\n\r\nSVGShapeElement.prototype.createStyleElement = function(data, level){\r\n    //TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n\r\n    var pathElement = styleOb.pElem;\r\n    if(data.ty === 'st') {\r\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'fl') {\r\n        elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'gf' || data.ty === 'gs') {\r\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n        elementData = new gradientConstructor(this, data, styleOb);\r\n        this.globalData.defs.appendChild(elementData.gf);\r\n        if (elementData.maskId) {\r\n            this.globalData.defs.appendChild(elementData.ms);\r\n            this.globalData.defs.appendChild(elementData.of);\r\n            pathElement.setAttribute('mask','url(#' + elementData.maskId + ')');\r\n        }\r\n    }\r\n    \r\n    if(data.ty === 'st' || data.ty === 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        if(data.lj === 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n        }\r\n    }\r\n\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    this.stylesList.push(styleOb);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = new ShapeGroupData();\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function(data) {\r\n    return new SVGTransformData(TransformPropertyFactory.getTransformProperty(this,data,this), PropertyFactory.getProp(this,data.o,0,0.01,this));\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function(data, ownTransformers, level) {\r\n    var ty = 4;\r\n    if(data.ty === 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty === 'el'){\r\n        ty = 6;\r\n    }else if(data.ty === 'sr'){\r\n        ty = 7;\r\n    }\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData.sh);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function(elementData){\r\n    var arr = elementData.styles;\r\n    var j, jLen = this.stylesList.length;\r\n    for (j = 0; j < jLen; j += 1) {\r\n        if (!this.stylesList[j].closed) {\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for( i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    len = this.dynamicProperties.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], styleOb, currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].style.pElem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i]);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n            }\r\n            this.setElementStyles(itemsData[i]);\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function() {\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].reset();\r\n    }\r\n    this.renderShape(this.shapesData, this.itemsData, this.layerElement);\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n                //Adding M0 0 fixes same mask bug on all browsers\r\n                this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n            }\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n        }\r\n    }\r\n};\r\n\r\n\r\nSVGShapeElement.prototype.renderShape = function(items, data, container) {\r\n    var i, len = items.length - 1;\r\n    var ty;\r\n    for(i=0;i<=len;i+=1){\r\n        ty = items[i].ty;\r\n        if(ty == 'tr'){\r\n            if(this._isFirstFrame || data[i].transform.op._mdf){\r\n                container.setAttribute('opacity',data[i].transform.op.v);\r\n            }\r\n            if(this._isFirstFrame || data[i].transform.mProps._mdf){\r\n                container.setAttribute('transform',data[i].transform.mProps.v.to2dCSS());\r\n            }\r\n        }else if(items[i]._render && (ty == 'sh' || ty == 'el' || ty == 'rc' || ty == 'sr')){\r\n            this.renderPath(data[i]);\r\n        }else if(ty == 'fl'){\r\n            this.renderFill(items[i],data[i]);\r\n        }else if(ty == 'gf'){\r\n            this.renderGradient(items[i],data[i]);\r\n        }else if(ty == 'gs'){\r\n            this.renderGradient(items[i],data[i]);\r\n            this.renderStroke(items[i],data[i]);\r\n        }else if(ty == 'st'){\r\n            this.renderStroke(items[i],data[i]);\r\n        }else if(ty == 'gr'){\r\n            this.renderShape(items[i].it,data[i].it, data[i].gr);\r\n        }else if(ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n\r\n};\r\n\r\nSVGShapeElement.prototype.renderPath = function(itemData){\r\n    var j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.styles.length;\r\n    var lvl = itemData.lvl;\r\n    var paths, mat, props, iterations, k;\r\n    for(l=0;l<lLen;l+=1){\r\n        redraw = itemData.sh._mdf || this._isFirstFrame;\r\n        if(itemData.styles[l].lvl < lvl){\r\n            mat = this.mHelper.reset();\r\n            iterations = lvl - itemData.styles[l].lvl;\r\n            k = itemData.transformers.length-1;\r\n            while(iterations > 0) {\r\n                redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n                props = itemData.transformers[k].mProps.v.props;\r\n                mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n                iterations --;\r\n                k --;\r\n            }\r\n        } else {\r\n            mat = this.identityMatrix;\r\n        }\r\n        paths = itemData.sh.paths;\r\n        jLen = paths._length;\r\n        if(redraw){\r\n            pathStringTransformed = '';\r\n            for(j=0;j<jLen;j+=1){\r\n                pathNodes = paths.shapes[j];\r\n                if(pathNodes && pathNodes._length){\r\n                    pathStringTransformed += this.buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n                }\r\n            }\r\n            itemData.caches[l] = pathStringTransformed;\r\n        } else {\r\n            pathStringTransformed = itemData.caches[l];\r\n        }\r\n        itemData.styles[l].d += pathStringTransformed;\r\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderFill = function(styleData,itemData){\r\n    var styleElem = itemData.style;\r\n\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n    }\r\n    if(itemData.o._mdf || this._isFirstFrame){\r\n        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderGradient = function(styleData, itemData) {\r\n    var gfill = itemData.gf;\r\n    var hasOpacity = itemData.g._hasOpacity;\r\n    var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n\r\n    if (itemData.o._mdf || this._isFirstFrame) {\r\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n    }\r\n    if (itemData.s._mdf || this._isFirstFrame) {\r\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n        gfill.setAttribute(attr1, pt1[0]);\r\n        gfill.setAttribute(attr2, pt1[1]);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n            itemData.of.setAttribute(attr1, pt1[0]);\r\n            itemData.of.setAttribute(attr2, pt1[1]);\r\n        }\r\n    }\r\n    var stops, i, len, stop;\r\n    if (itemData.g._cmdf || this._isFirstFrame) {\r\n        stops = itemData.cst;\r\n        var cValues = itemData.g.c;\r\n        len = stops.length;\r\n        for (i = 0; i < len; i += 1){\r\n            stop = stops[i];\r\n            stop.setAttribute('offset', cValues[i * 4] + '%');\r\n            stop.setAttribute('stop-color','rgb('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ')');\r\n        }\r\n    }\r\n    if (hasOpacity && (itemData.g._omdf || this._isFirstFrame)) {\r\n        var oValues = itemData.g.o;\r\n        if(itemData.g._collapsable) {\r\n            stops = itemData.cst;\r\n        } else {\r\n            stops = itemData.ost;\r\n        }\r\n        len = stops.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            stop = stops[i];\r\n            if(!itemData.g._collapsable) {\r\n                stop.setAttribute('offset', oValues[i * 2] + '%');\r\n            }\r\n            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n        }\r\n    }\r\n    if (styleData.t === 1) {\r\n        if (itemData.e._mdf  || this._isFirstFrame) {\r\n            gfill.setAttribute('x2', pt2[0]);\r\n            gfill.setAttribute('y2', pt2[1]);\r\n            if (hasOpacity && !itemData.g._collapsable) {\r\n                itemData.of.setAttribute('x2', pt2[0]);\r\n                itemData.of.setAttribute('y2', pt2[1]);\r\n            }\r\n        }\r\n    } else {\r\n        var rad;\r\n        if (itemData.s._mdf || itemData.e._mdf || this._isFirstFrame) {\r\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n            gfill.setAttribute('r', rad);\r\n            if(hasOpacity && !itemData.g._collapsable){\r\n                itemData.of.setAttribute('r', rad);\r\n            }\r\n        }\r\n        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || this._isFirstFrame) {\r\n            if (!rad) {\r\n                rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n            }\r\n            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n            var dist = rad * percent;\r\n            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n            gfill.setAttribute('fx', x);\r\n            gfill.setAttribute('fy', y);\r\n            if (hasOpacity && !itemData.g._collapsable) {\r\n                itemData.of.setAttribute('fx', x);\r\n                itemData.of.setAttribute('fy', y);\r\n            }\r\n        }\r\n        //gfill.setAttribute('fy','200');\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderStroke = function(styleData, itemData) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if (d && (d._mdf || this._isFirstFrame) && d.dashStr) {\r\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n    }\r\n    if(itemData.c && (itemData.c._mdf || this._isFirstFrame)){\r\n        styleElem.pElem.setAttribute('stroke','rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\r\n    }\r\n    if(itemData.o._mdf || this._isFirstFrame){\r\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n    }\r\n    if(itemData.w._mdf || this._isFirstFrame){\r\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n        if(styleElem.msElem){\r\n            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.destroy = function(){\r\n    this.destroyBaseElement();\r\n    this.shapeData = null;\r\n    this.itemsData = null;\r\n};\r\n\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = createNS('feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = createNS('g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = createNS('path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = createNS('mask');\r\n        var id = 'stms_' + randomString(10);\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = createNS('g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        if(elemChildren[0]){\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.paths[i].m === -1) {\r\n            continue;\r\n        }\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager._mdf || mask.prop._mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p._mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p._mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    var feFuncR, feFuncG, feFuncB;\r\n    \r\n    if(effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = createNS('feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var val, cnt, perc, bezier;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)){\r\n            val = this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)){\r\n            val = this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)){\r\n            val = this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)){\r\n            val = this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)){\r\n            val = this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p._mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p._mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v;\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n            var x = distance * Math.cos(angle);\r\n            var y = distance * Math.sin(angle);\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\nvar _svgMatteSymbols = [];\r\nvar _svgMatteMaskCounter = 0;\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function(mask) {\r\n    var i = 0, len = _svgMatteSymbols.length;\r\n    while(i < len) {\r\n        if(_svgMatteSymbols[i] === mask) {\r\n            return _svgMatteSymbols[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function(mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n    if(!parentNode) {\r\n        return;\r\n    }\r\n    var children = parentNode.children;\r\n    var i = 0, len = children.length;\r\n    while (i < len) {\r\n        if (children[i] === mask.layerElement) {\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    var nextChild;\r\n    if (i <= len - 2) {\r\n        nextChild = children[i + 1];\r\n    }\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    if(nextChild) {\r\n        parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n        parentNode.appendChild(useElem);\r\n    }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    if(!this.findSymbol(mask)) {\r\n        var symbolId = 'matte_' + randomString(5) + '_' + _svgMatteMaskCounter++;\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', mask.layerId);\r\n        masker.setAttribute('mask-type', 'alpha');\r\n        _svgMatteSymbols.push(mask);\r\n        var defs = elem.globalData.defs;\r\n        defs.appendChild(masker);\r\n        var symbol = createNS('symbol');\r\n        symbol.setAttribute('id', symbolId);\r\n        this.replaceInParent(mask, symbolId);\r\n        symbol.appendChild(mask.layerElement);\r\n        defs.appendChild(symbol);\r\n        var useElem = createNS('use');\r\n        useElem.setAttribute('href', '#' + symbolId);\r\n        masker.appendChild(useElem);\r\n        mask.data.hd = false;\r\n        mask.show();\r\n    }\r\n    elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var i = 0, len = this.elem.comp.elements.length;\r\n    while (i < len) {\r\n    \tif (this.elem.comp.elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, this.elem.comp.elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n};\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = randomString(10);\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        filterManager = null;\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n        }\r\n        if(filterManager) {\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(_isFirstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n};\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var idled = true;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n        if(playingAnimationsNum === 0){\r\n            idled = true;\r\n        }\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n    function resume(nowTime) {\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(!idled) {\r\n            window.requestAnimationFrame(resume);\r\n        } else {\r\n            _stopped = true;\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n                  [].slice.call(document.getElementsByClassName('bodymovin')));\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = createTag('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    /*function start(){\r\n        window.requestAnimationFrame(first);\r\n    }*/\r\n\r\n    function activate(){\r\n        if(idled){\r\n            idled = false;\r\n            if(_stopped) {\r\n                window.requestAnimationFrame(first);\r\n                _stopped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    //start();\r\n\r\n    //setTimeout(start,0);\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    //moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    return moduleOb;\r\n}());\r\n\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.pendingElements = 0;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.layers = [];\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = randomString(10);\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this.projectInterface = ProjectInterface();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    var self = this;\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null){\r\n    }else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    this.assetsPath = params.assetsPath;\r\n    if(params.animationData){\r\n        self.configAnimation(params.animationData);\r\n    }else if(params.path){\r\n        if(params.path.substr(-4) != 'json'){\r\n            if (params.path.substr(-1, 1) != '/') {\r\n                params.path += '/';\r\n            }\r\n            params.path += 'data.json';\r\n        }\r\n\r\n        var xhr = new XMLHttpRequest();\r\n        if(params.path.lastIndexOf('\\\\') != -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        }else{\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n        xhr.open('GET', params.path, true);\r\n        xhr.send();\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState == 4) {\r\n                if(xhr.status == 200){\r\n                    self.configAnimation(JSON.parse(xhr.responseText));\r\n                }else{\r\n                    try{\r\n                        var response = JSON.parse(xhr.responseText);\r\n                        self.configAnimation(response);\r\n                    }catch(err){\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === ''){\r\n    }else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n        this.animationData.tf = this.totalFrames;\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    //this.totalFrames = 50;\r\n    //this.animationData.tf = 50;\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.renderer.renderFrame(-1);\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.animationData.tf;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var xhr = new XMLHttpRequest();\r\n    var self = this;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    xhr.open('GET', segmentPath, true);\r\n    xhr.send();\r\n    xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4) {\r\n            if(xhr.status == 200){\r\n                self.includeLayers(JSON.parse(xhr.responseText));\r\n            }else{\r\n                try{\r\n                    var response = JSON.parse(xhr.responseText);\r\n                    self.includeLayers(response);\r\n                }catch(err){\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.animationData.tf;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    var _this = this;\r\n    if(this.renderer && this.renderer.destroyed){\r\n        return;\r\n    }\r\n    this.animationData = animData;\r\n    this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n    this.animationData.tf = this.totalFrames;\r\n    this.renderer.configAnimation(animData);\r\n    if(!animData.assets){\r\n        animData.assets = [];\r\n    }\r\n    if(animData.comps) {\r\n        animData.assets = animData.assets.concat(animData.comps);\r\n        animData.comps = null;\r\n    }\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n\r\n    this.layers = this.animationData.layers;\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.firstFrame = Math.round(this.animationData.ip);\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.trigger('config_ready');\r\n    this.imagePreloader = new ImagePreloader();\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(animData.assets, function(err) {\r\n        if(!err) {\r\n            _this.trigger('loaded_images');\r\n        }\r\n    });\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    if(this.renderer.globalData.fontManager){\r\n        this.waitForFontsLoaded();\r\n    }else{\r\n        dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n        this.checkLoaded();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = (function(){\r\n    function checkFontsLoaded(){\r\n        if(this.renderer.globalData.fontManager.loaded){\r\n            dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n            //this.renderer.buildItems(this.animationData.layers);\r\n            this.checkLoaded();\r\n        }else{\r\n            setTimeout(checkFontsLoaded.bind(this),20);\r\n        }\r\n    }\r\n\r\n    return function(){\r\n        checkFontsLoaded.bind(this)();\r\n    };\r\n}());\r\n\r\nAnimationItem.prototype.addPendingElement = function () {\r\n    this.pendingElements += 1;\r\n};\r\n\r\nAnimationItem.prototype.elementLoaded = function () {\r\n    this.pendingElements--;\r\n    this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (this.pendingElements === 0) {\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function(){\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this),0);\r\n        this.isLoaded = true;\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        this._idle = true;\r\n        this.trigger('_idle');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false;\r\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n        if (!this.loop || this.playCount === this.loop) {\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                _isComplete = true;\r\n                nextValue = this.totalFrames - 1;\r\n            }\r\n        } else if (nextValue >= this.totalFrames) {\r\n            this.playCount += 1;\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n                this.trigger('loopComplete');\r\n            }\r\n        } else {\r\n            this.setCurrentRawFrameValue(nextValue);\r\n        }\r\n    } else if(nextValue < 0) {\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n            if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n                this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n                this.trigger('loopComplete');\r\n            } else {\r\n                _isComplete = true;\r\n                nextValue = 0;\r\n            }\r\n        }\r\n    } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n    if (_isComplete) {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n        this.pause();\r\n        this.trigger('complete');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr, offset){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.timeCompleted = this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr,forceFlag) {\r\n    if(typeof arr[0] === 'object'){\r\n        var i, len = arr.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.segments.push(arr[i]);\r\n        }\r\n    }else{\r\n        this.segments.push(arr);\r\n    }\r\n    if(forceFlag){\r\n        this.checkSegments(0);\r\n    }\r\n    if(this.isPaused){\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip,this.animationData.op]);\r\n    //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if(forceFlag){\r\n        this.checkSegments(0);\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(offset){\r\n    if(this.segments.length) {\r\n        this.adjustSegment(this.segments.shift(), offset);\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nAnimationItem.prototype.remove = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if((name && this.name != name) || (this.renderer && this.renderer.destroyed)){\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n    this.renderer = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getAssets = function () {\r\n    return this.assets;\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\nfunction EffectsManager(){}\nfunction CanvasRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n        clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n        context: (config && config.context) || null,\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.renderConfig.dpr = (config && config.dpr) || 1;\r\n    if (this.animationItem.wrapper) {\r\n        this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n    }\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1,\r\n        _mdf: false,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    var i, len = 15;\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n}\r\nextendPrototype([BaseRenderer],CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function(props){\r\n    if(props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);\r\n        return;\r\n    }\r\n    this.transformMat.cloneFromProps(props);\r\n    var cProps = this.contextData.cTr.props;\r\n    this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]);\r\n    //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function(op){\r\n    /*if(op === 1){\r\n        return;\r\n    }*/\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n        return;\r\n    }\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n    this.canvasContext.globalAlpha = this.contextData.cO;\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function(){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.save();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.save();\r\n    }\r\n    var props = this.contextData.cTr.props;\r\n    if(this.contextData._length <= this.contextData.cArrPos) {\r\n        this.contextData.duplicate();\r\n    }\r\n    var i, arr = this.contextData.saved[this.contextData.cArrPos];\r\n    for (i = 0; i < 16; i += 1) {\r\n        arr[i] = props[i];\r\n    }\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.restore();\r\n        this.globalData.blendMode = 'source-over';\r\n    }\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i,arr = this.contextData.cTr.props;\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = popped[i];\r\n    }\r\n    this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n    this.canvasContext.globalAlpha = popped;\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function(animData){\r\n    if(this.animationItem.wrapper){\r\n        this.animationItem.container = createTag('canvas');\r\n        this.animationItem.container.style.width = '100%';\r\n        this.animationItem.container.style.height = '100%';\r\n        //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\r\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\r\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\r\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n        this.canvasContext = this.animationItem.container.getContext('2d');\r\n        if(this.renderConfig.className) {\r\n            this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n        }\r\n    }else{\r\n        this.canvasContext = this.renderConfig.context;\r\n    }\r\n    this.data = animData;\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.totalFrames = Math.floor(animData.tf);\r\n    this.globalData.compWidth = animData.w;\r\n    this.globalData.compHeight = animData.h;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n        w: animData.w,\r\n        h:animData.h,\r\n        sx:0,\r\n        sy:0,\r\n        tx:0,\r\n        ty:0\r\n    };\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,document.body);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem);\r\n    this.globalData.addPendingElement = this.animationItem.addPendingElement.bind(this.animationItem);\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n\r\n    this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n    this.reset();\r\n    var elementWidth,elementHeight;\r\n    if(this.animationItem.wrapper && this.animationItem.container){\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n        this.animationItem.container.setAttribute('width',elementWidth * this.renderConfig.dpr );\r\n        this.animationItem.container.setAttribute('height',elementHeight * this.renderConfig.dpr);\r\n    }else{\r\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n    }\r\n    var elementRel,animationRel;\r\n    if(this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1){\r\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n        var fillType = par[1] || 'meet';\r\n        var pos = par[0] || 'xMidYMid';\r\n        var xPos = pos.substr(0,4);\r\n        var yPos = pos.substr(4);\r\n        elementRel = elementWidth/elementHeight;\r\n        animationRel = this.transformCanvas.w/this.transformCanvas.h;\r\n        if(animationRel>elementRel && fillType === 'meet' || animationRel<elementRel && fillType === 'slice'){\r\n            this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        }else{\r\n            this.transformCanvas.sx = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n        }\r\n\r\n        if(xPos === 'xMid' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr;\r\n        } else if(xPos === 'xMax' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.tx = 0;\r\n        }\r\n        if(yPos === 'YMid' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2)*this.renderConfig.dpr;\r\n        } else if(yPos === 'YMax' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w)))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.ty = 0;\r\n        }\r\n\r\n    }else if(this.renderConfig.preserveAspectRatio == 'none'){\r\n        this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }else{\r\n        this.transformCanvas.sx = this.renderConfig.dpr;\r\n        this.transformCanvas.sy = this.renderConfig.dpr;\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }\r\n    this.transformCanvas.props = [this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];\r\n    /*var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    }*/\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n    if(this.renderConfig.clearCanvas) {\r\n        this.animationItem.wrapper.innerHTML = '';\r\n    }\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function(num){\r\n    if((this.renderedFrame == num && this.renderConfig.clearCanvas === true) || this.destroyed || num === -1){\r\n        return;\r\n    }\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = false;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n\r\n     // console.log('--------');\r\n     // console.log('NEW: ',num);\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        if(this.renderConfig.clearCanvas === true){\r\n            this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n        }else{\r\n            this.save();\r\n        }\r\n        for (i = len - 1; i >= 0; i-=1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n        if(this.renderConfig.clearCanvas !== true){\r\n            this.restore();\r\n        }\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    var element = this.createItem(this.layers[pos], this,this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /*if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    }*/\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function(){\r\n    this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function(){\r\n    this.animationItem.container.style.display = 'block';\r\n};\r\n\nfunction HybridRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n        className: (config && config.className) || '',\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newDOMElement = element.getBaseElement();\r\n    if(!newDOMElement){\r\n        return;\r\n    }\r\n    var layer = this.layers[pos];\r\n    if(!layer.ddd || !this.supports3d){\r\n        if(this.threeDElements) {\r\n            this.addTo3dContainer(newDOMElement,pos);\r\n        } else {\r\n            var i = 0;\r\n            var nextDOMElement, nextLayer, tmpDOMElement;\r\n            while(i<pos){\r\n                if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement){\r\n                    nextLayer = this.elements[i];\r\n                    tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n                    nextDOMElement = tmpDOMElement || nextDOMElement;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(nextDOMElement){\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n                }\r\n            } else {\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.appendChild(newDOMElement);\r\n                }\r\n            }\r\n        }\r\n        \r\n    } else {\r\n        this.addTo3dContainer(newDOMElement,pos);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n    return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGTextElement(data, this.globalData, this);\r\n    }\r\n    return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n    if(!this.supports3d){\r\n        return new IImageElement(data, this.globalData, this);\r\n    }\r\n    return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n    return new HCompElement(data, this.globalData, this);\r\n\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n    if(!this.supports3d){\r\n        return new ISolidElement(data, this.globalData, this);\r\n    }\r\n    return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function(pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len) {\r\n        if(this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n            return this.threeDElements[i].perspectiveElem;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function(pos, type){\r\n    var perspectiveElem = createTag('div');\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n    if(type === '3d') {\r\n        perspectiveElem.style.width = this.globalData.compSize.w+'px';\r\n        perspectiveElem.style.height = this.globalData.compSize.h+'px';\r\n        perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\r\n        container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    }\r\n    \r\n    perspectiveElem.appendChild(container);\r\n    //this.resizerElem.appendChild(perspectiveElem);\r\n    var threeDContainerData = {\r\n        container:container,\r\n        perspectiveElem:perspectiveElem,\r\n        startPos: pos,\r\n        endPos: pos,\r\n        type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function(){\r\n    var i, len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n    for(i=0;i<len;i+=1){\r\n        if(this.layers[i].ddd && this.layers[i].ty !== 3){\r\n            if(currentContainer !== '3d'){\r\n                currentContainer = '3d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'3d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        } else {\r\n            if(currentContainer !== '2d'){\r\n                currentContainer = '2d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'2d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        }\r\n    }\r\n    len = this.threeDElements.length;\r\n    for(i = len - 1; i >= 0; i --) {\r\n        this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function(elem,pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len){\r\n        if(pos <= this.threeDElements[i].endPos){\r\n            var j = this.threeDElements[i].startPos;\r\n            var nextElement;\r\n            while(j<pos){\r\n                if(this.elements[j] && this.elements[j].getBaseElement){\r\n                    nextElement = this.elements[j].getBaseElement();\r\n                }\r\n                j += 1;\r\n            }\r\n            if(nextElement){\r\n                this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n            } else {\r\n                this.threeDElements[i].container.appendChild(elem);\r\n            }\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function(animData){\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    resizerElem.style.width = animData.w+'px';\r\n    resizerElem.style.height = animData.h+'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\r\n    if(this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    wrapper.appendChild(resizerElem);\r\n\r\n    resizerElem.style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width','1');\r\n    svg.setAttribute('height','1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.globalData.defs = defs;\r\n    this.data = animData;\r\n    //Mask animation\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.elementLoaded = this.animationItem.elementLoaded.bind(this.animationItem);\r\n    this.globalData.frameId = 0;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n    this.globalData.frameRate = animData.fr;\r\n    this.layers = animData.layers;\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts,svg);\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        this.elements[i].destroy();\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth/elementHeight;\r\n    var animationRel = this.globalData.compSize.w/this.globalData.compSize.h;\r\n    var sx,sy,tx,ty;\r\n    if(animationRel>elementRel){\r\n        sx = elementWidth/(this.globalData.compSize.w);\r\n        sy = elementWidth/(this.globalData.compSize.w);\r\n        tx = 0;\r\n        ty = ((elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2);\r\n    }else{\r\n        sx = elementHeight/(this.globalData.compSize.h);\r\n        sy = elementHeight/(this.globalData.compSize.h);\r\n        tx = (elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;\r\n        ty = 0;\r\n    }\r\n    this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,'+sy+',0,0,0,0,1,0,'+tx+','+ty+',0,1)';\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function(){\r\n    this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function(){\r\n    this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function(){\r\n    this.buildAllItems();\r\n    if(this.camera){\r\n        this.camera.setup();\r\n    } else {\r\n        var cWidth = this.globalData.compSize.w;\r\n        var cHeight = this.globalData.compSize.h;\r\n        var i, len = this.threeDElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth,2) + Math.pow(cHeight,2)) + 'px';\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\nfunction CVContextData() {\r\n\tthis.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i, len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n    for(i=0;i<len;i+=1){\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function() {\r\n\tvar newLength = this._length * 2;\r\n\tvar currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n    for(i = this._length; i < newLength; i += 1) {\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function() {\r\n\tthis.cArrPos = 0;\r\n\tthis.cTr.reset();\r\n    this.cO = 1;\r\n};\nfunction CVBaseElement(){\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n    createElements: function(){},\r\n    initRendererElement: function(){},\r\n    createContainerElements: function(){\r\n        this.canvasContext = this.globalData.canvasContext;\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function(){},\r\n    setBlendMode: function(){\r\n        var globalData = this.globalData;\r\n        if(globalData.blendMode !== this.data.bm) {\r\n            globalData.blendMode = this.data.bm;\r\n            var blendModeValue = this.getBlendMode();\r\n            globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n        }\r\n    },\r\n    addMasks: function(){\r\n        this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function(){\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n            this.hidden = true;\r\n        }\r\n    },\r\n    showElement: function(){\r\n        if (this.isInRange && !this.isTransparent){\r\n            this.hidden = false;\r\n            this._isFirstFrame = true;\r\n            this.maskManager._isFirstFrame = true;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        if (this.hidden) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.setBlendMode();\r\n        this.globalData.renderer.save();\r\n        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n        this.renderInnerContent();\r\n        this.globalData.renderer.restore();\r\n        if(this.maskManager.hasMasks) {\r\n            this.globalData.renderer.restore(true);\r\n        }\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.canvasContext = null;\r\n        this.data = null;\r\n        this.globalData = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\nfunction CVImageElement(data, globalData, comp){\r\n    this.failed = false;\r\n    this.img = new Image();\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n    this.globalData.addPendingElement();\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.imageLoaded = function() {\r\n    this.globalData.elementLoaded();\r\n    if(this.assetData.w !== this.img.width || this.assetData.h !== this.img.height){\r\n        var canvas = createTag('canvas');\r\n        canvas.width = this.assetData.w;\r\n        canvas.height = this.assetData.h;\r\n        var ctx = canvas.getContext('2d');\r\n\r\n        var imgW = this.img.width;\r\n        var imgH = this.img.height;\r\n        var imgRel = imgW / imgH;\r\n        var canvasRel = this.assetData.w/this.assetData.h;\r\n        var widthCrop, heightCrop;\r\n        if(imgRel>canvasRel){\r\n            heightCrop = imgH;\r\n            widthCrop = heightCrop*canvasRel;\r\n        } else {\r\n            widthCrop = imgW;\r\n            heightCrop = widthCrop/canvasRel;\r\n        }\r\n        ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);\r\n        this.img = canvas;\r\n    }\r\n};\r\n\r\nCVImageElement.prototype.imageFailed = function() {\r\n    this.failed = true;\r\n    this.globalData.elementLoaded();\r\n};\r\n\r\nCVImageElement.prototype.createContent = function(){\r\n    var img = this.img;\r\n    img.addEventListener('load', this.imageLoaded.bind(this), false);\r\n    img.addEventListener('error', this.imageFailed.bind(this), false);\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    img.src = assetPath;\r\n\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function(parentMatrix){\r\n    if (this.failed) {\r\n        return;\r\n    }\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function(){\r\n    this.img = null;\r\n};\nfunction CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate, this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.layers = null;\r\n    this.elements = null;\r\n};\n\r\nfunction CVMaskElement(data,element){\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i, len = this.masksProperties.length, hasMasks = false;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            hasMasks = true;\r\n        }\r\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);\r\n    }\r\n    this.hasMasks = hasMasks;\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function (transform) {\r\n    if(!this.hasMasks){\r\n        return;\r\n    }\r\n    var ctx = this.element.canvasContext;\r\n    var i, len = this.masksProperties.length;\r\n    var pt,pts,data;\r\n    ctx.beginPath();\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if (this.masksProperties[i].inv) {\r\n                ctx.moveTo(0, 0);\r\n                ctx.lineTo(this.element.globalData.compWidth, 0);\r\n                ctx.lineTo(this.element.globalData.compWidth, this.element.globalData.compHeight);\r\n                ctx.lineTo(0, this.element.globalData.compHeight);\r\n                ctx.lineTo(0, 0);\r\n            }\r\n            data = this.viewData[i].v;\r\n            pt = transform.applyToPointArray(data.v[0][0],data.v[0][1],0);\r\n            ctx.moveTo(pt[0], pt[1]);\r\n            var j, jLen = data._length;\r\n            for (j = 1; j < jLen; j++) {\r\n                pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n                ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n            }\r\n            pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n            ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n    }\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n};\nfunction CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = {opacity:1,mat:new Matrix(),_matMdf:false,_opMdf:false};\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function(data){\r\n    var styleElem = {\r\n        data: data,\r\n        type: data.ty,\r\n        elements: []\r\n    };\r\n    var elementData = {};\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,this);\r\n        if(!elementData.c.k){\r\n            styleElem.co = 'rgb('+bm_floor(elementData.c.v[0])+','+bm_floor(elementData.c.v[1])+','+bm_floor(elementData.c.v[2])+')';\r\n        }\r\n    }\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,this);\r\n    if(data.ty == 'st') {\r\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n        if(data.lj == 1) {\r\n            styleElem.ml = data.ml;\r\n        }\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,this);\r\n        if(!elementData.w.k){\r\n            styleElem.wi = elementData.w.v;\r\n        }\r\n        if(data.d){\r\n            var d = new DashProperty(this,data.d,'canvas');\r\n            elementData.d = d;\r\n            if(!elementData.d.k){\r\n                styleElem.da = elementData.d.dashArray;\r\n                styleElem.do = elementData.d.dashoffset[0];\r\n            }\r\n        }\r\n\r\n    } else {\r\n\r\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function(data) {\r\n    var elementData = {\r\n        transform : {\r\n            mat: new Matrix(),\r\n            opacity: 1,\r\n            _matMdf:false,\r\n            _opMdf:false,\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,this),\r\n            mProps: TransformPropertyFactory.getTransformProperty(this,data,this)\r\n        },\r\n        elements: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function(data) {\r\n    var elementData = {\r\n        nodes:[],\r\n        trNodes:[],\r\n        tr:[0,0,0,0,0,0]\r\n    };\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    elementData.sh = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    this.shapes.push(elementData.sh);\r\n    this.addShapeToModifiers(elementData);\r\n    var j, jLen = this.stylesList.length;\r\n    var hasStrokes = false, hasFills = false;\r\n    for(j=0;j<jLen;j+=1){\r\n        if(!this.stylesList[j].closed){\r\n            this.stylesList[j].elements.push(elementData);\r\n            if(this.stylesList[j].type === 'st'){\r\n                hasStrokes = true;\r\n            }else{\r\n                hasFills = true;\r\n            }\r\n        }\r\n    }\r\n    elementData.st = hasStrokes;\r\n    elementData.fl = hasFills;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true);\r\n    len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function(arr,itemsData, prevViewData, render){\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownArrays = [], ownModifiers = [], processedPos, modifier;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i]);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            \r\n            ownArrays.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData, render);\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i]);\r\n            }\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i]);\r\n            }\r\n            \r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        } else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownArrays.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownArrays[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function() {\r\n\r\n    this.transformHelper.mat.reset();\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._matMdf = false;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.renderShape(this.transformHelper,this.shapesData,this.itemsData,true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function(parentTransform, groupTransform) {\r\n    var props, groupMatrix;\r\n    if(parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n        groupTransform.opacity = parentTransform.opacity;\r\n        groupTransform.opacity *= groupTransform.op.v;\r\n        groupTransform._opMdf = true;\r\n    }\r\n    if(parentTransform._matMdf || groupTransform.mProps._mdf || this._isFirstFrame) {\r\n        groupMatrix = groupTransform.mat;\r\n        groupMatrix.cloneFromProps(groupTransform.mProps.v.props);\r\n        groupTransform._matMdf = true;\r\n        props = parentTransform.mat.props;\r\n        groupMatrix.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function() {\r\n    var i, len = this.stylesList.length;\r\n    var j, jLen, k, kLen,elems,nodes, renderer = this.globalData.renderer, ctx = this.globalData.canvasContext, type, currentStyle;\r\n    for(i=0;i<len;i+=1){\r\n        currentStyle = this.stylesList[i];\r\n        type = currentStyle.type;\r\n        if((type === 'st' && currentStyle.wi === 0) || !currentStyle.data._render || currentStyle.coOp === 0){\r\n            continue;\r\n        }\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n        if(type === 'st'){\r\n            ctx.strokeStyle = currentStyle.co;\r\n            ctx.lineWidth = currentStyle.wi;\r\n            ctx.lineCap = currentStyle.lc;\r\n            ctx.lineJoin = currentStyle.lj;\r\n            ctx.miterLimit = currentStyle.ml || 0;\r\n        }else{\r\n            ctx.fillStyle = currentStyle.co;\r\n        }\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n        if(type !== 'st'){\r\n            ctx.beginPath();\r\n        }\r\n        jLen = elems.length;\r\n        for(j=0;j<jLen;j+=1){\r\n            if(type === 'st'){\r\n                ctx.beginPath();\r\n                if(currentStyle.da){\r\n                    ctx.setLineDash(currentStyle.da);\r\n                    ctx.lineDashOffset = currentStyle.do;\r\n                    this.globalData.isDashed = true;\r\n                }else if(this.globalData.isDashed){\r\n                    ctx.setLineDash(this.dashResetter);\r\n                    this.globalData.isDashed = false;\r\n                }\r\n            }\r\n            nodes = elems[j].trNodes;\r\n            kLen = nodes.length;\r\n\r\n            for(k=0;k<kLen;k+=1){\r\n                if(nodes[k].t == 'm'){\r\n                    ctx.moveTo(nodes[k].p[0],nodes[k].p[1]);\r\n                }else if(nodes[k].t == 'c'){\r\n                    ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5]);\r\n                }else{\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n            if(type === 'st'){\r\n                ctx.stroke();\r\n            }\r\n        }\r\n        if(type !== 'st'){\r\n            ctx.fill(currentStyle.r);\r\n        }\r\n        renderer.restore();\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function(parentTransform,items,data,isMain){\r\n    var i, len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n    for(i=len;i>=0;i-=1){\r\n        if(items[i].ty == 'tr'){\r\n            groupTransform = data[i].transform;\r\n            this.renderShapeTransform(parentTransform, groupTransform);\r\n        }else if(items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr'){\r\n            this.renderPath(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'fl'){\r\n            this.renderFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'st'){\r\n            this.renderStroke(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gr'){\r\n            this.renderShape(groupTransform,items[i].it,data[i].it);\r\n        }else if(items[i].ty == 'tm'){\r\n            //\r\n        }\r\n    }\r\n    if(isMain){\r\n        this.drawLayer();\r\n    }\r\n    \r\n};\r\nCVShapeElement.prototype.renderPath = function(pathData,itemData,groupTransform){\r\n    var len, i, j,jLen;\r\n    var redraw = groupTransform._matMdf || itemData.sh._mdf || this._isFirstFrame;\r\n    if(redraw) {\r\n        var paths = itemData.sh.paths, groupTransformMat = groupTransform.mat;\r\n        jLen = pathData._render === false ? 0 : paths._length;\r\n        var pathStringTransformed = itemData.trNodes;\r\n        pathStringTransformed.length = 0;\r\n        for(j=0;j<jLen;j+=1){\r\n            var pathNodes = paths.shapes[j];\r\n            if(pathNodes && pathNodes.v){\r\n                len = pathNodes._length;\r\n                for (i = 1; i < len; i += 1) {\r\n                    if (i == 1) {\r\n                        pathStringTransformed.push({\r\n                            t: 'm',\r\n                            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                        });\r\n                    }\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n                    });\r\n                }\r\n                if (len == 1) {\r\n                    pathStringTransformed.push({\r\n                        t: 'm',\r\n                        p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                }\r\n                if (pathNodes.c && len) {\r\n                    pathStringTransformed.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n                    });\r\n                    pathStringTransformed.push({\r\n                        t: 'z'\r\n                    });\r\n                }\r\n                itemData.lStr = pathStringTransformed;\r\n            }\r\n\r\n        }\r\n\r\n        if (itemData.st) {\r\n            for (i = 0; i < 16; i += 1) {\r\n                itemData.tr[i] = groupTransform.mat.props[i];\r\n            }\r\n        }\r\n        itemData.trNodes = pathStringTransformed;\r\n\r\n    }\r\n};\r\n\r\n\r\n\r\nCVShapeElement.prototype.renderFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if(d && (d._mdf  || this._isFirstFrame)){\r\n        styleElem.da = d.dashArray;\r\n        styleElem.do = d.dashoffset[0];\r\n    }\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n    if(itemData.w._mdf || this._isFirstFrame){\r\n        styleElem.wi = itemData.w.v;\r\n    }\r\n};\r\n\r\n\r\nCVShapeElement.prototype.destroy = function(){\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n};\r\n\r\n\nfunction CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function() {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n    //\r\n};\nfunction CVTextElement(data, globalData, comp){\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n        fill: 'rgba(0,0,0,0)',\r\n        stroke: 'rgba(0,0,0,0)',\r\n        sWidth: 0,\r\n        fValue: ''\r\n    };\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n    var hasFill = false;\r\n    if(documentData.fc) {\r\n        hasFill = true;\r\n        this.values.fill = this.buildColor(documentData.fc);\r\n    }else{\r\n        this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n    if(documentData.sc){\r\n        hasStroke = true;\r\n        this.values.stroke = this.buildColor(documentData.sc);\r\n        this.values.sWidth = documentData.sw;\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px '+ this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length;\r\n    //this.tHelper.font = this.values.fValue;\r\n    var charData, shapeData, k, kLen, shapes, j, jLen, pathNodes, commands, pathArr, singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var cnt = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = charData && charData.data || {};\r\n        matrixHelper.reset();\r\n        if(singleShape && letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n        }\r\n\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        jLen = shapes.length;\r\n        matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n        if(singleShape){\r\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        }\r\n        commands = createSizedArray(jLen);\r\n        for(j=0;j<jLen;j+=1){\r\n            kLen = shapes[j].ks.k.i.length;\r\n            pathNodes = shapes[j].ks.k;\r\n            pathArr = [];\r\n            for(k=1;k<kLen;k+=1){\r\n                if(k==1){\r\n                    pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n                }\r\n                pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));\r\n            }\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n            commands[j] = pathArr;\r\n        }\r\n        if(singleShape){\r\n            xPos += letters[i].l;\r\n            xPos += trackingOffset;\r\n        }\r\n        if(this.textSpans[cnt]){\r\n            this.textSpans[cnt].elem = commands;\r\n        } else {\r\n            this.textSpans[cnt] = {elem: commands};\r\n        }\r\n        cnt +=1;\r\n    }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function(){\r\n    var ctx = this.canvasContext;\r\n    var finalMat = this.finalTransform.mat.props;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var  i,len, j, jLen, k, kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null, lastStroke = null, lastStrokeW = null, commands, pathArr;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            continue;\r\n        }\r\n        renderedLetter = renderedLetters[i];\r\n        if(renderedLetter){\r\n            this.globalData.renderer.save();\r\n            this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n            this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n        if(this.fill){\r\n            if(renderedLetter && renderedLetter.fc){\r\n                if(lastFill !== renderedLetter.fc){\r\n                    lastFill = renderedLetter.fc;\r\n                    ctx.fillStyle = renderedLetter.fc;\r\n                }\r\n            }else if(lastFill !== this.values.fill){\r\n                lastFill = this.values.fill;\r\n                ctx.fillStyle = this.values.fill;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.fill();\r\n            ///ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n        if(this.stroke){\r\n            if(renderedLetter && renderedLetter.sw){\r\n                if(lastStrokeW !== renderedLetter.sw){\r\n                    lastStrokeW = renderedLetter.sw;\r\n                    ctx.lineWidth = renderedLetter.sw;\r\n                }\r\n            }else if(lastStrokeW !== this.values.sWidth){\r\n                lastStrokeW = this.values.sWidth;\r\n                ctx.lineWidth = this.values.sWidth;\r\n            }\r\n            if(renderedLetter && renderedLetter.sc){\r\n                if(lastStroke !== renderedLetter.sc){\r\n                    lastStroke = renderedLetter.sc;\r\n                    ctx.strokeStyle = renderedLetter.sc;\r\n                }\r\n            }else if(lastStroke !== this.values.stroke){\r\n                lastStroke = this.values.stroke;\r\n                ctx.strokeStyle = this.values.stroke;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.stroke();\r\n            ///ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n        if(renderedLetter) {\r\n            this.globalData.renderer.restore();\r\n        }\r\n    }\r\n    /*if(this.data.hasMask){\r\n     this.globalData.renderer.restore(true);\r\n     }*/\r\n};\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function(){};\nfunction HBaseElement(data,globalData,comp){}\r\nHBaseElement.prototype = {\r\n    checkBlendMode: function(){},\r\n    initRendererElement: function(){\r\n        this.baseElement = createTag(this.data.tg || 'div');\r\n        if(this.data.hasMask) {\r\n            this.svgElement = createNS('svg');\r\n            this.layerElement = createNS('g');\r\n            this.maskedElement = this.layerElement;\r\n            this.svgElement.appendChild(this.layerElement);\r\n            this.baseElement.appendChild(this.svgElement);\r\n        } else {\r\n            this.layerElement = this.baseElement;\r\n        }\r\n        styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function(){\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n        this.transformedElement = this.baseElement;\r\n        this.maskedElement = this.layerElement;\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id',this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n    },\r\n    renderElement: function() {\r\n        if(this.finalTransform._matMdf){\r\n            this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = this.finalTransform.mat.toCSS();\r\n        }\r\n        if(this.finalTransform._opMdf){\r\n            this.transformedElement.style.opacity = this.finalTransform.mProp.o.v;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        //If it is exported as hidden (data.hd === true) no need to render\r\n        //If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.layerElement = null;\r\n        this.transformedElement = null;\r\n        if(this.matteElement) {\r\n            this.matteElement = null;\r\n        }\r\n        if(this.maskManager) {\r\n            this.maskManager.destroy();\r\n            this.maskManager = null;\r\n        }\r\n    },\r\n    addMasks: function(){\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    setMatte: function(){}\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\nfunction HSolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function(){\r\n    var rect;\r\n    if(this.data.hasMask){\r\n        rect = createNS('rect');\r\n        rect.setAttribute('width',this.data.sw);\r\n        rect.setAttribute('height',this.data.sh);\r\n        rect.setAttribute('fill',this.data.sc);\r\n        this.svgElement.setAttribute('width',this.data.sw);\r\n        this.svgElement.setAttribute('height',this.data.sh);\r\n    } else {\r\n        rect = createTag('div');\r\n        rect.style.width = this.data.sw + 'px';\r\n        rect.style.height = this.data.sh + 'px';\r\n        rect.style.backgroundColor = this.data.sc;\r\n    }\r\n    this.layerElement.appendChild(rect);\r\n};\r\n\nfunction HCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function(){\r\n    this._createBaseContainerElements();\r\n    //divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n    if(this.data.hasMask){\r\n        this.svgElement.setAttribute('width',this.data.w);\r\n        this.svgElement.setAttribute('height',this.data.h);\r\n        this.transformedElement = this.baseElement;\r\n    } else {\r\n        this.transformedElement = this.layerElement;\r\n    }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function(elem,pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n    while(j<pos){\r\n        if(this.elements[j] && this.elements[j].getBaseElement){\r\n            nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(elem);\r\n    }\r\n}\r\n\nfunction HShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n}\r\nextendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function(){\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n    if (this.data.hasMask) {\r\n        this.layerElement.appendChild(this.shapesContainer);\r\n        cont = this.svgElement;\r\n    } else {\r\n        cont = createNS('svg');\r\n        var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n        cont.setAttribute('width',size.w);\r\n        cont.setAttribute('height',size.h);\r\n        cont.appendChild(this.shapesContainer);\r\n        this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0, [], true);\r\n    this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function(transformers, point) {\r\n    var i, len = transformers.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n    return point;\r\n}\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function(item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i, len = shape._length, vPoint, oPoint, nextIPoint, nextVPoint, bounds;\r\n    if (len <= 1) {\r\n        return;\r\n    }\r\n    for (i = 0; i < len - 1; i += 1) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n    if(shape.c) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.checkBounds = function(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bm_min(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bm_max(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bm_min(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bm_max(bounds.bottom, boundingBox.yMax);\r\n}\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n    left:0,\r\n    right:0,\r\n    top:0,\r\n    bottom:0,\r\n}\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n    x:0,\r\n    xMax:0,\r\n    y:0,\r\n    yMax:0,\r\n    width:0,\r\n    height:0\r\n}\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function(p0, p1, p2, p3) {\r\n\r\n    var bounds = [[p0[0],p3[0]], [p0[1],p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n\r\n      b = b | 0;\r\n      a = a | 0;\r\n      c = c | 0;\r\n\r\n      if (a === 0) {\r\n\r\n        if (b === 0) {\r\n          continue;\r\n        }\r\n\r\n        t = -c / b;\r\n\r\n        if (0 < t && t < 1) {\r\n          bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i));\r\n        }\r\n        continue;\r\n      }\r\n\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac < 0) {\r\n        continue;\r\n      }\r\n\r\n      t1 = (-b + bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t1 && t1 < 1) bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i));\r\n\r\n      t2 = (-b - bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t2 && t2 < 1) bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i));\r\n\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bm_min.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bm_min.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bm_max.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bm_max.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function(t, p0, p1, p2, p3, i) {\r\n    return bm_pow(1-t, 3) * p0[i]\r\n        + 3 * bm_pow(1-t, 2) * t * p1[i]\r\n        + 3 * (1-t) * bm_pow(t, 2) * p2[i]\r\n        + bm_pow(t, 3) * p3[i];\r\n  }\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function(itemsData, boundingBox) {\r\n    var i, len = itemsData.length, path;\r\n    for(i = 0; i < len; i += 1) {\r\n        if(itemsData[i] && itemsData[i].sh) {\r\n            this.calculateShapeBoundingBox(itemsData[i], boundingBox)\r\n        } else if(itemsData[i] && itemsData[i].it) {\r\n            this.calculateBoundingBox(itemsData[i].it, boundingBox)\r\n        }\r\n    }\r\n}\r\n\r\nHShapeElement.prototype.renderInnerContent = function() {\r\n    this._renderShapeFrame();\r\n\r\n    if(!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n        var tempBoundingBox = this.tempBoundingBox;\r\n        var max = 999999;\r\n        tempBoundingBox.x = max;\r\n        tempBoundingBox.xMax = -max;\r\n        tempBoundingBox.y = max;\r\n        tempBoundingBox.yMax = -max;\r\n        this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n        tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n        tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n        //var tempBoundingBox = this.shapeCont.getBBox();\r\n        var changed = false;\r\n        if(this.currentBBox.w !== tempBoundingBox.width){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.shapeCont.setAttribute('width',tempBoundingBox.width);\r\n            changed = true;\r\n        }\r\n        if(this.currentBBox.h !== tempBoundingBox.height){\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.shapeCont.setAttribute('height',tempBoundingBox.height);\r\n            changed = true;\r\n        }\r\n        if(changed  || this.currentBBox.x !== tempBoundingBox.x  || this.currentBBox.y !== tempBoundingBox.y){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.currentBBox.x = tempBoundingBox.x;\r\n            this.currentBBox.y = tempBoundingBox.y;\r\n\r\n            this.shapeCont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n\r\n};\nfunction HTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data,globalData,comp);\r\n\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function(){\r\n    this.isMasked = this.checkMasks();\r\n    if(this.isMasked){\r\n        this.renderType = 'svg';\r\n        this.compW = this.comp.data.w;\r\n        this.compH = this.comp.data.h;\r\n        this.svgElement.setAttribute('width',this.compW);\r\n        this.svgElement.setAttribute('height',this.compH);\r\n        var g = createNS('g');\r\n        this.maskedElement.appendChild(g);\r\n        this.innerElem = g;\r\n    } else {\r\n        this.renderType = 'html';\r\n        this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    if(documentData.sc){\r\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n        innerElemStyle.strokeWidth = documentData.sw+'px';\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(!this.globalData.fontManager.chars){\r\n        innerElemStyle.fontSize = documentData.finalSize+'px';\r\n        innerElemStyle.lineHeight = documentData.finalSize+'px';\r\n        if(fontData.fClass){\r\n            this.innerElem.className = fontData.fClass;\r\n        } else {\r\n            innerElemStyle.fontFamily = fontData.fFamily;\r\n            var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n            innerElemStyle.fontStyle = fStyle;\r\n            innerElemStyle.fontWeight = fWeight;\r\n        }\r\n    }\r\n    var i, len;\r\n\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan,tParent,tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '';\r\n    var cnt = 0;\r\n    for (i = 0;i < len ;i += 1) {\r\n        if(this.globalData.fontManager.chars){\r\n            if(!this.textPaths[cnt]){\r\n                tSpan = createNS('path');\r\n                tSpan.setAttribute('stroke-linecap', 'butt');\r\n                tSpan.setAttribute('stroke-linejoin','round');\r\n                tSpan.setAttribute('stroke-miterlimit','4');\r\n            } else {\r\n                tSpan = this.textPaths[cnt];\r\n            }\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tCont = tParent.children[0];\r\n                } else {\r\n\r\n                    tParent = createTag('div');\r\n                    tCont = createNS('svg');\r\n                    tCont.appendChild(tSpan);\r\n                    styleDiv(tParent);\r\n                }\r\n            }\r\n        }else{\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tSpan = this.textPaths[cnt];\r\n                } else {\r\n                    tParent = createTag('span');\r\n                    styleDiv(tParent);\r\n                    tSpan = createTag('span');\r\n                    styleDiv(tSpan);\r\n                    tParent.appendChild(tSpan);\r\n                }\r\n            } else {\r\n                tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n            }\r\n        }\r\n        //tSpan.setAttribute('visibility', 'hidden');\r\n        if(this.globalData.fontManager.chars){\r\n            var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n            var shapeData;\r\n            if(charData){\r\n                shapeData = charData.data;\r\n            } else {\r\n                shapeData = null;\r\n            }\r\n            matrixHelper.reset();\r\n            if(shapeData && shapeData.shapes){\r\n                shapes = shapeData.shapes[0].it;\r\n                matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n                shapeStr = this.createPathShape(matrixHelper,shapes);\r\n                tSpan.setAttribute('d',shapeStr);\r\n            }\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                if(shapeData && shapeData.shapes){\r\n\r\n                    //document.body.appendChild is needed to get exact measure of shape\r\n                    document.body.appendChild(tCont);\r\n                    var boundingBox = tCont.getBBox();\r\n                    tCont.setAttribute('width',boundingBox.width + 2);\r\n                    tCont.setAttribute('height',boundingBox.height + 2);\r\n                    tCont.setAttribute('viewBox',(boundingBox.x-1)+' '+ (boundingBox.y-1)+' '+ (boundingBox.width+2)+' '+ (boundingBox.height+2));\r\n                    tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x-1) + 'px,' + (boundingBox.y-1) + 'px)';\r\n\r\n                    letters[i].yOffset = boundingBox.y-1;\r\n\r\n                } else{\r\n                    tCont.setAttribute('width',1);\r\n                    tCont.setAttribute('height',1);\r\n                }\r\n                    tParent.appendChild(tCont);\r\n            }else{\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }else{\r\n            tSpan.textContent = letters[i].val;\r\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                //\r\n                tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,'+ -documentData.finalSize/1.2+'px,0)';\r\n            } else {\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }\r\n        //\r\n        if(!this.isMasked){\r\n            this.textSpans[cnt] = tParent;\r\n        }else{\r\n            this.textSpans[cnt] = tSpan;\r\n        }\r\n        this.textSpans[cnt].style.display = 'block';\r\n        this.textPaths[cnt] = tSpan;\r\n        cnt += 1;\r\n    }\r\n    while(cnt < this.textSpans.length){\r\n        this.textSpans[cnt].style.display = 'none';\r\n        cnt += 1;\r\n    }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function() {\r\n\r\n    if(this.data.singleShape){\r\n        if(!this._isFirstFrame && !this.lettersChangedFlag){\r\n            return;\r\n        } else {\r\n            // Todo Benchmark if using this is better than getBBox\r\n             if(this.isMasked && this.finalTransform._matMdf){\r\n                 this.svgElement.setAttribute('viewBox',-this.finalTransform.mProp.p.v[0]+' '+ -this.finalTransform.mProp.p.v[1]+' '+this.compW+' '+this.compH);\r\n                this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n             }\r\n        }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if(!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag){\r\n        return;\r\n    }\r\n    var  i,len, count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter, textSpan, textPath;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            count += 1;\r\n            continue;\r\n        }\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n        if(renderedLetter._mdf.m) {\r\n            if(!this.isMasked){\r\n                textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\r\n            }else{\r\n                textSpan.setAttribute('transform',renderedLetter.m);\r\n            }\r\n        }\r\n        ////textSpan.setAttribute('opacity',renderedLetter.o);\r\n        textSpan.style.opacity = renderedLetter.o;\r\n        if(renderedLetter.sw && renderedLetter._mdf.sw){\r\n            textPath.setAttribute('stroke-width',renderedLetter.sw);\r\n        }\r\n        if(renderedLetter.sc && renderedLetter._mdf.sc){\r\n            textPath.setAttribute('stroke',renderedLetter.sc);\r\n        }\r\n        if(renderedLetter.fc && renderedLetter._mdf.fc){\r\n            textPath.setAttribute('fill',renderedLetter.fc);\r\n            textPath.style.color = renderedLetter.fc;\r\n        }\r\n    }\r\n\r\n    if(this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)){\r\n        var boundingBox = this.innerElem.getBBox();\r\n\r\n        if(this.currentBBox.w !== boundingBox.width){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.svgElement.setAttribute('width',boundingBox.width);\r\n        }\r\n        if(this.currentBBox.h !== boundingBox.height){\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.svgElement.setAttribute('height',boundingBox.height);\r\n        }\r\n\r\n        var margin = 1;\r\n        if(this.currentBBox.w !== (boundingBox.width + margin*2) || this.currentBBox.h !== (boundingBox.height + margin*2)  || this.currentBBox.x !== (boundingBox.x - margin)  || this.currentBBox.y !== (boundingBox.y - margin)){\r\n            this.currentBBox.w = boundingBox.width + margin*2;\r\n            this.currentBBox.h = boundingBox.height + margin*2;\r\n            this.currentBBox.x = boundingBox.x - margin;\r\n            this.currentBBox.y = boundingBox.y - margin;\r\n\r\n            this.svgElement.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n};\nfunction HImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement], HImageElement);\r\n\r\n\r\nHImageElement.prototype.createContent = function(){\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if(this.data.hasMask){\r\n        this.imageElem = createNS('image');\r\n        this.imageElem.setAttribute('width',this.assetData.w+\"px\");\r\n        this.imageElem.setAttribute('height',this.assetData.h+\"px\");\r\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n        this.layerElement.appendChild(this.imageElem);\r\n        this.baseElement.setAttribute('width',this.assetData.w);\r\n        this.baseElement.setAttribute('height',this.assetData.h);\r\n    } else {\r\n        this.layerElement.appendChild(img);\r\n    }\r\n    img.src = assetPath;\r\n    if(this.data.ln){\r\n        this.baseElement.setAttribute('id',this.data.ln);\r\n    }\r\n};\nfunction HCameraElement(data,globalData,comp){\r\n    this.initFrame();\r\n    this.initBaseData(data,globalData,comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this,data.pe,0,0,this);\r\n    if(data.ks.p.s){\r\n        this.px = getProp(this,data.ks.p.x,1,0,this);\r\n        this.py = getProp(this,data.ks.p.y,1,0,this);\r\n        this.pz = getProp(this,data.ks.p.z,1,0,this);\r\n    }else{\r\n        this.p = getProp(this,data.ks.p,1,0,this);\r\n    }\r\n    if(data.ks.a){\r\n        this.a = getProp(this,data.ks.a,1,0,this);\r\n    }\r\n    if(data.ks.or.k.length && data.ks.or.k[0].to){\r\n        var i,len = data.ks.or.k.length;\r\n        for(i=0;i<len;i+=1){\r\n            data.ks.or.k[i].to = null;\r\n            data.ks.or.k[i].ti = null;\r\n        }\r\n    }\r\n    this.or = getProp(this,data.ks.or,1,degToRads,this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this,data.ks.rx,0,degToRads,this);\r\n    this.ry = getProp(this,data.ks.ry,0,degToRads,this);\r\n    this.rz = getProp(this,data.ks.rz,0,degToRads,this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true;\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function() {\r\n    var i, len = this.comp.threeDElements.length, comp;\r\n    for(i=0;i<len;i+=1){\r\n        //[perspectiveElem,container]\r\n        comp = this.comp.threeDElements[i];\r\n        if(comp.type === '3d') {\r\n            comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n            comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\r\n            comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        }\r\n    }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function(){\r\n};\r\n\r\nHCameraElement.prototype.hide = function(){\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function(){\r\n    var _mdf = this._isFirstFrame;\r\n    var i, len;\r\n    if(this.hierarchy){\r\n        len = this.hierarchy.length;\r\n        for(i=0;i<len;i+=1){\r\n            _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n        }\r\n    }\r\n    if(_mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n        this.mat.reset();\r\n\r\n        if(this.hierarchy){\r\n            var mat;\r\n            len = this.hierarchy.length - 1;\r\n            for (i = len; i >= 0; i -= 1) {\r\n                /*mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                console.log(mat)\r\n                this.mat.transform(-mat[0],-mat[1],-mat[2],-mat[3],-mat[4],-mat[5],-mat[6],-mat[7],-mat[8],-mat[9],-mat[10],-mat[11],-mat[12],-mat[13],-mat[14],mat[15]);\r\n                console.log(this.mat.props)*/\r\n                var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n                this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]);\r\n                this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n                this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]);\r\n                this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2]);\r\n            }\r\n        }\r\n\r\n        if(this.p){\r\n            this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]);\r\n        }else{\r\n            this.mat.translate(-this.px.v,-this.py.v,this.pz.v);\r\n        }\r\n        if(this.a){\r\n            var diffVector = [this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];\r\n            var mag = Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));\r\n            //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n            var lookDir = [diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];\r\n            var lookLengthOnXZ = Math.sqrt( lookDir[2]*lookDir[2] + lookDir[0]*lookDir[0] );\r\n            var m_rotationX = (Math.atan2( lookDir[1], lookLengthOnXZ ));\r\n            var m_rotationY = (Math.atan2( lookDir[0], -lookDir[2]));\r\n            this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\r\n\r\n        }\r\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n        this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);\r\n        this.mat.translate(0,0,this.pe.v);\r\n\r\n\r\n        \r\n\r\n\r\n        if(!this._prevMat.equals(this.mat) && this.comp.threeDElements) {\r\n            len = this.comp.threeDElements.length;\r\n            var comp;\r\n            for(i=0;i<len;i+=1){\r\n                comp = this.comp.threeDElements[i];\r\n                if(comp.type === '3d') {\r\n                    comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\r\n                }\r\n            }\r\n            this.mat.clone(this._prevMat);\r\n        }\r\n    }\r\n    this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function(){\r\n};\r\nHCameraElement.prototype.initExpressions = function(){};\r\nHCameraElement.prototype.getBaseElement = function(){return null;};\nfunction HEffects() {\r\n}\r\nHEffects.prototype.renderFrame = function(){};\nvar Expressions = (function(){\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n\r\n    function initExpressions(animation){\r\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    }\r\n   return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\nvar ExpressionManager = (function(){\r\n    'use strict';\r\n    var ob = {};\r\n    var Math = BMMath;\r\n    var window = null;\r\n    var document = null;\r\n\r\n    function duplicatePropertyValue(value, mult) {\r\n        mult = mult || 1;\r\n\r\n        if (typeof value === 'number'  || value instanceof Number) {\r\n            return value * mult;\r\n        } else if(value.i) {\r\n            return shape_pool.clone(value);\r\n        } else {\r\n            var arr = createTypedArray('float32', value.length);\r\n            var i, len = value.length;\r\n            for (i = 0; i < len; i += 1) {\r\n                arr[i] = value[i] * mult;\r\n            }\r\n            return arr;\r\n        }\r\n    }\r\n\r\n    function isTypeOfArray(arr) {\r\n        return arr.constructor === Array || arr.constructor === Float32Array;\r\n    }\r\n\r\n    function $bm_neg(a){\r\n        var tOfA = typeof a;\r\n        if(tOfA === 'number' || tOfA === 'boolean'  || a instanceof Number ){\r\n            return -a;\r\n        }\r\n        if(isTypeOfArray(a)){\r\n            var i, lenA = a.length;\r\n            var retArr = [];\r\n            for(i=0;i<lenA;i+=1){\r\n                retArr[i] = -a[i];\r\n            }\r\n            return retArr;\r\n        }\r\n    }\r\n\r\n    function sum(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if(tOfA === 'string' || tOfB === 'string'){\r\n            return a + b;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string'  || b instanceof Number)) {\r\n            return a + b;\r\n        }\r\n        if(isTypeOfArray(a) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            a = a.slice(0);\r\n            a[0] = a[0] + b;\r\n            return a;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && isTypeOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a + b[0];\r\n            return b;\r\n        }\r\n        if(isTypeOfArray(a) && isTypeOfArray(b)){\r\n            \r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] + b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n    var add = sum;\r\n\r\n    function sub(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            if(tOfA === 'string') {\r\n                a = parseInt(a);\r\n            }\r\n            if(tOfB === 'string') {\r\n                b = parseInt(b);\r\n            }\r\n            return a - b;\r\n        }\r\n        if( isTypeOfArray(a) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            a = a.slice(0);\r\n            a[0] = a[0] - b;\r\n            return a;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) &&  isTypeOfArray(b)){\r\n            b = b.slice(0);\r\n            b[0] = a - b[0];\r\n            return b;\r\n        }\r\n        if(isTypeOfArray(a) && isTypeOfArray(b)){\r\n            var i = 0, lenA = a.length, lenB = b.length;\r\n            var retArr = [];\r\n            while(i<lenA || i < lenB){\r\n                if((typeof a[i] === 'number' || a[i] instanceof Number) && typeof (typeof b[i] === 'number' || b[i] instanceof Number)){\r\n                    retArr[i] = a[i] - b[i];\r\n                }else{\r\n                    retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n                }\r\n                i += 1;\r\n            }\r\n            return retArr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function mul(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            return a * b;\r\n        }\r\n\r\n        var i, len;\r\n        if(isTypeOfArray(a) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] * b;\r\n            }\r\n            return arr;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && isTypeOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a * b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    function div(a,b) {\r\n        var tOfA = typeof a;\r\n        var tOfB = typeof b;\r\n        var arr;\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number )) {\r\n            return a / b;\r\n        }\r\n        var i, len;\r\n        if(isTypeOfArray(a) && (tOfB === 'number' || tOfB === 'boolean' || tOfB === 'string' || b instanceof Number  )){\r\n            len = a.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a[i] / b;\r\n            }\r\n            return arr;\r\n        }\r\n        if((tOfA === 'number' || tOfA === 'boolean' || tOfA === 'string' || a instanceof Number ) && isTypeOfArray(b)){\r\n            len = b.length;\r\n            arr = createTypedArray('float32', len);\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = a / b[i];\r\n            }\r\n            return arr;\r\n        }\r\n        return 0;\r\n    }\r\n    function mod(a,b) {\r\n        if(typeof a === 'string') {\r\n            a = parseInt(a);\r\n        }\r\n        if(typeof b === 'string') {\r\n            b = parseInt(b);\r\n        }\r\n        return a % b;\r\n    }\r\n\r\n    function clamp(num, min, max) {\r\n        if(min > max){\r\n            var mm = max;\r\n            max = min;\r\n            min = mm;\r\n        }\r\n        return Math.min(Math.max(num, min), max);\r\n    }\r\n\r\n    function radiansToDegrees(val) {\r\n        return val/degToRads;\r\n    }\r\n    var radians_to_degrees = radiansToDegrees;\r\n\r\n    function degreesToRadians(val) {\r\n        return val*degToRads;\r\n    }\r\n    var degrees_to_radians = radiansToDegrees;\r\n\r\n    var helperLengthArray = [0,0,0,0,0,0];\r\n\r\n    function length(arr1, arr2) {\r\n        if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n            arr2 = arr2 || 0;\r\n            return Math.abs(arr1 - arr2);\r\n        }\r\n        if(!arr2) {\r\n            arr2 = helperLengthArray;\r\n        }\r\n        var i, len = Math.min(arr1.length, arr2.length);\r\n        var addedLength = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n            addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n        }\r\n        return Math.sqrt(addedLength);\r\n    }\r\n\r\n    function normalize(vec) {\r\n        return div(vec, length(vec));\r\n    }\r\n\r\n    function rgbToHsl(val) {\r\n        var r = val[0]; var g = val[1]; var b = val[2];\r\n        var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min){\r\n            h = s = 0; // achromatic\r\n        }else{\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max){\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n\r\n        return [h, s, l,val[3]];\r\n    }\r\n\r\n    function hue2rgb(p, q, t){\r\n        if(t < 0) t += 1;\r\n        if(t > 1) t -= 1;\r\n        if(t < 1/6) return p + (q - p) * 6 * t;\r\n        if(t < 1/2) return q;\r\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n        return p;\r\n    }\r\n\r\n    function hslToRgb(val){\r\n        var h = val[0];\r\n        var s = val[1];\r\n        var l = val[2];\r\n\r\n        var r, g, b;\r\n\r\n        if(s === 0){\r\n            r = g = b = l; // achromatic\r\n        }else{\r\n\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return [r, g , b, val[3]];\r\n    }\r\n\r\n    function linear(t, tMin, tMax, value1, value2){\r\n        if(value1 === undefined || value2 === undefined){\r\n            return linear(t,0,1,tMin,tMax);\r\n        }\r\n        if(t <= tMin) {\r\n            return value1;\r\n        }else if(t >= tMax){\r\n            return value2;\r\n        }\r\n        var perc = tMax === tMin ? 0 : (t-tMin)/(tMax-tMin);\r\n        if(!value1.length){\r\n            return value1 + (value2-value1)*perc;\r\n        }\r\n        var i, len = value1.length;\r\n        var arr = createTypedArray('float32', len);\r\n        for(i=0;i<len;i+=1){\r\n            arr[i] = value1[i] + (value2[i]-value1[i])*perc;\r\n        }\r\n        return arr;\r\n    }\r\n    function random(min,max){\r\n        if(max === undefined){\r\n            if(min === undefined){\r\n                min = 0;\r\n                max = 1;\r\n            } else {\r\n                max = min;\r\n                min = undefined;\r\n            }\r\n        }\r\n        if(max.length){\r\n            var i, len = max.length;\r\n            if(!min){\r\n                min = createTypedArray('float32', len);\r\n            }\r\n            var arr = createTypedArray('float32', len);\r\n            var rnd = BMMath.random();\r\n            for(i=0;i<len;i+=1){\r\n                arr[i] = min[i] + rnd*(max[i]-min[i]);\r\n            }\r\n            return arr;\r\n        }\r\n        if(min === undefined){\r\n            min = 0;\r\n        }\r\n        var rndm = BMMath.random();\r\n        return min + rndm*(max-min);\r\n    }\r\n\r\n    function createPath(points, inTangents, outTangents, closed) {\r\n        var i, len = points.length;\r\n        var path = shape_pool.newElement();\r\n        path.setPathData(!!closed, len);\r\n        var arrPlaceholder = [0,0], inVertexPoint, outVertexPoint;\r\n        for(i = 0; i < len; i += 1) {\r\n            inVertexPoint = inTangents ? inTangents[i] : arrPlaceholder;\r\n            outVertexPoint = outTangents ? outTangents[i] : arrPlaceholder;\r\n            path.setTripleAt(points[i][0],points[i][1],outVertexPoint[0] + points[i][0],outVertexPoint[1] + points[i][1],inVertexPoint[0] + points[i][0],inVertexPoint[1] + points[i][1],i,true);\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function initiateExpression(elem,data,property){\r\n        var val = data.x;\r\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n        var _needsRandom = val.indexOf('random') !== -1;\r\n        var elemType = elem.data.ty;\r\n        var transform,content,effect;\r\n        var thisProperty = property;\r\n        elem.comp.frameDuration = 1/elem.comp.globalData.frameRate;\r\n        var inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        var outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        var width = elem.data.sw ? elem.data.sw : 0;\r\n        var height = elem.data.sh ? elem.data.sh : 0;\r\n        var loopIn, loop_in, loopOut, loop_out;\r\n        var toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime;\r\n\r\n        var scoped_bm_rt;\r\n        var expression_function = eval('[function _expression_function(){' + val+';scoped_bm_rt=$bm_rt}' + ']')[0];\r\n        var numKeys = property.kf ? data.k.length : 0;\r\n\r\n        var wiggle = function wiggle(freq,amp){\r\n            var i,j, len = this.pv.length ? this.pv.length : 1;\r\n            var addedAmps = createTypedArray('float32', len);\r\n            freq = 5;\r\n            var iterations = Math.floor(time*freq);\r\n            i = 0;\r\n            j = 0;\r\n            while(i<iterations){\r\n                //var rnd = BMMath.random();\r\n                for(j=0;j<len;j+=1){\r\n                    addedAmps[j] += -amp + amp*2*BMMath.random();\r\n                    //addedAmps[j] += -amp + amp*2*rnd;\r\n                }\r\n                i += 1;\r\n            }\r\n            //var rnd2 = BMMath.random();\r\n            var periods = time*freq;\r\n            var perc = periods - Math.floor(periods);\r\n            var arr = createTypedArray('float32', len);\r\n            if(len>1){\r\n                for(j=0;j<len;j+=1){\r\n                    arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*BMMath.random())*perc;\r\n                    //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n                    //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n                }\r\n                return arr;\r\n            } else {\r\n                return this.pv + addedAmps[0] + (-amp + amp*2*BMMath.random())*perc;\r\n            }\r\n        }.bind(this);\r\n\r\n        if(thisProperty.loopIn) {\r\n            loopIn = thisProperty.loopIn.bind(thisProperty);\r\n            loop_in = loopIn;\r\n        }\r\n\r\n        if(thisProperty.loopOut) {\r\n            loopOut = thisProperty.loopOut.bind(thisProperty);\r\n            loop_out = loopOut;\r\n        }\r\n\r\n        function loopInDuration(type,duration){\r\n            return loopIn(type,duration,true);\r\n        }\r\n\r\n        function loopOutDuration(type,duration){\r\n            return loopOut(type,duration,true);\r\n        }\r\n\r\n        if(this.getValueAtTime) {\r\n            valueAtTime = this.getValueAtTime.bind(this);\r\n        }\r\n\r\n        if(this.getVelocityAtTime) {\r\n            velocityAtTime = this.getVelocityAtTime.bind(this);\r\n        }\r\n\r\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n        function lookAt(elem1,elem2){\r\n            var fVec = [elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]];\r\n            var pitch = Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;\r\n            var yaw = -Math.atan2(fVec[1],fVec[2])/degToRads;\r\n            return [yaw,pitch,0];\r\n        }\r\n\r\n        function easeOut(t, tMin, tMax, val1, val2){\r\n            if(val1 === undefined){\r\n                val1 = tMin;\r\n                val2 = tMax;\r\n            } else {\r\n                t = (t - tMin) / (tMax - tMin);\r\n            }\r\n            return -(val2-val1) * t*(t-2) + val1;\r\n        }\r\n\r\n        function easeIn(t, tMin, tMax, val1, val2){\r\n            if(val1 === undefined){\r\n                val1 = tMin;\r\n                val2 = tMax;\r\n            } else {\r\n                t = (t - tMin) / (tMax - tMin);\r\n            }\r\n            return (val2-val1)*t*t + val1;\r\n        }\r\n\r\n        function nearestKey(time){\r\n            var i, len = data.k.length,index,keyTime;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                index = 0;\r\n                keyTime = 0;\r\n            } else {\r\n                index = -1;\r\n                time *= elem.comp.globalData.frameRate;\r\n                if (time < data.k[0].t) {\r\n                    index = 1;\r\n                    keyTime = data.k[0].t;\r\n                } else {\r\n                    for(i=0;i<len-1;i+=1){\r\n                        if(time === data.k[i].t){\r\n                            index = i + 1;\r\n                            keyTime = data.k[i].t;\r\n                            break;\r\n                        }else if(time>data.k[i].t && time<data.k[i+1].t){\r\n                            if(time-data.k[i].t > data.k[i+1].t - time){\r\n                                index = i + 2;\r\n                                keyTime = data.k[i+1].t;\r\n                            } else {\r\n                                index = i + 1;\r\n                                keyTime = data.k[i].t;\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(index === -1){\r\n                        index = i + 1;\r\n                        keyTime = data.k[i].t;\r\n                    }\r\n                }\r\n                \r\n            }\r\n            var ob = {};\r\n            ob.index = index;\r\n            ob.time = keyTime/elem.comp.globalData.frameRate;\r\n            return ob;\r\n        }\r\n\r\n        function key(ind){\r\n            var ob, i, len;\r\n            if(!data.k.length || typeof(data.k[0]) === 'number'){\r\n                throw new Error('The property has no keyframe at index ' + ind);\r\n            }\r\n            ind -= 1;\r\n            ob = {\r\n                time: data.k[ind].t/elem.comp.globalData.frameRate\r\n            };\r\n            var arr;\r\n            if(ind === data.k.length - 1 && !data.k[ind].h){\r\n                arr = data.k[ind-1].e;\r\n            }else{\r\n                arr = data.k[ind].s;\r\n            }\r\n            len = arr.length;\r\n            for(i=0;i<len;i+=1){\r\n                ob[i] = arr[i];\r\n            }\r\n            return ob;\r\n        }\r\n\r\n        function framesToTime(frames, fps) { \r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return frames / fps;\r\n        }\r\n\r\n        function timeToFrames(t, fps) {\r\n            if (!t && t !== 0) {\r\n                t = time;\r\n            }\r\n            if (!fps) {\r\n                fps = elem.comp.globalData.frameRate;\r\n            }\r\n            return t * fps;\r\n        }\r\n\r\n        function seedRandom(seed){\r\n            BMMath.seedrandom(randSeed + seed);\r\n        }\r\n\r\n        function sourceRectAtTime() {\r\n            return elem.sourceRectAtTime();\r\n        }\r\n\r\n        var time, velocity, value, textIndex, textTotal, selectorValue;\r\n        var index = elem.data.ind;\r\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n        var parent;\r\n        var randSeed = Math.floor(Math.random()*1000000);\r\n        function executeExpression(_value) {\r\n            value = _value;\r\n            if (_needsRandom) {\r\n                seedRandom(randSeed);\r\n            }\r\n            if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n                return value;\r\n            }\r\n            if(this.propType === 'textSelector'){\r\n                textIndex = this.textIndex;\r\n                textTotal = this.textTotal;\r\n                selectorValue = this.selectorValue;\r\n            }\r\n            if (!thisLayer) {\r\n                thisLayer = elem.layerInterface;\r\n                thisComp = elem.comp.compInterface;\r\n                toWorld = thisLayer.toWorld.bind(thisLayer);\r\n                fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n                fromComp = thisLayer.fromComp.bind(thisLayer);\r\n                mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n                fromCompToSurface = fromComp;\r\n            }\r\n            if (!transform) {\r\n                transform = elem.layerInterface(\"ADBE Transform Group\");\r\n                anchorPoint = transform.anchorPoint;\r\n            }\r\n            \r\n            if (elemType === 4 && !content) {\r\n                content = thisLayer(\"ADBE Root Vectors Group\");\r\n            }\r\n            if (!effect) {\r\n                effect = thisLayer(4);\r\n            }\r\n            hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n            if (hasParent && !parent) {\r\n                parent = elem.hierarchy[0].layerInterface;\r\n            }\r\n            time = this.comp.renderedFrame/this.comp.globalData.frameRate;\r\n            if (needsVelocity) {\r\n                velocity = velocityAtTime(time);\r\n            }\r\n            expression_function();\r\n            this.frameExpressionId = elem.globalData.frameId;\r\n\r\n            //TODO: Check if it's possible to return on ShapeInterface the .v value\r\n            if (scoped_bm_rt.propType === \"shape\") {\r\n                scoped_bm_rt = shape_pool.clone(scoped_bm_rt.v);\r\n            }\r\n            return scoped_bm_rt;\r\n        }\r\n        return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    return ob;\r\n}());\n(function addPropertyDecorator() {\r\n\r\n    function getStaticValueAtTime() {\r\n        return this.pv;\r\n    }\r\n\r\n    function loopOut(type,duration,durationFlag){\r\n        if(!this.k || !this.keyframes){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n        if(currentFrame<=lastKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, firstKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,lastKeyFrame - this.elem.data.ip);\r\n                } else {\r\n                    cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate*duration);\r\n                }\r\n                firstKeyFrame = lastKeyFrame - cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(iterations % 2 !== 0){\r\n                    return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = (endV[i]-initV[i])*repeats + current[i];\r\n                    }\r\n                    return ret;\r\n                }\r\n                return (endV-initV)*repeats + current;\r\n            } else if(type === 'continue'){\r\n                var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(lastValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = lastValue[i] + (lastValue[i]-nextLastValue[i])*((currentFrame - lastKeyFrame)/ this.comp.globalData.frameRate)/0.0005;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return lastValue + (lastValue-nextLastValue)*(((currentFrame - lastKeyFrame))/0.001);\r\n            }\r\n            return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function loopIn(type,duration, durationFlag) {\r\n        if(!this.k){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var firstKeyFrame = keyframes[0].t;\r\n        if(currentFrame>=firstKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, lastKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                lastKeyFrame = keyframes[duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,this.elem.data.op - firstKeyFrame);\r\n                } else {\r\n                    cycleDuration = Math.abs(elem.comp.globalData.frameRate*duration);\r\n                }\r\n                lastKeyFrame = firstKeyFrame + cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((firstKeyFrame - currentFrame)/cycleDuration);\r\n                if(iterations % 2 === 0){\r\n                    return this.getValueAtTime((((firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((firstKeyFrame - currentFrame)/cycleDuration)+1;\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = current[i]-(endV[i]-initV[i])*repeats;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return current-(endV-initV)*repeats;\r\n            } else if(type === 'continue'){\r\n                var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(firstValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = firstValue[i] + (firstValue[i]-nextFirstValue[i])*(firstKeyFrame - currentFrame)/0.001;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return firstValue + (firstValue-nextFirstValue)*(firstKeyFrame - currentFrame)/0.001;\r\n            }\r\n            return this.getValueAtTime(((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            frameNum -= this.offsetTime;\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n            this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n        if(this.vel !== undefined){\r\n            return this.vel;\r\n        }\r\n        var delta = -0.01;\r\n        //frameNum += this.elem.data.st;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var velocity;\r\n        if(v1.length){\r\n            velocity = createTypedArray('float32', v1.length);\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                //removing frameRate\r\n                //if needed, don't add it here\r\n                //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n                velocity[i] = (v2[i] - v1[i])/delta;\r\n            }\r\n        } else {\r\n            velocity = (v2 - v1)/delta;\r\n        }\r\n        return velocity;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup){\r\n        this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n    function searchExpressions(elem,data,prop){\r\n        if(data.x){\r\n            prop.k = true;\r\n            prop.x = true;\r\n            prop.initiateExpression = ExpressionManager.initiateExpression;\r\n            prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop));\r\n        }\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n        console.warn('Transform at time not supported');\r\n    }\r\n\r\n    function getTransformStaticValueAtTime(time) {\r\n\r\n    }\r\n\r\n    var TextExpressionSelectorProp = (function(){\r\n\r\n        function getValueProxy(index,total){\r\n            this.textIndex = index+1;\r\n            this.textTotal = total;\r\n            this.getValue();\r\n            return this.v;\r\n        }\r\n\r\n        return function TextExpressionSelectorProp(elem,data){\r\n            this.pv = 1;\r\n            this.comp = elem.comp;\r\n            this.elem = elem;\r\n            this.mult = 0.01;\r\n            this.propType = 'textSelector';\r\n            this.textTotal = data.totalChars;\r\n            this.selectorValue = 100;\r\n            this.lastValue = [1,1,1];\r\n            searchExpressions.bind(this)(elem,data,this);\r\n            this.getMult = getValueProxy;\r\n            this.getVelocityAtTime = getVelocityAtTime;\r\n            if(this.kf){\r\n                this.getValueAtTime = getValueAtTime.bind(this);\r\n            } else {\r\n                this.getValueAtTime = getStaticValueAtTime.bind(this);\r\n            }\r\n            this.setGroupProperty = setGroupProperty;\r\n        };\r\n    }());\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n    TransformPropertyFactory.getTransformProperty = function(elem, data, container) {\r\n        var prop = getTransformProperty(elem, data, container);\r\n        if(prop.dynamicProperties.length) {\r\n            prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = setGroupProperty;\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n    PropertyFactory.getProp = function(elem,data,type, mult, container){\r\n        var prop = propertyGetProp(elem,data,type, mult, container);\r\n        //prop.getVelocityAtTime = getVelocityAtTime;\r\n        //prop.loopOut = loopOut;\r\n        //prop.loopIn = loopIn;\r\n        if(prop.kf){\r\n            prop.getValueAtTime = getValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = setGroupProperty;\r\n        prop.loopOut = loopOut;\r\n        prop.loopIn = loopIn;\r\n        prop.getVelocityAtTime = getVelocityAtTime;\r\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n        prop.propertyIndex = data.ix;\r\n        var value = 0;\r\n        if(type !== 0) {\r\n            value = createTypedArray('float32', data.a === 1 ?  data.k[0].s.length : data.k.length);\r\n        }\r\n        prop._cachingAtTime = {\r\n            lastFrame: initialDefaultFrame,\r\n            lastIndex: 0,\r\n            value: value\r\n        };\r\n        searchExpressions(elem,data,prop);\r\n        if(prop.k){\r\n            container.addDynamicProperty(prop);\r\n        }\r\n\r\n        return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n        //For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n        if (!this._cachingAtTime) {\r\n            this._cachingAtTime = {\r\n                shapeValue: shape_pool.clone(this.pv),\r\n                lastIndex: 0,\r\n                lastTime: initialDefaultFrame\r\n            };\r\n        }\r\n        if(frameNum !== this._cachingAtTime.lastTime) {\r\n            this._cachingAtTime.lastTime = frameNum;\r\n            frameNum *= this.elem.globalData.frameRate;\r\n            this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n        }\r\n        return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions(){}\r\n    ShapeExpressions.prototype = {\r\n        vertices: function(prop, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            var i, len = shapePath._length;\r\n            var vertices = shapePath[prop];\r\n            var points = shapePath.v;\r\n            var arr = createSizedArray(len);\r\n            for(i = 0; i < len; i += 1) {\r\n                if(prop === 'i' || prop === 'o') {\r\n                    arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n                } else {\r\n                    arr[i] = [vertices[i][0], vertices[i][1]];\r\n                }\r\n                \r\n            }\r\n            return arr;\r\n        },\r\n        points: function(time){\r\n            return this.vertices('v', time);\r\n        },\r\n        inTangents: function(time){\r\n            return this.vertices('i', time);\r\n        },\r\n        outTangents: function(time){\r\n            return this.vertices('o', time);\r\n        },\r\n        isClosed: function(){\r\n            return this.v.c;\r\n        },\r\n        pointOnPath: function(perc, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            if(!this._segmentsLength) {\r\n                this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n            }\r\n\r\n            var segmentsLength = this._segmentsLength;\r\n            var lengths = segmentsLength.lengths;\r\n            var lengthPos = segmentsLength.totalLength * perc;\r\n            var i = 0, len = lengths.length;\r\n            var j = 0, jLen;\r\n            var accumulatedLength = 0, pt;\r\n            while(i < len) {\r\n                if(accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n                    var initIndex = i;\r\n                    var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n                    var segmentPerc = (lengthPos - accumulatedLength)/lengths[i].addedLength;\r\n                    pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n                    break;\r\n                } else {\r\n                    accumulatedLength += lengths[i].addedLength;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(!pt){\r\n                pt = shapePath.c ? [shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]];\r\n            }\r\n            return pt;\r\n        },\r\n        vectorOnPath: function(perc, time, vectorType){\r\n            //perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n            perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\r\n            var pt1 = this.pointOnPath(perc, time);\r\n            var pt2 = this.pointOnPath(perc + 0.001, time);\r\n            var xLength = pt2[0] - pt1[0];\r\n            var yLength = pt2[1] - pt1[1];\r\n            var magnitude = Math.sqrt(Math.pow(xLength,2) + Math.pow(yLength,2));\r\n            var unitVector = vectorType === 'tangent' ? [xLength/magnitude, yLength/magnitude] : [-yLength/magnitude, xLength/magnitude];\r\n            return unitVector;\r\n        },\r\n        tangentOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'tangent');\r\n        },\r\n        normalOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'normal');\r\n        },\r\n        setGroupProperty: setGroupProperty,\r\n        getValueAtTime: getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n    ShapePropertyFactory.getShapeProp = function(elem,data,type, arr, trims){\r\n        var prop = propertyGetShapeProp(elem,data,type, arr, trims);\r\n        prop.propertyIndex = data.ix;\r\n        prop.lock = false;\r\n        if(type === 3){\r\n            searchExpressions(elem,data.pt,prop);\r\n        } else if(type === 4){\r\n            searchExpressions(elem,data.ks,prop);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\n    TextSelectorProp.getTextSelectorProp = function(elem, data,arr){\r\n        if(data.t === 1){\r\n            return new TextExpressionSelectorProp(elem, data,arr);\r\n        } else {\r\n            return propertyGetTextProp(elem,data,arr);\r\n        }\r\n    };\r\n}());\n(function addDecorator() {\r\n\r\n    function searchExpressions(){\r\n        if(this.data.d.x){\r\n            this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);\r\n            this.addEffect(this.getExpressionValue.bind(this));\r\n            return true;\r\n        }\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function(currentValue) {\r\n        var newValue = this.calculateExpression(currentValue.t);\r\n        currentValue.t = newValue;\r\n        return currentValue;\r\n    }\r\n\r\n    TextProperty.prototype.searchProperty = function(){\r\n\r\n        var isKeyframed = this.searchKeyframes();\r\n        var hasExpressions = this.searchExpressions();\r\n        this.kf = isKeyframed || hasExpressions;\r\n        return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n    \r\n}());\nvar ShapeExpressionInterface = (function(){\r\n\r\n    function iterateElements(shapes,view, propertyGroup){\r\n        var arr = [];\r\n        var i, len = shapes ? shapes.length : 0;\r\n        for(i=0;i<len;i+=1){\r\n            if(shapes[i].ty == 'gr'){\r\n                arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'fl'){\r\n                arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'st'){\r\n                arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tm'){\r\n                arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tr'){\r\n                //arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'el'){\r\n                arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'sr'){\r\n                arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'sh'){\r\n                arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rc'){\r\n                arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rd'){\r\n                arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rp'){\r\n                arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape,view, propertyGroup){\r\n       var interfaces;\r\n       var interfaceFunction = function _interfaceFunction(value){\r\n           var i = 0, len = interfaces.length;\r\n            while(i<len){\r\n                if(interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value){\r\n                   return interfaces[i];\r\n                }\r\n                i+=1;\r\n            }\r\n            if(typeof value === 'number'){\r\n               return interfaces[value-1];\r\n            }\r\n       };\r\n       interfaceFunction.propertyGroup = function(val){\r\n           if(val === 1){\r\n               return interfaceFunction;\r\n           } else{\r\n               return propertyGroup(val-1);\r\n           }\r\n       };\r\n       interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n       interfaceFunction.numProperties = interfaces.length;\r\n       interfaceFunction.propertyIndex = shape.cix;\r\n       interfaceFunction._name = shape.nm;\r\n\r\n       return interfaceFunction;\r\n   }\r\n\r\n    function groupInterfaceFactory(shape,view, propertyGroup){\r\n        var interfaceFunction = function _interfaceFunction(value){\r\n            switch(value){\r\n                case 'ADBE Vectors Group':\r\n                case 'Contents':\r\n                case 2:\r\n                    return interfaceFunction.content;\r\n                //Not necessary for now. Keeping them here in case a new case appears\r\n                //case 'ADBE Vector Transform Group':\r\n                //case 3:\r\n                default:\r\n                    return interfaceFunction.transform;\r\n            }\r\n        };\r\n        interfaceFunction.propertyGroup = function(val){\r\n            if(val === 1){\r\n                return interfaceFunction;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        };\r\n        var content = contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);\r\n        var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1],view.it[view.it.length - 1],interfaceFunction.propertyGroup);\r\n        interfaceFunction.content = content;\r\n        interfaceFunction.transform = transformInterface;\r\n        Object.defineProperty(interfaceFunction, '_name', {\r\n            get: function(){\r\n                return shape.nm;\r\n            }\r\n        });\r\n        //interfaceFunction.content = interfaceFunction;\r\n        interfaceFunction.numProperties = shape.np;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.nm = shape.nm;\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape,view,propertyGroup){\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: function() {\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            },\r\n            'opacity': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(propertyGroup);\r\n        view.o.setGroupProperty(propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val === 1){\r\n                return ob;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        }\r\n        function _dashPropertyGroup(val){\r\n            if(val === 1){\r\n                return dashOb;\r\n            } else{\r\n                return _propertyGroup(val-1);\r\n            }\r\n        }\r\n        function addPropertyToDashOb(i) {\r\n            Object.defineProperty(dashOb, shape.d[i].nm, {\r\n                get: function(){\r\n                    return ExpressionValue(view.d.dataProps[i].p);\r\n                }\r\n            });\r\n        }\r\n        var i, len = shape.d ? shape.d.length : 0;\r\n        var dashOb = {};\r\n        for (i = 0; i < len; i += 1) {\r\n            addPropertyToDashOb(i);\r\n            view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            } else if(val === 'Stroke Width' || val === 'stroke width'){\r\n                return interfaceFunction.strokeWidth;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: function() {\r\n                    return ExpressionValue(view.c, 1 / view.c.mult, 'color');\r\n                }\r\n            },\r\n            'opacity': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o, 100);\r\n                }\r\n            },\r\n            'strokeWidth': {\r\n                get: function() {\r\n                    return ExpressionValue(view.w);\r\n                }\r\n            },\r\n            'dash': {\r\n                get: function() {\r\n                    return dashOb;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n        view.w.setGroupProperty(_propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        view.s.setGroupProperty(_propertyGroup);\r\n        view.e.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === shape.e.ix || val === 'End' || val === 'end'){\r\n                return interfaceFunction.end;\r\n            }\r\n            if(val === shape.s.ix){\r\n                return interfaceFunction.start;\r\n            }\r\n            if(val === shape.o.ix){\r\n                return interfaceFunction.offset;\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'start': {\r\n                get: function() {\r\n                    return ExpressionValue(view.s, 1 / view.s.mult);\r\n                }\r\n            },\r\n            'end': {\r\n                get: function() {\r\n                    return ExpressionValue(view.e, 1 / view.e.mult);\r\n                }\r\n            },\r\n            'offset': {\r\n                get: function() {\r\n                    return ExpressionValue(view.o);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        view.transform.mProps.o.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.p.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.a.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.s.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.r.setGroupProperty(_propertyGroup);\r\n        if(view.transform.mProps.sk){\r\n            view.transform.mProps.sk.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.sa.setGroupProperty(_propertyGroup);\r\n        }\r\n        view.transform.op.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.a.ix === value || value === 'Anchor Point'){\r\n                return interfaceFunction.anchorPoint;\r\n            }\r\n            if(shape.o.ix === value || value === 'Opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n            if(shape.p.ix === value || value === 'Position'){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation'){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.s.ix === value || value === 'Scale'){\r\n                return interfaceFunction.scale;\r\n            }\r\n            if(shape.sk && shape.sk.ix === value || value === 'Skew'){\r\n                return interfaceFunction.skew;\r\n            }\r\n            if(shape.sa && shape.sa.ix === value || value === 'Skew Axis'){\r\n                return interfaceFunction.skewAxis;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'opacity': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.o, 1/view.transform.mProps.o.mult);\r\n                }\r\n            },\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.p);\r\n                }\r\n            },\r\n            'anchorPoint': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.a);\r\n                }\r\n            },\r\n            'scale': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.s, 1 / view.transform.mProps.s.mult);\r\n                }\r\n            },\r\n            'rotation': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.r, 1 / view.transform.mProps.r.mult);\r\n                }\r\n            },\r\n            'skew': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sk);\r\n                }\r\n            },\r\n            'skewAxis': {\r\n                get: function(){\r\n                    return ExpressionValue(view.transform.mProps.sa);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.ty = 'tr';\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.s.ix === value){\r\n                return interfaceFunction.size;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'size': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            },\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.or.setGroupProperty(_propertyGroup);\r\n        prop.os.setGroupProperty(_propertyGroup);\r\n        prop.pt.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n        if(shape.ir){\r\n            prop.ir.setGroupProperty(_propertyGroup);\r\n            prop.is.setGroupProperty(_propertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.pt.ix === value){\r\n                return interfaceFunction.points;\r\n            }\r\n            if(shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value){\r\n                return interfaceFunction.outerRadius;\r\n            }\r\n            if(shape.os.ix === value){\r\n                return interfaceFunction.outerRoundness;\r\n            }\r\n            if(shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)){\r\n                return interfaceFunction.innerRadius;\r\n            }\r\n            if(shape.is && shape.is.ix === value){\r\n                return interfaceFunction.innerRoundness;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            'rotation': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.r, 1 / prop.r.mult);\r\n                }\r\n            },\r\n            'points': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.pt);\r\n                }\r\n            },\r\n            'outerRadius': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.or);\r\n                }\r\n            },\r\n            'outerRoundness': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.os);\r\n                }\r\n            },\r\n            'innerRadius': {\r\n                get: function(){\r\n                    if(!prop.ir){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.ir);\r\n                }\r\n            },\r\n            'innerRoundness': {\r\n                get: function(){\r\n                    if(!prop.is){\r\n                        return 0;\r\n                    }\r\n                    return ExpressionValue(prop.is, 1 / prop.is.mult);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.roundness;\r\n            }\r\n            if(shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size'){\r\n                return interfaceFunction.size;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.p);\r\n                }\r\n            },\r\n            'roundness': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.r);\r\n                }\r\n            },\r\n            'size': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.s);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.rd.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.r.ix === value || 'Round Corners 1' === value){\r\n                return interfaceFunction.radius;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'radius': {\r\n                get: function() {\r\n                    return ExpressionValue(prop.rd);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.c.setGroupProperty(_propertyGroup);\r\n        prop.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.c.ix === value || 'Copies' === value){\r\n                return interfaceFunction.copies;\r\n            } else if(shape.o.ix === value || 'Offset' === value){\r\n                return interfaceFunction.offset;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'copies': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.c);\r\n                }\r\n            },\r\n            'offset': {\r\n                get: function(){\r\n                    return ExpressionValue(prop.o);\r\n                }\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function pathInterfaceFactory(shape,view,propertyGroup){\r\n        var prop = view.sh;\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        prop.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2){\r\n                return interfaceFunction.path;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'path': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            'shape': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'ix': { value: shape.ix },\r\n            'mn': { value: shape.mn }\r\n        });\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return function(shapes,view,propertyGroup) {\r\n        var interfaces;\r\n        function _interfaceFunction(value){\r\n            if(typeof value === 'number'){\r\n                return interfaces[value-1];\r\n            } else {\r\n                var i = 0, len = interfaces.length;\r\n                while(i<len){\r\n                    if(interfaces[i]._name === value){\r\n                        return interfaces[i];\r\n                    }\r\n                    i+=1;\r\n                }\r\n            }\r\n        }\r\n        _interfaceFunction.propertyGroup = propertyGroup;\r\n        interfaces = iterateElements(shapes, view, _interfaceFunction);\r\n        return _interfaceFunction;\r\n    };\r\n}());\r\n\nvar TextExpressionInterface = (function(){\r\n\treturn function(elem){\r\n        var _prevValue, _sourceText;\r\n        function _thisLayerFunction(){\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\r\n            get: function(){\r\n                var stringValue = elem.textProperty.currentData.t;\r\n                if(stringValue !== _prevValue) {\r\n                    elem.textProperty.currentData.t = _prevValue;\r\n                    _sourceText = new String(stringValue);\r\n                    //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n                    _sourceText.value = stringValue ? stringValue : new String(stringValue);\r\n                }\r\n                return _sourceText;\r\n            }\r\n        });\r\n        return _thisLayerFunction;\r\n    };\r\n}());\nvar LayerExpressionInterface = (function (){\r\n    function toWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n        }\r\n        return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n    }\r\n    function fromWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n    function fromComp(arr){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n\r\n    return function(elem){\r\n\r\n        var transformInterface;\r\n\r\n        function _registerMaskInterface(maskManager){\r\n            _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n        }\r\n        function _registerEffectsInterface(effects){\r\n            _thisLayerFunction.effect = effects;\r\n        }\r\n\r\n        function _thisLayerFunction(name){\r\n            switch(name){\r\n                case \"ADBE Root Vectors Group\":\r\n                case \"Contents\":\r\n                case 2:\r\n                    return _thisLayerFunction.shapeInterface;\r\n                case 1:\r\n                case 6:\r\n                case \"Transform\":\r\n                case \"transform\":\r\n                case \"ADBE Transform Group\":\r\n                    return transformInterface;\r\n                case 4:\r\n                case \"ADBE Effect Parade\":\r\n                    return _thisLayerFunction.effect;\r\n            }\r\n        }\r\n        _thisLayerFunction.toWorld = toWorld;\r\n        _thisLayerFunction.fromWorld = fromWorld;\r\n        _thisLayerFunction.toComp = toWorld;\r\n        _thisLayerFunction.fromComp = fromComp;\r\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n        _thisLayerFunction._elem = elem;\r\n        transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n        var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n        Object.defineProperties(_thisLayerFunction,{\r\n            hasParent: {\r\n                get: function(){\r\n                    return elem.hierarchy.length;\r\n                }\r\n            },\r\n            parent: {\r\n                get: function(){\r\n                    return elem.hierarchy[0].layerInterface;\r\n                }\r\n            },\r\n            rotation: getDescriptor(transformInterface, 'rotation'),\r\n            scale: getDescriptor(transformInterface, 'scale'),\r\n            position: getDescriptor(transformInterface, 'position'),\r\n            opacity: getDescriptor(transformInterface, 'opacity'),\r\n            anchorPoint: anchorPointDescriptor,\r\n            anchor_point: anchorPointDescriptor,\r\n            transform: {\r\n                get: function () {\r\n                    return transformInterface;\r\n                }\r\n            },\r\n            active: {\r\n                get: function(){\r\n                    return elem.isInRange;\r\n                }\r\n            }\r\n        });\r\n\r\n        _thisLayerFunction.startTime = elem.data.st;\r\n        _thisLayerFunction.index = elem.data.ind;\r\n        _thisLayerFunction.source = elem.data.refId;\r\n        _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n        _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n\r\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\n\nvar CompExpressionInterface = (function (){\r\n    return function(comp){\r\n        function _thisLayerFunction(name){\r\n            var i=0, len = comp.layers.length;\r\n            while(i<len){\r\n                if(comp.layers[i].nm === name || comp.layers[i].ind === name){\r\n                    return comp.elements[i].layerInterface;\r\n                }\r\n                i += 1;\r\n            }\r\n            return {active:false};\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value:comp.data.nm });\r\n        _thisLayerFunction.layer = _thisLayerFunction;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.height = comp.globalData.compSize.h;\r\n        _thisLayerFunction.width = comp.globalData.compSize.w;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.frameDuration = 1/comp.globalData.frameRate;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\nvar TransformExpressionInterface = (function (){\r\n    return function(transform){\r\n        function _thisFunction(name){\r\n            switch(name){\r\n                case \"scale\":\r\n                case \"Scale\":\r\n                case \"ADBE Scale\":\r\n                case 6:\r\n                    return _thisFunction.scale;\r\n                case \"rotation\":\r\n                case \"Rotation\":\r\n                case \"ADBE Rotation\":\r\n                case \"ADBE Rotate Z\":\r\n                case 10:\r\n                    return _thisFunction.rotation;\r\n                case \"ADBE Rotate X\":\r\n                    return _thisFunction.xRotation;\r\n                case \"ADBE Rotate Y\":\r\n                    return _thisFunction.yRotation;\r\n                case \"position\":\r\n                case \"Position\":\r\n                case \"ADBE Position\":\r\n                case 2:\r\n                    return _thisFunction.position;\r\n                case 'ADBE Position_0':\r\n                    return _thisFunction.xPosition;\r\n                case 'ADBE Position_1':\r\n                    return _thisFunction.yPosition;\r\n                case 'ADBE Position_2':\r\n                    return _thisFunction.zPosition;\r\n                case \"anchorPoint\":\r\n                case \"AnchorPoint\":\r\n                case \"Anchor Point\":\r\n                case \"ADBE AnchorPoint\":\r\n                case 1:\r\n                    return _thisFunction.anchorPoint;\r\n                case \"opacity\":\r\n                case \"Opacity\":\r\n                case 11:\r\n                    return _thisFunction.opacity;\r\n            }\r\n        }\r\n\r\n        Object.defineProperty(_thisFunction, \"rotation\", {\r\n            get: function(){\r\n                if(transform.r) {\r\n                    return ExpressionValue(transform.r, 1/degToRads);\r\n                } else {\r\n                    return ExpressionValue(transform.rz, 1/degToRads);\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xRotation\", {\r\n            get: function(){\r\n                    return ExpressionValue(transform.rx, 1/degToRads);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yRotation\", {\r\n            get: function(){\r\n                    return ExpressionValue(transform.ry, 1/degToRads);\r\n            }\r\n        });\r\n        Object.defineProperty(_thisFunction, \"scale\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.s, 100);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"position\", {\r\n            get: function () {\r\n                if(transform.p) {\r\n                    return ExpressionValue(transform.p);\r\n                } else {\r\n                    return [transform.px.v, transform.py.v, transform.pz ? transform.pz.v : 0];\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.px);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.py);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zPosition\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.pz);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.a);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"opacity\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.o, 100);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skew\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.sk);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.sa);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"orientation\", {\r\n            get: function () {\r\n                return ExpressionValue(transform.or);\r\n            }\r\n        });\r\n\r\n        return _thisFunction;\r\n    };\r\n}());\nvar ProjectInterface = (function (){\r\n\r\n    function registerComposition(comp){\r\n        this.compositions.push(comp);\r\n    }\r\n\r\n    return function(){\r\n        function _thisProjectFunction(name){\r\n            var i = 0, len = this.compositions.length;\r\n            while(i<len){\r\n                if(this.compositions[i].data && this.compositions[i].data.nm === name){\r\n                    if(this.compositions[i].prepareFrame) {\r\n                        this.compositions[i].prepareFrame(this.compositions[i].data.xt ? this.currentFrame : this.compositions[i].renderedFrame);\r\n                    }\r\n                    return this.compositions[i].compInterface;\r\n                }\r\n                i+=1;\r\n            }\r\n        }\r\n\r\n        _thisProjectFunction.compositions = [];\r\n        _thisProjectFunction.currentFrame = 0;\r\n\r\n        _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n\r\n\r\n        return _thisProjectFunction;\r\n    };\r\n}());\nvar EffectsExpressionInterface = (function (){\r\n    var ob = {\r\n        createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup){\r\n        if(elem.effectsManager){\r\n\r\n            var effectElements = [];\r\n            var effectsData = elem.data.ef;\r\n            var i, len = elem.effectsManager.effectElements.length;\r\n            for(i=0;i<len;i+=1){\r\n                effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem));\r\n            }\r\n\r\n            return function(name){\r\n                var effects = elem.data.ef, i = 0, len = effects.length;\r\n                while(i<len) {\r\n                    if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                        return effectElements[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    function createGroupInterface(data,elements, propertyGroup, elem){\r\n        var effectElements = [];\r\n        var i, len = data.ef.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(data.ef[i].ty === 5){\r\n                effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup, elem));\r\n            } else {\r\n                effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty, elem, _propertyGroup));\r\n            }\r\n        }\r\n\r\n        function _propertyGroup(val) {\r\n            if(val === 1){\r\n               return groupInterface;\r\n            } else{\r\n               return propertyGroup(val-1);\r\n            }\r\n        }\r\n\r\n        var groupInterface = function(name){\r\n            var effects = data.ef, i = 0, len = effects.length;\r\n            while(i<len) {\r\n                if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                    if(effects[i].ty === 5){\r\n                        return effectElements[i];\r\n                    } else {\r\n                        return effectElements[i]();\r\n                    }\r\n                }\r\n                i += 1;\r\n            }\r\n            return effectElements[0]();\r\n        };\r\n\r\n        groupInterface.propertyGroup = _propertyGroup;\r\n\r\n        if(data.mn === 'ADBE Color Control'){\r\n            Object.defineProperty(groupInterface, 'color', {\r\n                get: function(){\r\n                    return effectElements[0]();\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n            get: function(){\r\n                return data.np;\r\n            }\r\n        });\r\n        groupInterface.active = data.en !== 0;\r\n        return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup){\r\n        function interfaceFunction(){\r\n            if(type === 10){\r\n                return elem.comp.compInterface(element.p.v);\r\n            }\r\n            return ExpressionValue(element.p);\r\n        }\r\n\r\n        if(element.p.setGroupProperty) {\r\n            element.p.setGroupProperty(propertyGroup);\r\n        }\r\n\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n\r\n}());\nvar MaskManagerInterface = (function(){\r\n\r\n\tfunction MaskInterface(mask, data){\r\n\t\tthis._mask = mask;\r\n\t\tthis._data = data;\r\n\t}\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n        get: function(){\r\n                if(this._mask.prop.k){\r\n                    this._mask.prop.getValue();\r\n                }\r\n                return this._mask.prop;\r\n            }\r\n        });\r\n\r\n\tvar MaskManager = function(maskManager, elem){\r\n\t\tvar _maskManager = maskManager;\r\n\t\tvar _elem = elem;\r\n\t\tvar _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\t\tvar i, len = maskManager.viewData.length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\t_masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n\t\t}\r\n\r\n\t\tvar maskFunction = function(name){\r\n\t\t\ti = 0;\r\n\t\t    while(i<len){\r\n\t\t        if(maskManager.masksProperties[i].nm === name){\r\n\t\t            return _masksInterfaces[i];\r\n\t\t        }\r\n\t\t        i += 1;\r\n\t\t    }\r\n\t\t};\r\n\t\treturn maskFunction;\r\n\t};\r\n\treturn MaskManager;\r\n}());\r\n\nvar ExpressionValue = (function() {\r\n\treturn function(elementProp, mult, type) {\r\n        mult = mult || 1;\r\n        var expressionValue, arrayValue;\r\n\r\n\t\tif (elementProp.k) {\r\n            elementProp.getValue();\r\n        }\r\n        var i, len, arrValue, val;\r\n        if (type) {\r\n        \tif(type === 'color') {\r\n        \t\tlen = 4;\r\n                expressionValue = createTypedArray('float32', len);\r\n                arrValue = createTypedArray('float32', len);\r\n\t\t        for (i = 0; i < len; i += 1) {\r\n\t\t            expressionValue[i] = arrValue[i] = (i < 3) ? elementProp.v[i] * mult : 1;\r\n\t\t        }\r\n\t        \texpressionValue.value = arrValue;\r\n        \t}\r\n        } else if (elementProp.propType === 'unidimensional'){\r\n            val = elementProp.v * mult;\r\n            expressionValue = new Number(val);\r\n            expressionValue.value = val;\r\n        } else {\r\n        \tlen = elementProp.pv.length;\r\n            expressionValue = createTypedArray('float32', len);\r\n            arrValue = createTypedArray('float32', len);\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            expressionValue[i] = arrValue[i] = elementProp.v[i] * mult;\r\n\t        }\r\n\t        expressionValue.value = arrValue;\r\n        }\r\n        \r\n        expressionValue.numKeys = elementProp.keyframes ? elementProp.keyframes.length : 0;\r\n        expressionValue.key = function(pos) {\r\n            if (!expressionValue.numKeys) {\r\n                return 0;\r\n            } else {\r\n                return elementProp.keyframes[pos-1].t;\r\n            }\r\n        };\r\n        expressionValue.valueAtTime = elementProp.getValueAtTime;\r\n        expressionValue.propertyGroup = elementProp.propertyGroup;\r\n        return expressionValue;\r\n\t};\r\n}());\nfunction SliderEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction AngleEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction ColorEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction PointEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction LayerIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction MaskIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction CheckboxEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction NoValueEffect(){\r\n    this.p = {};\r\n}\nfunction EffectsManager(data,element){\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i,len = effects.length;\r\n    var effectItem;\r\n    for(i=0;i<len;i++) {\r\n        effectItem = new GroupEffect(effects[i],element);\r\n        this.effectElements.push(effectItem);\r\n    }\r\n}\r\n\r\nfunction GroupEffect(data,element){\r\n    this.container = element;\r\n    this.dynamicProperties = [];\r\n    this.init(data,element);\r\n}\r\n\r\nGroupEffect.prototype.getValue = function(){\r\n    this._mdf = false;\r\n    var i, len = this.dynamicProperties.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.dynamicProperties[i].getValue();\r\n        if(this.dynamicProperties[i]._mdf) {\r\n            this._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nGroupEffect.prototype.addDynamicProperty = addDynamicProperty;\r\n\r\nGroupEffect.prototype.init = function(data,element){\r\n    this.data = data;\r\n    this._mdf = false;\r\n    this.effectElements = [];\r\n    var i, len = this.data.ef.length;\r\n    var eff, effects = this.data.ef;\r\n    for(i=0;i<len;i+=1){\r\n        eff = null;\r\n        switch(effects[i].ty){\r\n            case 0:\r\n                eff = new SliderEffect(effects[i],element,this);\r\n                break;\r\n            case 1:\r\n                eff = new AngleEffect(effects[i],element,this);\r\n                break;\r\n            case 2:\r\n                eff = new ColorEffect(effects[i],element,this);\r\n                break;\r\n            case 3:\r\n                eff = new PointEffect(effects[i],element,this);\r\n                break;\r\n            case 4:\r\n            case 7:\r\n                eff = new CheckboxEffect(effects[i],element,this);\r\n                break;\r\n            case 10:\r\n                eff = new LayerIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 11:\r\n                eff = new MaskIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 5:\r\n                eff = new EffectsManager(effects[i],element,this);\r\n                break;\r\n            //case 6:\r\n            default:\r\n                eff = new NoValueEffect(effects[i],element,this);\r\n                break;\r\n        }\r\n        if(eff) {\r\n            this.effectElements.push(eff);\r\n        }\r\n    }\r\n};\r\n    var lottiejs = {};\r\n\r\n    function setLocationHref (href) {\r\n        locationHref = href;\r\n    }\r\n    function play(animation){\r\n        animationManager.play(animation);\r\n    }\r\n\r\n    function pause(animation) {\r\n        animationManager.pause(animation);\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        animationManager.togglePause(animation);\r\n    }\r\n\r\n    function setSpeed(value, animation) {\r\n        animationManager.setSpeed(value, animation);\r\n    }\r\n\r\n    function setDirection(value, animation) {\r\n        animationManager.setDirection(value, animation);\r\n    }\r\n\r\n    function stop(animation) {\r\n        animationManager.stop(animation);\r\n    }\r\n\r\n    function searchAnimations() {\r\n        if (standalone === true) {\r\n            animationManager.searchAnimations(animationData, standalone, renderer);\r\n        } else {\r\n            animationManager.searchAnimations();\r\n        }\r\n    }\r\n\r\n    function registerAnimation(elem) {\r\n        return animationManager.registerAnimation(elem);\r\n    }\r\n\r\n    function resize() {\r\n        animationManager.resize();\r\n    }\r\n\r\n    /*function start() {\r\n        animationManager.start();\r\n    }*/\r\n\r\n    function goToAndStop(val, isFrame, animation) {\r\n        animationManager.goToAndStop(val, isFrame, animation);\r\n    }\r\n\r\n    function setSubframeRendering(flag) {\r\n        subframeEnabled = flag;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n        if (standalone === true) {\r\n            params.animationData = JSON.parse(animationData);\r\n        }\r\n        return animationManager.loadAnimation(params);\r\n    }\r\n\r\n    function destroy(animation) {\r\n        return animationManager.destroy(animation);\r\n    }\r\n\r\n    function setQuality(value) {\r\n        if (typeof value === 'string') {\r\n            switch (value) {\r\n                case 'high':\r\n                    defaultCurveSegments = 200;\r\n                    break;\r\n                case 'medium':\r\n                    defaultCurveSegments = 50;\r\n                    break;\r\n                case 'low':\r\n                    defaultCurveSegments = 10;\r\n                    break;\r\n            }\r\n        } else if (!isNaN(value) && value > 1) {\r\n            defaultCurveSegments = value;\r\n        }\r\n        if (defaultCurveSegments >= 50) {\r\n            roundValues(false);\r\n        } else {\r\n            roundValues(true);\r\n        }\r\n    }\r\n\r\n    function inBrowser() {\r\n        return typeof navigator !== 'undefined';\r\n    }\r\n\r\n    function installPlugin(type, plugin) {\r\n        if (type === 'expressions') {\r\n            expressionsPlugin = plugin;\r\n        }\r\n    }\r\n\r\n    function getFactory(name) {\r\n        switch (name) {\r\n            case \"propertyFactory\":\r\n                return PropertyFactory;\r\n            case \"shapePropertyFactory\":\r\n                return ShapePropertyFactory;\r\n            case \"matrix\":\r\n                return Matrix;\r\n        }\r\n    }\r\n    lottiejs.play = play;\r\n    lottiejs.pause = pause;\r\n    lottiejs.setLocationHref = setLocationHref;\r\n    lottiejs.togglePause = togglePause;\r\n    lottiejs.setSpeed = setSpeed;\r\n    lottiejs.setDirection = setDirection;\r\n    lottiejs.stop = stop;\r\n    lottiejs.searchAnimations = searchAnimations;\r\n    lottiejs.registerAnimation = registerAnimation;\r\n    lottiejs.loadAnimation = loadAnimation;\r\n    lottiejs.setSubframeRendering = setSubframeRendering;\r\n    lottiejs.resize = resize;\r\n    //lottiejs.start = start;\r\n    lottiejs.goToAndStop = goToAndStop;\r\n    lottiejs.destroy = destroy;\r\n    lottiejs.setQuality = setQuality;\r\n    lottiejs.inBrowser = inBrowser;\r\n    lottiejs.installPlugin = installPlugin;\r\n    lottiejs.__getFactory = getFactory;\r\n    lottiejs.version = '5.1.10';\r\n\r\n    function checkReady() {\r\n        if (document.readyState === \"complete\") {\r\n            clearInterval(readyStateCheckInterval);\r\n            searchAnimations();\r\n        }\r\n    }\r\n\r\n    function getQueryVariable(variable) {\r\n        var vars = queryString.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n    }\r\n    var standalone = '__[STANDALONE]__';\r\n    var animationData = '__[ANIMATIONDATA]__';\r\n    var renderer = '';\r\n    if (standalone) {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var index = scripts.length - 1;\r\n        var myScript = scripts[index] || {\r\n            src: ''\r\n        };\r\n        var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n        renderer = getQueryVariable('renderer');\r\n    }\r\n    var readyStateCheckInterval = setInterval(checkReady, 100);\r\n    return lottiejs;\r\n}));"]}